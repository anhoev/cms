{"version":3,"sources":["webpack:///webpack/bootstrap 41840dfbf200732f4f4b","webpack:///./app.module.js","webpack:///delegated ./node_modules/jquery/dist/jquery.js from dll-reference lib_lib","webpack:///external \"lib_lib\"","webpack:///delegated ./node_modules/angular/index.js from dll-reference lib_lib","webpack:///delegated ./node_modules/angular-i18n/de-de.js from dll-reference lib_lib","webpack:///delegated ./node_modules/printthis/printThis.js from dll-reference lib_lib","webpack:///delegated ./node_modules/lodash/lodash.js from dll-reference lib_lib","webpack:///delegated ./node_modules/lodash/unionWith.js from dll-reference lib_lib","webpack:///delegated ./node_modules/lodash/pickBy.js from dll-reference lib_lib","webpack:///delegated ./node_modules/moment/moment.js from dll-reference lib_lib","webpack:///delegated ./node_modules/json-fn/jsonfn.js from dll-reference lib_lib","webpack:///delegated ./node_modules/bootstrap/dist/js/bootstrap.js from dll-reference lib_lib","webpack:///./components/components.module.js","webpack:///./components/cms-editable/module.js","webpack:///delegated ./node_modules/angular-ui-bootstrap/index.js from dll-reference lib_lib","webpack:///./components/cms-editable/editable-formly.html","webpack:///./components/formly/module.js","webpack:///delegated ./node_modules/angular-filter/index.js from dll-reference lib_lib","webpack:///./components/formly/config.js","webpack:///./components/formly/panel.html","webpack:///./components/formly/repeatSection.html","webpack:///./components/formly/repeat-section.controller.js","webpack:///./components/formly/tree.template.html","webpack:///./components/formly/tree.controller.js","webpack:///./components/formly/ref.select.html","webpack:///./components/formly/ref.controller.js","webpack:///./common/cms/QueryBuilder.js","webpack:///./components/formly/code.html","webpack:///./components/formly/code.controller.js","webpack:///delegated ./node_modules/jshint/src/jshint.js from dll-reference lib_lib","webpack:///delegated ./frontend/components/formly/ecma6.json from dll-reference lib_lib","webpack:///delegated ./frontend/components/formly/ecma5.json from dll-reference lib_lib","webpack:///delegated ./frontend/components/formly/cms-def.json from dll-reference lib_lib","webpack:///delegated ./node_modules/jquery-ui/ui/effect.js from dll-reference lib_lib","webpack:///./components/formly/array.controller.js","webpack:///./components/formly/array.template.html","webpack:///./components/formly/table.controller.js","webpack:///./components/formly/table.template.html","webpack:///./components/formly/select-type.controller.js","webpack:///./components/formly/select-element.controller.js","webpack:///./components/formly/select-property.controller.js","webpack:///./components/formly/select-child-property.controller.js","webpack:///./components/formly/select-fn.controller.js","webpack:///./components/formly/select.html","webpack:///./components/formly/select-whole.html","webpack:///./components/formly/multi-select.html","webpack:///./components/formly/bs-grid-select.controller.js","webpack:///./components/formly/bs-grid-select.html","webpack:///../~/angular-formly-templates-bootstrap/src/types/checkbox.html","webpack:///./components/formly/saveContainersController.js","webpack:///./components/formly/recursive.html","webpack:///./components/formly/recursive.controller.js","webpack:///delegated ./node_modules/api-check/dist/api-check.js from dll-reference lib_lib","webpack:///delegated ./node_modules/angular-ui-switch/angular-ui-switch.js from dll-reference lib_lib","webpack:///../~/angular-ui-switch/angular-ui-switch.css?2551","webpack:///../~/angular-ui-switch/angular-ui-switch.css","webpack:///delegated ./node_modules/css-loader/lib/css-base.js from dll-reference lib_lib","webpack:///delegated ./node_modules/style-loader/addStyles.js from dll-reference lib_lib","webpack:///delegated ./node_modules/angular-formly/dist/formly.js from dll-reference lib_lib","webpack:///delegated ./node_modules/angular-formly-templates-bootstrap/dist/angular-formly-templates-bootstrap.js from dll-reference lib_lib","webpack:///delegated ./node_modules/jstree/dist/jstree.js from dll-reference lib_lib","webpack:///delegated ./node_modules/jstree-bootstrap-theme/dist/themes/proton/style.min.css from dll-reference lib_lib","webpack:///delegated ./node_modules/ng-js-tree/dist/ngJsTree.min.js from dll-reference lib_lib","webpack:///delegated ./node_modules/ui-select/index.js from dll-reference lib_lib","webpack:///../~/ui-select/dist/select.min.css?94a3","webpack:///../~/ui-select/dist/select.min.css","webpack:///delegated ./node_modules/selectize/dist/css/selectize.css from dll-reference lib_lib","webpack:///../~/selectize/dist/js/standalone/selectize.js","webpack:///./components/formly/selectize.js","webpack:///../~/tinycolor2/tinycolor.js","webpack:///delegated ./node_modules/angularjs-color-picker/angularjs-color-picker.js from dll-reference lib_lib","webpack:///delegated ./node_modules/angularjs-color-picker/angularjs-color-picker.css from dll-reference lib_lib","webpack:///delegated ./node_modules/angular-sanitize/index.js from dll-reference lib_lib","webpack:///delegated ./node_modules/codemirror/lib/codemirror.js from dll-reference lib_lib","webpack:///delegated ./node_modules/codemirror/addon/edit/matchbrackets.js from dll-reference lib_lib","webpack:///delegated ./node_modules/codemirror/addon/edit/closebrackets.js from dll-reference lib_lib","webpack:///delegated ./node_modules/codemirror/addon/hint/show-hint.css from dll-reference lib_lib","webpack:///delegated ./node_modules/codemirror/addon/hint/show-hint.js from dll-reference lib_lib","webpack:///delegated ./node_modules/codemirror/mode/javascript/javascript.js from dll-reference lib_lib","webpack:///delegated ./node_modules/codemirror/addon/display/fullscreen.css from dll-reference lib_lib","webpack:///delegated ./node_modules/codemirror/addon/display/fullscreen.js from dll-reference lib_lib","webpack:///delegated ./node_modules/codemirror/addon/lint/lint.css from dll-reference lib_lib","webpack:///delegated ./node_modules/codemirror/addon/lint/lint.js from dll-reference lib_lib","webpack:///delegated ./node_modules/codemirror/addon/lint/javascript-lint.js from dll-reference lib_lib","webpack:///delegated ./node_modules/codemirror/addon/dialog/dialog.css from dll-reference lib_lib","webpack:///delegated ./node_modules/codemirror/addon/dialog/dialog.js from dll-reference lib_lib","webpack:///delegated ./node_modules/acorn/dist/acorn.js from dll-reference lib_lib","webpack:///delegated ./node_modules/acorn/dist/acorn_loose.js from dll-reference lib_lib","webpack:///delegated ./node_modules/acorn/dist/walk.js from dll-reference lib_lib","webpack:///delegated ./node_modules/tern/lib/tern.js from dll-reference lib_lib","webpack:///delegated ./node_modules/tern/doc/demo/polyfill.js from dll-reference lib_lib","webpack:///delegated ./node_modules/tern/lib/signal.js from dll-reference lib_lib","webpack:///delegated ./node_modules/tern/lib/def.js from dll-reference lib_lib","webpack:///delegated ./node_modules/tern/lib/comment.js from dll-reference lib_lib","webpack:///delegated ./node_modules/tern/lib/infer.js from dll-reference lib_lib","webpack:///delegated ./node_modules/tern/plugin/doc_comment.js from dll-reference lib_lib","webpack:///delegated ./node_modules/codemirror/addon/tern/tern.css from dll-reference lib_lib","webpack:///delegated ./node_modules/codemirror/addon/tern/tern.js from dll-reference lib_lib","webpack:///delegated ./node_modules/angular-ui-codemirror/src/ui-codemirror.js from dll-reference lib_lib","webpack:///./components/cms-editable/tpl.html","webpack:///./common/common.module.js","webpack:///./common/cms/cms.js","webpack:///delegated ./node_modules/ng-file-upload/index.js from dll-reference lib_lib","webpack:///./common/cms/Type.js","webpack:///delegated ./node_modules/angular-websocket/dist/angular-websocket.js from dll-reference lib_lib","webpack:///../~/uuid/uuid.js","webpack:///../~/uuid/rng-browser.js","webpack:///delegated ./node_modules/jquery-ui/ui/widgets/draggable.js from dll-reference lib_lib","webpack:///delegated ./node_modules/jquery-ui/ui/widgets/resizable.js from dll-reference lib_lib","webpack:///delegated ./node_modules/traverse/index.js from dll-reference lib_lib","webpack:///../~/angular-translate/dist/angular-translate.js","webpack:///./components/cms-types/module.js","webpack:///delegated ./node_modules/angular-drag-and-drop-lists/angular-drag-and-drop-lists.js from dll-reference lib_lib","webpack:///./components/cms-types/tpl.html","webpack:///./components/cms-main/module.js","webpack:///./components/cms-element-edit/module.js","webpack:///./components/cms-element-edit/tpl.html","webpack:///./components/cms-main/element.directive.js","webpack:///./components/cms-main/editor.directive.js","webpack:///./components/cms-main/editor.html","webpack:///./components/cms-main/cms-wrapper.directive.js","webpack:///delegated ./node_modules/angular-bootstrap-contextmenu/contextMenu.js from dll-reference lib_lib","webpack:///./components/cms-main/fragment.directive.js","webpack:///./components/cms-main/container.directive.js","webpack:///./components/cms-main/container.html","webpack:///./components/cms-main/container-edit.directive.js","webpack:///./components/cms-main/container-edit.html","webpack:///./components/cms-main/cms-form-path.directive.js","webpack:///./components/cms-sitemap/module.js","webpack:///./components/cms-sitemap/tpl.html","webpack:///./components/cms-edit-state/module.js","webpack:///./components/cms-edit-state/tpl.html","webpack:///./components/cms-admin/module.js","webpack:///./components/cms-admin/cms-list.js","webpack:///./components/cms-admin/cms-list.html","webpack:///./components/cms-admin/importService.js","webpack:///./components/cms-admin/importService.html","webpack:///./components/cms-admin/exportService.js","webpack:///./components/cms-admin/exportService.html","webpack:///./components/cms-admin/tpl.html","webpack:///./components/cms-nav/module.js","webpack:///./components/cms-nav/cms-nav.directive.js","webpack:///./components/cms-nav/cms-nav.html"],"names":["window","angular","printthis","$","fn","_","unionWith","pickBy","moment","JsonFn","stringify","obj","JSON","key","value","fnBody","Function","toString","length","substring","RegExp","charAt","undefined","hasOwnProperty","_id","parse","str","date2obj","iso8061","prefix","match","Date","eval","e","slice","_transform","transformResponse","d","module","controller","element","document","ready","bootstrap","components","name","directive","cmsEditableTransclude","cmsDirectEditableDirective","run","$inject","$templateCache","put","cms","link","scope","attrs","elementController","getElement","type","ref","vm","showJson","prepareForm","$watch","get","property","isValueUndefined","isEmpty","isNaN","require","restrict","bindToController","template","controllerAs","$filter","replace","refKey","Types","checkAndGetRef","_value","Object","v","$timeout","hide","show","withEditBtn","transclude","getType","model","form","fields","findField","split","templateOptions","focus","onSubmit","updateElement","isOpen","options","formState","path","apiCheck","globalConfig","disabled","Selectize","tinycolor","CodeMirror","tern","config","constant","label","input","formlyConfigProvider","size","$rootScopeProvider","digestTtl","disableWarnings","removeWrapperByName","setWrapper","setType","wrapper","overwriteOk","$scope","$http","genName","onFileUpload","file","uploadFile","w","console","log","download","filename","post","url","then","Type","to","loadElements","push","map","list","getTitle","labelProp","choice","marginTop","noPanel","formOptions","addNew","addNewWithChoice","copyFields","copy","createFormOptions","$index","startsWith","tree","treeConfig","core","themes","responsive","animation","check_callback","plugins","checkbox","tie_selection","version","data","check","_arr","treeInstance","jstree","get_checked","get_node","id","text","models","dropdownParent","valueField","labelField","searchField","onChange","val","multiple","find","async","load","query","callback","queryBuilder","limit","_textIndex","maxItems","sortField","score","search","item","toLowerCase","indexOf","_model","Array","isArray","m","QueryBuilder","_part","_query","part","_limit","_page","_sort","_search","_populate","_lean","_skip","params","$and","$text","$search","result","skip","populate","lean","JSHINT","hasError","escape","s","editorOptions","lineWrapping","lineNumbers","autoCloseBrackets","showHint","mode","tabSize","gutters","lint","cm","linter","getHelper","Pos","merge","esversion","debug","asi","codemirrorLoaded","editor","server","TernServer","defs","setOption","complete","showType","showDocs","jumpToDef","jumpBack","rename","selectName","hasClass","removeClass","addClass","getOption","on","updateArgHints","selectTab","refresh","showCode","unique","copyItemOptions","field","array","createFormState","getCols","types","k","dropRight","join","containers","getLabel","selected","walkInContainers","info","title","BindType","columns","getProperties","child","add","save","$emit","cb","restore","_fields","_formState","selectizeConfig","ngModel","ngDisabled","ngRequired","modelCtrl","selectize","settings","extend","defaults","toggle","disable","enable","validate","isInvalid","required","$setValidity","setSelectizeOptions","curr","prev","forEach","opt","removeOption","addOption","refreshOptions","setSelectizeValue","$control","toggleClass","$valid","$invalid","$dirty","$pristine","equals","items","setValue","$setViewValue","apply","arguments","onOptionAdd","onInitialize","$watchCollection","destroy","commonModule","Enum","Load","NOT","LOADING","LOADED","PART_LOADED","EditMode","ALL","VIEWELEMENT","DATAELEMENT","CONTAINER","modelModule","factory","$translateProvider","translations","Add","Setting","DeleteAll","Show","preferredLanguage","Upload","socketQueue","editState","editMode","dragType","showContainerEdit","changeEditMode","content","onfly","clone","res","remove","serverFn","createElement","removeElement","onerror","delete","updateContainerPage","location","pathname","loadElementsPending","countElements","paramsBuilder","sendWs","buildJson","count","msg","_uuid","v1","socket","send","assign","uuid","_load","time","_list","timeEnd","filter","e1","e2","queryList","findByRef","findByID","ID","findFnByID","each","f","bind","findFnByRef","walk","container","elements","resolve","fail","listColumns","isTab","deep","last","pop","node","reduce","parents","parent","stop","getContainer","_path","parseAndSaveData","_data","exportAll","confirm","importAll","upload","deleteElements","getAdminList","_types","pick","isViewElement","i","_children","createChildren","_properties","properties","children","shift","_type","_element","concat","_property","Config","dynamicQuery","showFields","col","execServerFn","fnName","args","execServerFnForWrapper","$websocket","setupServerFn","Local","append","prepend","new_uri","wsAddress","online","loc","protocol","host","reconnectIfNotNormalClose","onMessage","event","TypeClass","raw","fieldName","selectType","convert","end","start","service","cmsFields","fullScreenText","changeScreenSize","cmsType","cmsModel","onCancel","onAdd","onApply","onDelete","$uibModal","manipulate","modalCtrl","$uibModalInstance","$on","tabs","tab","_tab","active","inFirstTab","submit","close","dismiss","cancel","edit","mouseEnter","preventDefault","stopPropagation","modalInstance","open","windowClass","mouseover","mouseout","off","elementDirective","$compile","$controller","attr","binding","render","dndMoved","processBinding","binds","parentModel","parentKey","parentFn","prepareElement","Layout","getTreeWithBinding","inline","cmsInline","reRender","$parent","newValue","oldValue","html","_render","ctrl","_fn","serverFnData","getPath","contents","formService","cmsEditor","showControl","_showControl","getControlVisible","cmsRemove","removeByDatabase","finish","menu","cmsMenu","unshift","editorIcon","cmsRefresh","cmsTemplate","store","cmsWrapper","Fn","null","layout","mapValues","fragment","SAVE","elementPath","allowedTypes","cmsContainerTypes","highlight","matchEditMode","draggable","handle","test","main","_node","update","class","Path","paths","pathInForm","openSitemap","templates","baseUrlPath","href","ignoreModelChanges","onFileSelect","files","selectNode","select","original","makeTemplate","templateName","createPage","templatePage","pageName","deletePage","renamePage","newPageName","modes","onSelect","importService","exportService","onlyChangePage","changeAdminList","loading","page","currentPage","queries","q","endsWith","$where","showAs","selectElement","watchs","getConfig","elementClass","listen","builtIn","index","m1","m2","setting","export","import","deleteAll","tmpStr","setItemsPerPage","num","itemsPerPage","autoOpenAdmin","choose","typesChooseCtrl","modal2","keys","css","top","right","bodyPaddingTop","inverse","bottom","toggleContainer"],"mappings":"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gD;;;;;;+NCAA;AACA;AACA;AACA;AACA,mEAAkE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAE;AACF;AACA,GAAE;AACF;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,aAAa;AACzB,aAAY,OAAO;AACnB;AACA;AACA;AACA,gCAA+B;AAC/B;;AAEA;AACA;AACA;AACA;AACA,aAAY,OAAO;AACnB,eAAc;AACd;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gCAA+B,OAAO;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,aAAY,aAAa;AACzB;AACA;AACA;AACA;AACA;AACA,qCAAoC,OAAO;AAC3C;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,cAAc;AAC1B,aAAY,OAAO;AACnB,eAAc;AACd;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa,MAAM;AACnB,cAAa,OAAO;AACpB,eAAc;AACd;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,OAAO;AACpB,eAAc;AACd;AACA;AACA;AACA;AACA,wBAAuB,UAAU;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA4B,iBAAiB;AAC7C;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA,uBAAsB,UAAU;AAChC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA4B,iBAAiB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,6BAA4B,iBAAiB;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAY,cAAc;AAC1B,aAAY,OAAO;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAc,OAAO;AACrB,eAAc,OAAO;AACrB,eAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gCAA+B,OAAO;AACtC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kCAAiC,OAAO;AACxC;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,mCAAmC;AACvD;AACA,IAAG;AACH,kCAAiC,OAAO;AACxC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iCAAgC,OAAO;AACvC;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,gBAAe,kBAAkB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,OAAO;AACnB,eAAc;AACd;AACA;AACA;;AAEA,sBAAqB;;AAErB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB,eAAc;AACd,gBAAe;AACf,iBAAgB;AAChB,gBAAe;AACf;AACA;AACA;AACA,kBAAiB;AACjB,gBAAe;AACf,iBAAgB;AAChB,gBAAe;AACf,gBAAe;AACf;AACA,aAAY,OAAO;AACnB,aAAY,OAAO;AACnB,eAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAwB,yBAAyB;AACjD;AACA,KAAI;AACJ,IAAG;AACH;AACA,wBAAuB,qBAAqB;AAC5C,KAAI;AACJ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oCAAmC,OAAO;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,OAAO;AACpB,cAAa,QAAQ;AACrB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,+CAA8C;AAC9C;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAiC,OAAO;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA,GAAE;;;AAGF;AACA;;AAEA;AACA,EAAC;;;;AAID;AACA;AACA;AACA;AACA,mEAAkE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAE;AACF;AACA,GAAE;AACF;AACA;AACA,EAAC;AACD;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS,yBAAyB,GAAG,yBAAyB;AAC9D;AACA;AACA,SAAQ,MAAM,MAAM,QAAQ,MAAM,QAAQ;AAC1C;AACA,cAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAkB;AAClB,mBAAkB;AAClB;AACA;;AAEA;AACA,oCAAmC,OAAO;AAC1C;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,mFAAkF;AAClF;AACA;;AAEA;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA,mEAAkE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAE;AACF;AACA,GAAE;AACF;AACA;AACA,EAAC;AACD;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ,oBAAmB,4BAA4B;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,mBAAkB,gCAAgC;AAClD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAY,OAAO;AACnB;AACA;AACA;AACA,kBAAiB,kBAAkB;AACnC;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,OAAO;AACnB,eAAc;AACd;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAY,OAAO;AACnB,eAAc;AACd;AACA;AACA;AACA,yBAAwB;AACxB,wBAAuB;AACvB,wBAAuB;AACvB,0BAAyB;AACzB;;AAEA;AACA;AACA;AACA,aAAY,OAAO;AACnB,eAAc;AACd;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,OAAO;AACnB,aAAY,SAAS;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,OAAO;AACnB,aAAY,SAAS;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAY,SAAS;AACrB,eAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAY,SAAS;AACrB,aAAY,IAAI;AAChB,eAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,MAAM;AAClB,aAAY,SAAS;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,OAAO;AACnB,aAAY,OAAO;AACnB,aAAY,SAAS;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,OAAO;AACnB,eAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,OAAO;AACnB,aAAY,MAAM;AAClB;AACA;AACA;AACA;AACA,sCAAqC,OAAO;AAC5C;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,OAAO;AACnB,eAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,OAAO;AACnB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB;;AAExB;AACA;;AAEA,yBAAwB;AACxB,yBAAwB;AACxB,yBAAwB;AACxB;AACA,yBAAwB;AACxB;AACA,IAAG;;AAEH;AACA,2CAA0C,gCAAgC;;AAE1E;AACA;AACA,iDAAgD,OAAO;AACvD;AACA;AACA;AACA;;AAEA;AACA;AACA,mDAAkD,OAAO;AACzD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,GAAE;AACF;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAI;;AAEJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,iFAAgF;AAChF;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,gEAA+D,kDAAkD,EAAE;AACnH,qEAAoE,mDAAmD,EAAE;AACzH,uEAAsE,iDAAiD,EAAE;AACzH;;AAEA;AACA,6BAA4B,gDAAgD,EAAE;AAC9E,6BAA4B,4CAA4C;AACxE,KAAI;;AAEJ;AACA,8BAA6B,qBAAqB,EAAE;AACpD,6BAA4B,8CAA8C,EAAE;AAC5E,6BAA4B,4CAA4C,EAAE;AAC1E,6BAA4B,+CAA+C,EAAE;AAC7E,6BAA4B,uCAAuC,EAAE;AACrE,6BAA4B,2CAA2C,EAAE;AACzE,6BAA4B,yBAAyB,4CAA4C,EAAE;AACnG,6BAA4B,4CAA4C;AACxE,KAAI;;AAEJ;AACA;AACA;AACA;AACA,KAAI;;AAEJ;AACA;AACA;AACA;AACA,KAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;;AAEJ;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,KAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA,yFAAwF;AACxF;AACA;;AAEA,sCAAqC;AACrC,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,eAAc;AACd;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,eAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,cAAa,OAAO;AACpB,gBAAe;AACf;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,mDAAkD;;AAElD;AACA,4CAA2C,OAAO;AAClD;AACA;AACA,MAAK;AACL;AACA,IAAG;;AAEH;AACA;AACA;AACA,cAAa,OAAO;AACpB,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,cAAa,OAAO;AACpB,gBAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,kCAAkC;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,kCAAkC;;AAE7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,cAAa,OAAO;AACpB,gBAAe;AACf;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ,IAAG;;AAEH;AACA;AACA;AACA,cAAa,OAAO;AACpB,gBAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,gBAAe;AACf;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,gBAAe;AACf;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,gBAAe;AACf;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,cAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ,IAAG;;AAEH;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,cAAa,MAAM;AACnB;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAI;AACJ,IAAG;;AAEH;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,UAAU;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,KAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,QAAQ;AACrB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,6CAA4C,yBAAyB;AACrE,MAAK;AACL,6CAA4C,sBAAsB;AAClE;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,6BAA4B,kEAAkE;AAC9F;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,6BAA4B,0CAA0C;AACtE;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ,IAAG;;AAEH;AACA;AACA;AACA,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,OAAO;AACpB,eAAc;AACd;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA;AACA;AACA;AACA;AACA,cAAa,YAAY;AACzB;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB,kBAAiB;AACjB,iBAAgB;AAChB,iBAAgB;AAChB;AACA,cAAa,OAAO;AACpB,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2DAA0D,sBAAsB;AAChF;AACA,KAAI;AACJ,+BAA8B;AAC9B;;AAEA;AACA;AACA,sCAAqC,QAAQ;AAC7C;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,eAAc,OAAO;AACrB;AACA;AACA;AACA;;AAEA,mDAAkD,OAAO;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA,wCAAuC,OAAO;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0DAAyD;AACzD;AACA;AACA,OAAM;AACN,MAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,2CAA0C,OAAO;AACjD;AACA;AACA;;AAEA;AACA;AACA,uCAAsC,OAAO;AAC7C;AACA;AACA;;AAEA;AACA;AACA;AACA,6DAA4D,aAAa;AACzE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,2CAA0C,aAAa;AACvD,KAAI;AACJ;AACA,0CAAyC,cAAc;AACvD;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,aAAa;AAC1B;AACA;AACA;;AAEA;AACA,iCAAgC,OAAO;AACvC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,cAAa,OAAO;AACpB,eAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,cAAa,OAAO;AACpB,eAAc;AACd;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,gBAAe;AACf;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,IAAI;AACjB,eAAc;AACd;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,cAAa,MAAM;AACnB,cAAa,OAAO;AACpB,eAAc;AACd;AACA;AACA;;AAEA;AACA,qCAAoC,OAAO;AAC3C;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,gBAAe;AACf;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,QAAQ;AACrB;AACA;AACA;AACA,qCAAoC,OAAO;AAC3C;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,QAAQ;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAM;AACN;AACA;;AAEA;AACA;AACA,gCAA+B,eAAe;AAC9C;AACA,KAAI;AACJ,IAAG;;AAEH;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,+BAA8B,eAAe;AAC7C;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,QAAQ;AACrB,cAAa,SAAS;AACtB,eAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;;AAEJ;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uCAAsC,OAAO;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAI;AACJ;AACA;AACA,qCAAoC,YAAY;AAChD,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAuB,uCAAuC;AAC9D;AACA,wBAAuB,sBAAsB;AAC7C;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gCAA+B;AAC/B;;AAEA;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAI;AACJ,IAAG;;AAEH;AACA;AACA;AACA;AACA,cAAa,QAAQ;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B,eAAe;AAC5C;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,cAAa,OAAO;AACpB,gBAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,yBAAwB,SAAS;;AAEjC,8CAA6C,OAAO;AACpD;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,IAAI;AACjB,cAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,cAAa,IAAI;AACjB,cAAa,OAAO;AACpB;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,cAAa,IAAI;AACjB;AACA;AACA;;AAEA;AACA;AACA,KAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC,OAAO;AAC5C;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAW,kCAAkC;AAC7C;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,OAAO;AACpB,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,eAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,GAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA,8DAA6D;AAC7D,qDAAoD;AACpD,+CAA8C;AAC9C,oDAAmD;AACnD,2DAA0D;AAC1D,oDAAmD;AACnD,+CAA8C;AAC9C,0DAAyD;AACzD,oDAAmD;AACnD,+CAA8C;AAC9C,uDAAsD;AACtD,iDAAgD;AAChD,+CAA8C;AAC9C,wDAAuD;AACvD,wDAAuD;AACvD,kDAAiD;AACjD,qDAAoD;AACpD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,yCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,OAAO;AACpB;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,mCAAkC,OAAO;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA,qDAAoD,OAAO;AAC3D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qCAAoC,OAAO;AAC3C;AACA;AACA;;AAEA;;AAEA;AACA,qCAAoC,OAAO;AAC3C;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAI;AACJ;AACA;;AAEA,sDAAqD;AACrD,IAAG;AACH;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,oBAAoB;AACxC,OAAM;AACN;AACA,qBAAoB,mBAAmB;AACvC;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,MAAK;AACL;AACA,IAAG;;AAEH,GAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,6EAA4E;AAC5E;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH,GAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA,6CAA4C,YAAY,kBAAkB,WAAW,UAAU,cAAc,wBAAwB,aAAa;AAClJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA,qBAAoB,mBAAmB;AACvC;;AAEA;AACA;AACA;AACA,qBAAoB,aAAa;AACjC;AACA;AACA,gCAA+B,kBAAkB;AACjD;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA,GAAE;;AAEF;AACA;AACA,yBAAwB;AACxB;AACA;AACA;AACA,KAAI;;AAEJ;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,QAAO;;AAEP;AACA,MAAK;AACL;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;;AAEP;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,GAAE;;;AAGF;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;;;AAGF;AACA,EAAC,G;;;;;;;;;ACpvHDtC,SAAQqC,M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,mBAAmB,OAAO;AACzD;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,iBAAgB;AAChB,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,iBAAgB;AAChB,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA,iBAAgB;AAChB,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,iBAAgB;AAChB,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;AACL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,UAAU;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,UAAU;AACzB;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,mBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA,uDAAsD;AACtD,yCAAwC;AACxC,yCAAwC;AACxC;;AAEA;AACA;;AAEA,aAAY;AACZ;;AAEA;AACA;AACA;AACA,gBAAe,UAAU;AACzB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAY;AACZ;;AAEA;AACA;AACA;AACA,gBAAe,UAAU;AACzB;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,eAAc;AACd;AACA;AACA;AACA,uDAAsD;AACtD,yCAAwC;AACxC,yCAAwC;AACxC;AACA;AACA;AACA,aAAY;AACZ;;AAEA;AACA;AACA;AACA,gBAAe,UAAU;AACzB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,8BAA6B,cAAc;AAC3C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oBAAmB,yCAAyC;AAC5D,oBAAmB,yCAAyC;AAC5D;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oBAAmB,wCAAwC;AAC3D,oBAAmB,yCAAyC;AAC5D,oBAAmB,yCAAyC;AAC5D;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oBAAmB,uCAAuC;AAC1D,oBAAmB,wCAAwC;AAC3D;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gEAA+D,WAAW;AAC1E;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,6BAA4B,kBAAkB;AAC9C;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,4DAA2D,wBAAwB;;AAEnF;AACA;AACA,4CAA2C,wBAAwB;AACnE;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,+EAA8E,4BAA4B,gBAAgB;AAC1H,+EAA8E,2BAA2B,gBAAgB;AACzH,sDAAqD,oDAAoD,gBAAgB;AACzH,sDAAqD,oDAAoD,gBAAgB;AACzH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAkB,uBAAuB;AACzC;AACA;AACA;AACA;AACA;AACA;;AAEA,qDAAoD,0BAA0B;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA,MAAK,kBAAkB,YAAY,kBAAkB;AACrD;AACA,oBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,6BAA4B,YAAY;;AAExC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAA+B,EAAE,cAAc,EAAE,cAAc,EAAE;AACjE,gCAA+B,EAAE,cAAc,EAAE,cAAc,EAAE;AACjE,gCAA+B,EAAE,cAAc,EAAE,cAAc,EAAE,cAAc,EAAE;AACjF,gCAA+B,EAAE,cAAc,EAAE,cAAc,EAAE,cAAc,EAAE;AACjF;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yCAAwC,UAAU,OAAO,UAAU,OAAO,SAAS;AACnF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA,iBAAgB;AAChB;AACA;AACA,iBAAgB;AAChB;AACA;AACA,iBAAgB;AAChB;AACA;AACA,iBAAgB;AAChB;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,4CAA2C;AAC3C;AACA,uBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAwB,kBAAkB;AAC1C;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;AAEA;AACA;AACA;;AAEA;AACA,qCAAoC,EAAE;AACtC,mBAAkB;AAClB;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,oCAAmC;AACnC;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,kBAAiB,OAAO;AACxB;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,qBAAoB,SAAS;AAC7B;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACrLA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAsB,QAAQ;AAC9B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;;;AC7BA,8C;;;;;;ACAA,+C;;;;;;ACAA,gD;;;;;;ACAA;AACA;AACA;AACA,iEAAgE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa,cAAc;AAC3B,cAAa,OAAO;AACpB,eAAc;AACd;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,iBAAiB;AAC9B,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,8BAA8B;AAC3C,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,8BAA8B;AAC/C;AACA;AACA;AACA;AACA;AACA,QAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,cAAc;AAC/B,kBAAiB,OAAO;AACxB,kBAAiB,8BAA8B;AAC/C,kBAAiB,OAAO;AACxB,oBAAmB,cAAc;AACjC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,yBAAwB;AACxB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,QAAO;AACP,2BAA0B;;AAE1B;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C;AAC9C;;AAEA;;AAEA;;AAEA,6BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAe,wCAAwC;AACvD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,MAAM;AACnB,cAAa,OAAO;AACpB;AACA,gBAAe,IAAI;AACnB;AACA;AACA,wCAAuC,SAAS;AAChD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,WAAU,OAAO;AACjB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,OAAO;AACpB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,cAAc;AAC3B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;AACL;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,QAAQ;AACrB;AACA;AACA,kEAAiE,WAAW;AAC5E;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAA+C,gHAAgH;AAC/J;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,cAAc;AAC3B,cAAa,OAAO;AACpB;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB,gGAAgG;AAClH;AACA,cAAa,UAAU;AACvB;AACA;;AAEA;;AAEA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM,sGAAsG;AAC5G;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM,iEAAiE;AACvE;AACA;AACA,6DAA4D,aAAa;AACzE;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,cAAa,aAAa;AAC1B;AACA;AACA;AACA,cAAa,QAAQ;AACrB,cAAa,OAAO;AACpB,cAAa,OAAO;AACpB;AACA,cAAa,OAAO;AACpB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mCAAkC;AAClC,4BAA2B;AAC3B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B,+BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA4E;AAC5E;AACA;AACA;AACA,uDAAsD,OAAO;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,OAAO;AACxB,oBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,OAAO;AACxB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,sDAAqD,cAAc;;AAEnE;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,kDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,OAAO;AACxB,mBAAkB,QAAQ;AAC1B;AACA;AACA;AACA;AACA;;AAEA;;AAEA,qDAAoD,cAAc;AAClE;;AAEA;AACA;AACA;AACA;AACA;;AAEA,8CAA6C;AAC7C;AACA,mCAAkC;AAClC;AACA,YAAW;AACX,UAAS;;AAET;AACA;AACA,yDAAwD,cAAc;;AAEtE;AACA;AACA;AACA,cAAa;AACb,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX,qDAAoD,cAAc;AAClE;AACA;;AAEA;AACA,uDAAsD,cAAc;AACpE;AACA,qDAAoD,cAAc;AAClE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB;AACnB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;;AAEA;;AAEA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,OAAO;AAC1B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,UAAU;AAC7B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,OAAO;AAC1B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,UAAU;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA,kBAAiB;AACjB,YAAW;AACX;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA,YAAW;AACX;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,OAAO;AACxB;AACA,mBAAkB,OAAO;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB,OAAO;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB,OAAO;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,QAAQ;AACzB;AACA,mBAAkB,cAAc;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,8DAA6D,SAAS;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB,OAAO;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB,OAAO;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,OAAO;AACxB,mBAAkB,iBAAiB;AACnC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA,kBAAiB,OAAO;AACxB,mBAAkB,cAAc;AAChC;AACA;AACA;AACA;AACA;;AAEA;;AAEA,oDAAmD,cAAc;;AAEjE;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX,wDAAuD,cAAc;AACrE;AACA,sDAAqD,cAAc;AACnE;AACA,YAAW;AACX;AACA;AACA,YAAW;AACX,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,YAAW;AACX,UAAS;AACT;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,OAAO;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB,OAAO;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB,KAAK;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB,QAAQ;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB,QAAQ;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,OAAO;AACxB;AACA,mBAAkB,QAAQ;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,qDAAoD,kBAAkB;AACtE;;AAEA;AACA;AACA,qDAAoD,kBAAkB;AACtE;;AAEA,qDAAoD,kBAAkB;;AAEtE;AACA;AACA;;AAEA;AACA;AACA,4DAA2D,SAAS;AACpE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,aAAa;AAC9B;AACA;AACA;AACA,kBAAiB,OAAO;AACxB,kBAAiB,OAAO;AACxB,kBAAiB,OAAO;AACxB;AACA,mBAAkB,cAAc;AAChC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oDAAmD,OAAO;AAC1D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAoD,OAAO;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB,OAAO;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB,sBAAsB;AACxC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,kEAAkE;AACrF;AACA,mBAAkB,QAAQ;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,kEAAkE;AACrF;AACA,kBAAiB,UAAU;AAC3B,mBAAkB,OAAO;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iCAAgC;AAChC;AACA,QAAO;AACP;AACA;AACA,kCAAiC;AACjC;AACA,QAAO;;AAEP;;AAEA;AACA;AACA,iDAAgD;AAChD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sDAAqD,4BAA4B;AACjF;AACA;AACA,0DAAyD,SAAS;AAClE;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,8CAA6C,6BAA6B;AAC1E;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA,aAAY,OAAO;AACnB;AACA;;AAEA;;AAEA;;AAEA,kCAAiC;AACjC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,QAAQ;AACnB,YAAW,QAAQ;AACnB,YAAW,QAAQ;AACnB,YAAW,QAAQ;AACnB,YAAW,SAAS,4EAA4E;AAChG,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2BAA0B,eAAe;AACzC,0BAAyB,eAAe;AACxC,yDAAwD,SAAS;AACjE,2CAA0C,SAAS;AACnD,0DAAyD,QAAQ;AACjE,4CAA2C,QAAQ;AACnD,+EAA8E,QAAQ;AACtF;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,6DAA4D,OAAO;AACnE,2EAA0E,cAAc;AACxF,UAAS;;AAET,QAAO;;AAEP;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,+CAA8C,eAAe;AAC7D;AACA;;AAEA;AACA;AACA;;AAEA,8CAA6C,eAAe;AAC5D;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA,cAAa;AACb;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW;AACX;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA,YAAW;AACX;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe;AACf;AACA,gBAAe;AACf,YAAW;AACX;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,QAAQ;AACnB,YAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA,iCAAgC,mDAAmD,qBAAqB,SAAS;;AAEjH;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,6DAA4D,OAAO;AACnE,UAAS;;AAET,QAAO;;AAEP;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA,uDAAsD,mDAAmD,qBAAqB,WAAW;AACzI;AACA;AACA;AACA,UAAS;AACT,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,cAAa;AACb,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;AACA;AACA;AACA,8BAA6B,0BAA0B,EAAE;AACzD;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B,4BAA4B,EAAE;AAC3D;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI,2FAA2F;AAC/F;AACA,YAAW,QAAQ;AACnB;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA,UAAS;;AAET,QAAO;;AAEP;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA,YAAW;AACX;;AAEA,QAAO;;AAEP;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;;AAET;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,GAAG;AACd;AAC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","file":"build/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 41840dfbf200732f4f4b\n **/","import angular from 'angular';\nwindow.angular = angular;\nimport 'angular-i18n/de-de';\nimport 'jquery';\nimport printthis from 'printthis';\nwindow.printthis = printthis;\n$.fn.printthis = printthis;\nimport 'lodash';\nimport unionWith from 'lodash/unionWith';\n_.unionWith = unionWith;\n\nimport pickBy from 'lodash/pickBy';\n_.pickBy = pickBy;\n\nimport _moment from 'moment';\nwindow.moment = _moment;\n\nimport _JsonFn from 'json-fn';\nwindow.JsonFn = _JsonFn;\n_JsonFn.stringify = function (obj) {\n    return JSON.stringify(obj, function (key, value) {\n        var fnBody;\n        if (value instanceof Function || typeof value == 'function') {\n\n\n            fnBody = value.toString();\n\n            if (fnBody.length < 8 || fnBody.substring(0, 8) !== 'function') { //this is ES6 Arrow Function\n                return '_NuFrRa_' + fnBody;\n            }\n            return fnBody;\n        }\n        if (value instanceof RegExp) {\n            return '_PxEgEr_' + value;\n        }\n\n        if (typeof key === 'string' && key.charAt(0) === '$' && key.charAt(1) === '$') {\n            value = undefined;\n        }\n        if (value && value.hasOwnProperty('isObjectId')) {\n            value = value._id;\n        }\n\n        return value;\n    });\n};\n\n_JsonFn.parse = function (str, date2obj) {\n\n    var iso8061 = date2obj ? /^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2}(?:\\.\\d*)?)Z$/ : false;\n\n    return JSON.parse(str, function (key, value) {\n        var prefix;\n\n        if (typeof value != 'string') {\n            return value;\n        }\n        if (value.length < 8) {\n            return value;\n        }\n\n        prefix = value.substring(0, 8);\n\n        if (iso8061 && value.match(iso8061)) {\n            return new Date(value);\n        }\n        if (prefix === 'function') {\n            try {\n                return eval('(' + value + ')');\n            } catch (e) {\n            }\n        }\n        if (prefix === '_PxEgEr_') {\n            return eval(value.slice(8));\n        }\n        if (prefix === '_NuFrRa_') {\n            try {\n                return eval(value.slice(8));\n            } catch (e) {\n            }\n        }\n\n        return value;\n    });\n};\n\nwindow._transform = {transformResponse: d => {\n    return JsonFn.parse(d);\n}};\n\nimport 'bootstrap/dist/js/bootstrap';\n\nimport components from './components/components.module';\nimport common from './common/common.module';\n\nangular.module('app', [\n        common,\n        components\n    ])\n    .controller('appCtrl', function () {\n    });\n\nangular.element(document).ready(function() {\n    angular.bootstrap(document, ['app']);\n});\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./app.module.js\n **/","module.exports = (__webpack_require__(2))(1);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/jquery/dist/jquery.js from dll-reference lib_lib\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = lib_lib;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"lib_lib\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(2);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/angular/index.js from dll-reference lib_lib\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(44);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/angular-i18n/de-de.js from dll-reference lib_lib\n ** module id = 4\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(329);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/printthis/printThis.js from dll-reference lib_lib\n ** module id = 5\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(61);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/lodash/lodash.js from dll-reference lib_lib\n ** module id = 6\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(77);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/lodash/unionWith.js from dll-reference lib_lib\n ** module id = 7\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(152);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/lodash/pickBy.js from dll-reference lib_lib\n ** module id = 8\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(328);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/moment/moment.js from dll-reference lib_lib\n ** module id = 9\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(327);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/json-fn/jsonfn.js from dll-reference lib_lib\n ** module id = 10\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(226);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/bootstrap/dist/js/bootstrap.js from dll-reference lib_lib\n ** module id = 11\n ** module chunks = 0\n **/","import cmsEditable from './cms-editable/module';\nimport cmsTypes from './cms-types/module';\nimport cmsMain from './cms-main/module';\nimport cmsSitemap from './cms-sitemap/module';\nimport cmsEditState from './cms-edit-state/module';\nimport cmsAdmin from './cms-admin/module';\nimport cmsNav from './cms-nav/module';\n\nconst components = angular.module('components', [\n    cmsTypes,\n    cmsMain,\n    cmsSitemap,\n    cmsEditState,\n    cmsAdmin,\n    cmsNav\n]);\n\nexport default components.name;\n\n\n\n/** WEBPACK FOOTER **\n ** ./components/components.module.js\n **/","import 'angular-ui-bootstrap';\nimport formlyTemplate from './editable-formly.html';\nimport formly from '../formly/module';\nimport template from './tpl.html';\nimport common from '../../common/common.module';\n\nconst module = angular\n    .module('components.cmsEditable', [formly, 'ui.bootstrap', common])\n    .directive('cmsEditable', directive)\n    .directive('cmsEditableTransclude', cmsEditableTransclude)\n    .directive('cmsDirectEditable', cmsDirectEditableDirective)\n    .run(run);\n\nrun.$inject = ['$templateCache'];\nfunction run($templateCache) {\n    $templateCache.put('editable-formly.html', formlyTemplate);\n}\n\ndirective.$inject = ['cms'];\n\nfunction directive(cms) {\n\n    function link(scope, element, attrs, elementController) {\n        // resolve type and ref\n        const {type, ref} = elementController.getElement();\n\n        const {vm} = scope;\n\n        vm.showJson = () => false;\n\n        prepareForm(cms, type, ref, scope);\n\n        scope.$watch('model', v => {\n            vm.value = _.get(scope, vm.property)\n            vm.isValueUndefined = _.isEmpty(vm.value) && isNaN(vm.value);\n        }, true);\n\n    }\n\n    return {\n        require: '^^?cmsElement',\n        restrict: 'A',\n        scope: {},\n        bindToController: {\n            property: '@cmsEditable'\n        },\n        template,\n        controllerAs: 'vm',\n        controller: function () {\n        },\n        link: link\n    };\n}\n\n// inheritance\n\ncmsDirectEditableDirective.$inject = ['cms', '$filter'];\n\nfunction cmsDirectEditableDirective(cms, $filter) {\n\n    function link(scope, element, attrs, elementController) {\n        const {vm} = scope;\n\n        // resolve type and ref\n        const {type, ref} = vm;\n\n        var property = vm.property.replace('model.', '');\n\n        const refKey = Types[type].checkAndGetRef(property);\n\n        vm.showJson = () => vm._value instanceof Object && !refKey && !(vm._value instanceof Date);\n\n        scope.$watch('vm._value', v => {\n            if (v instanceof Date) {\n                vm.value = $filter('date')(v, 'dd-MM-yyyy HH:mm');\n            } else {\n                vm.value = v && refKey ? v[refKey] : v\n            }\n\n            vm.isValueUndefined = typeof vm.value === 'undefined';\n\n        });\n\n        if (!ref) return;\n\n        prepareForm(cms, type, ref, scope);\n    }\n\n    return {\n        restrict: 'A',\n        scope: {},\n        bindToController: {\n            _value: '=cmsValue',\n            property: '@cmsDirectEditable',\n            type: '@cmsType',\n            ref: '@cmsRef'\n        },\n        template,\n        controllerAs: 'vm',\n        controller: function () {\n        },\n        link: link\n    };\n}\n\ncmsEditableTransclude.$inject = ['cms', '$timeout'];\n\nfunction cmsEditableTransclude(cms, $timeout) {\n\n    function link(scope, element, attrs, elementController) {\n        const {vm} = scope;\n\n        // resolve type and ref\n        const {type, ref} = vm.element ? vm.element : elementController.getElement();\n\n        vm.showJson = () => false;\n\n        prepareForm(cms, type, ref, scope);\n\n        scope.$watch('model', v => {\n            vm.value = _.get(scope, vm.property);\n            vm.isValueUndefined = _.isEmpty(vm.value) && isNaN(vm.value);\n        }, true);\n\n        vm.hide = function () {\n            $timeout(() => vm.show = false, 1000);\n        }\n    }\n\n    return {\n        require: '^^?cmsElement',\n        restrict: 'A',\n        scope: {},\n        bindToController: {\n            property: '@cmsEditableTransclude',\n            withEditBtn: '@withEditBtn',\n            element: '=element'\n        },\n        transclude: true,\n        template: `\n<span class=\"cms\">\n    <span   ng-if=\"vm.withEditBtn !== 'true'\"\n            popover-placement=\"bottom\"\n            popover-is-open=\"vm.isOpen\"\n            uib-popover-template=\"'editable-formly.html'\"\n            popover-append-to-body=\"true\"\n            style=\"cursor: pointer\">\n        <ng-transclude></ng-transclude>\n        <span ng-show=\"vm.isValueUndefined && !vm.element\" class=\"cms-empty-value\">\n            empty\n        </span> \n    </span>\n    <span ng-if=\"vm.withEditBtn === 'true'\" style=\"position: relative\">\n        <button ng-style=\"{opacity:vm.show? 1: 0.1}\"\n                class=\"btn btn-white btn-xs\"\n                popover-placement=\"bottom\"\n                popover-is-open=\"vm.isOpen\"\n                uib-popover-template=\"'editable-formly.html'\"\n                popover-append-to-body=\"true\"\n                style=\"position: absolute;z-index: 1000;top:-24px\"\n                ng-mouseover=\"vm.show = true\" \n                ng-mouseout=\"vm.hide();\">\n                   Edit\n        </button>\n        <ng-transclude \n            ng-mouseover=\"vm.show = true\" \n            ng-mouseout=\"vm.hide();\"\n            ></ng-transclude>\n        <span ng-show=\"vm.isValueUndefined && !vm.element\" class=\"cms-empty-value\">\n            empty\n        </span> \n    </span>   \n</span>\n`,\n        controllerAs: 'vm',\n        controller: function () {\n        },\n        link: link\n    };\n}\n\nfunction prepareForm(cms, type, ref, scope) {\n    const {vm} = scope;\n\n    cms.getType(type, ref, (model) => {\n        const {form} = Types[type];\n        scope.model = model;\n\n        vm.fields = [cms.findField(form, vm.property.split(\"\\.\")[1])];\n\n        vm.fields[0].templateOptions.focus = 'true';\n\n        vm.onSubmit = function () {\n            cms.updateElement(type, scope.model);\n            vm.isOpen = false;\n        }\n\n        vm.options = {formState: {path: ''}}\n    })\n}\n\nexport default module.name;\n\n\n/** WEBPACK FOOTER **\n ** ./components/cms-editable/module.js\n **/","module.exports = (__webpack_require__(2))(19);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/angular-ui-bootstrap/index.js from dll-reference lib_lib\n ** module id = 14\n ** module chunks = 0\n **/","module.exports = \"<div class=\\\"cms\\\">\\n    <form ng-submit=\\\"vm.onSubmit()\\\" novalidate class=\\\"form-horizontal cms-field-form\\\">\\n        <div style=\\\"overflow: auto;max-height: 500px;padding-right: 20px;\\\">\\n            <formly-form model=\\\"model\\\" fields=\\\"vm.fields\\\" form=\\\"vm.form\\\" options=\\\"vm.options\\\">\\n            </formly-form>\\n        </div>\\n        <button type=\\\"submit\\\" class=\\\"btn btn-primary submit-button\\\" ng-disabled=\\\"vm.form.$invalid\\\">Submit</button>\\n        <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-click=\\\"vm.isOpen = false\\\">Cancel</button>\\n    </form>\\n    <br ng-if=\\\"adminList === 'true'\\\">\\n</div>\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./components/cms-editable/editable-formly.html\n ** module id = 15\n ** module chunks = 0\n **/","import 'angular-filter';\nimport config from './config';\n\nimport _apiCheck from 'api-check';\nwindow.apiCheck = _apiCheck;\napiCheck.globalConfig.disabled = true;\nimport 'angular-ui-switch';\nimport 'angular-ui-switch/angular-ui-switch.css';\n\nimport 'angular-formly';\nimport 'angular-formly-templates-bootstrap';\n\nimport 'jstree';\nimport 'jstree-bootstrap-theme/dist/themes/proton/style.min.css'\nimport 'ng-js-tree';\nimport 'ui-select';\nimport 'ui-select/dist/select.min.css';\n\nimport 'selectize/dist/css/selectize.css';\nimport _Selectize from 'selectize/dist/js/standalone/selectize.js';\nwindow.Selectize = _Selectize;\nimport './selectize';\n\nimport _tinycolor from 'tinycolor2';\nwindow.tinycolor = _tinycolor;\nimport 'angularjs-color-picker';\nimport 'angularjs-color-picker/angularjs-color-picker.css';\nimport 'angular-sanitize';\nimport _CodeMirror from 'codemirror/lib/codemirror';\nwindow.CodeMirror = _CodeMirror;\nimport 'codemirror/addon/edit/matchbrackets';\nimport 'codemirror/addon/edit/closebrackets';\nimport 'codemirror/addon/hint/show-hint.css';\nimport 'codemirror/addon/hint/show-hint';\nimport 'codemirror/mode/javascript/javascript';\n\nimport 'codemirror/addon/display/fullscreen.css';\nimport 'codemirror/addon/display/fullscreen.js';\nimport 'codemirror/addon/lint/lint.css';\nimport 'codemirror/addon/lint/lint.js';\nimport 'codemirror/addon/lint/javascript-lint';\nimport 'codemirror/addon/dialog/dialog.css';\nimport 'codemirror/addon/dialog/dialog.js';\nimport 'acorn/dist/acorn';\nimport 'acorn/dist/acorn_loose';\nimport 'acorn/dist/walk';\nimport _tern from 'tern/lib/tern'\nwindow.tern = _tern;\nimport 'tern/doc/demo/polyfill';\nimport 'tern/lib/signal'\nimport 'tern/lib/def'\nimport 'tern/lib/comment'\nimport 'tern/lib/infer'\nimport 'tern/plugin/doc_comment'\nimport 'codemirror/addon/tern/tern.css';\nimport 'codemirror/addon/tern/tern.js';\nimport 'angular-ui-codemirror';\n\nconst module = angular\n    .module('components.formly', ['formly', 'formlyBootstrap',\n        'ngJsTree', 'ui.select', 'ngSanitize', 'angular.filter',\n        'ui.codemirror', 'color.picker', 'dndLists', 'uiSwitch', 'selectize'])\n    .config(config)\n    .constant('size', {label: 'col-sm-2', input: 'col-sm-10'});\n\nexport default module.name;\n\n\n\n/** WEBPACK FOOTER **\n ** ./components/formly/module.js\n **/","module.exports = (__webpack_require__(2))(49);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/angular-filter/index.js from dll-reference lib_lib\n ** module id = 17\n ** module chunks = 0\n **/","import panel from './panel.html';\nimport repeatSection from './repeatSection.html';\nimport repeatSectionController from './repeat-section.controller';\nimport treeTemplate from './tree.template.html';\nimport treeController from './tree.controller';\nimport refSelect from './ref.select.html';\nimport refController from './ref.controller';\nimport codeTemplate from './code.html';\nimport code from './code.controller';\nimport arrayController from './array.controller';\nimport arrayTemplate from './array.template.html';\nimport tableController from './table.controller';\nimport tableTemplate from './table.template.html';\nimport selectTypeController from './select-type.controller';\nimport selectElementController from './select-element.controller';\nimport selectPropertyController from './select-property.controller';\nimport selectChildPropertyController from './select-child-property.controller';\nimport selectFnController from './select-fn.controller';\nimport selectTemplate from './select.html';\nimport selectWholeTemplate from './select-whole.html';\nimport multiSelectTemplate from './multi-select.html';\nimport bsGridSelectController from './bs-grid-select.controller';\nimport bsGridSelectTemplate from './bs-grid-select.html';\nimport checkboxTemplate from 'angular-formly-templates-bootstrap/src/types/checkbox.html';\nimport saveContainersController from './saveContainersController';\nimport recursiveTemplate from './recursive.html';\nimport recursiveController from './recursive.controller';\n\nconfig.$inject = ['formlyConfigProvider', 'size', '$rootScopeProvider'];\n\nfunction config(formlyConfigProvider, size, $rootScopeProvider) {\n    $rootScopeProvider.digestTtl(20);\n\n    const config = formlyConfigProvider;\n\n    config.disableWarnings = true;\n\n    config.removeWrapperByName('bootstrapLabel');\n\n    config.setWrapper({\n        name: 'bootstrapLabel',\n        template: `\n        <div>\n          <label for=\"{{id}}\" class=\"control-label {{!to.class ? '${size.label}' : ''}}\"\n                 uib-tooltip-html='to.tooltip'>\n            {{to.label}} {{to.required ? '*' : ''}}\n          </label>\n          <div class=\"{{!to.class ? '${size.input}' : ''}}\"><formly-transclude></formly-transclude></div>\n        </div>\n        `\n    });\n\n    config.removeWrapperByName('bootstrapHasError');\n    config.setWrapper({\n        name: 'bootstrapHasError',\n        template: `\n        <div ng-if=\"!to.class\" class=\"clearfix\"></div>\n        <div ng-if=\"!to.class\" ng-class=\"['form-group','']\" ng-class=\"{'has-error': showError}\" >\n          <formly-transclude></formly-transclude>\n        </div>\n        \n        <div ng-if=\"to.class\" ng-class=\"[to.class]\" ng-class=\"{'has-error': showError}\" style=\"margin-bottom: 15px;\">\n          <formly-transclude></formly-transclude>\n        </div>\n        `\n    });\n\n    // Replace formlyBootstrap input field type to implement read-only forms\n    config.setType({\n        name: 'input',\n        template: `\n        <div>\n          <input ng-if=\"!formState.readOnly\" class=\"form-control\" ng-model=\"model[options.key]\" >\n          <p ng-if=\"formState.readOnly\" class=\"form-control-static\">{{model[options.key]}}</p>\n        </div>\n        `,\n        wrapper: ['bootstrapLabel', 'bootstrapHasError'],\n        overwriteOk: true\n    });\n\n    config.setWrapper({\n        name: 'checkboxWrapper',\n        template: `\n        <div ng-if=\"!to.class\" class=\"form-group\"><div class=\"col-sm-offset-2 col-sm-10\"><formly-transclude></formly-transclude></div></div>\n        <div ng-if=\"to.class\" class=\"form-group\"><div ng-class=\"[to.class]\"><formly-transclude></formly-transclude></div></div>\n        `\n    });\n\n    config.setType({\n        name: 'checkbox',\n        template: `\n        <div class=\"checkbox\">\n            <label style=\"padding-left: 0px;\">\n                <switch ng-model=\"model[options.key]\" class=\"green \"></switch>\n            </label>\n            <span style=\"position: absolute\">\n                {{to.label}}\n                {{to.required ? '*' : ''}}\n            </span>\n        </div>\n`,\n        wrapper: ['checkboxWrapper'],\n        overwriteOk: true\n    });\n\n    config.setWrapper({\n        name: 'panel',\n        template: panel\n    });\n\n    config.setType({\n        name: 'repeatSection',\n        template: repeatSection,\n        controller: repeatSectionController\n    });\n\n    config.setType({\n        name: 'tree',\n        template: treeTemplate,\n        controller: treeController,\n        wrapper: ['bootstrapLabel', 'bootstrapHasError']\n    });\n\n    config.setType({\n        name: 'refSelect',\n        template: refSelect,\n        controller: refController,\n        wrapper: ['bootstrapLabel', 'bootstrapHasError']\n    });\n\n    config.setType({\n        name: 'code',\n        template: codeTemplate,\n        controller: code\n    });\n\n    config.setType({\n        name: 'image',\n        template: `\n            <div class=\"row\" style=\"padding-top:7px;\">\n                <div class=\"col-sm-7\" style=\"padding-left: 0px;padding-right: 0px;\">\n                    <div class=\"col-sm-6\">\n                        <input type=\"text\" class=\"form-control input-xs\" ng-model=\"model[options.key]\" placeholder=\"URL\">\n                    </div>\n                    <div class=\"col-sm-6\">\n                        <div class = \"input-group\">\n                            <input ng-model=\"filename\" class=\"form-control input-xs\"\n                                   placeholder=\"filename\">\n                            <span class = \"input-group-btn\">\n                            <button class=\"btn btn-white btn-sm\" type=\"button\" ng-click=\"download(filename)\"  style=\"margin: 0px;\">\n                                Save\n                            </button>\n                        </span>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"col-sm-5\">\n                    <div class = \"input-group\">\n                        <input type=\"file\" ngf-select ng-model=\"file\"\n                               name=\"file\" class=\"form-control input-xs\"\n                               placeholder=\"file upload\">\n                        <span class = \"input-group-btn\">\n                            <button class=\"btn btn-white btn-sm\" type=\"button\" ng-click=\"onFileUpload(file)\"  style=\"margin: 0px;\">\n                                Up\n                            </button>\n                        </span>\n                    </div>\n                    \n                    \n                </div>\n            </div>\n            \n            <img ng-if=\"model[options.key]\" ng-src=\"{{model[options.key]}}\" width=\"40px\" height=\"40px\">\n        `,\n        controller: function ($scope, cms, $http) {\n            $scope.genName = true;\n            $scope.onFileUpload = function (file) {\n                //files: an array of files selected, each file has name, size, and type.\n                cms.uploadFile(file, '.image', () => {\n                    $scope.model[$scope.options.key] = `.image/${file.name}`;\n                    if ($scope.w) $scope.model[$scope.options.key] = `${$scope.model[$scope.options.key]}?w=${$scope.w}`;\n                    $scope.file = null;\n                    console.log('upload successful');\n                })\n            }\n\n            $scope.download = function (filename) {\n                $http.post('api/saveimage', {url: $scope.model[$scope.options.key], filename}).then(function () {\n                    $scope.model[$scope.options.key] = `.image/${filename}`;\n                    if ($scope.w) $scope.model[$scope.options.key] = `${$scope.model[$scope.options.key]}?w=${$scope.w}`;\n                })\n            }\n\n        },\n        wrapper: ['bootstrapLabel', 'bootstrapHasError']\n    });\n\n    /*\n     <button class=\"btn btn-white\"\n     type=\"button\"\n     style=\"z-index: 10;position: fixed;margin-right: 33px;right: 0px;\"\n     >\n     hex8</button>\n     */\n    config.setType({\n        name: 'color',\n        template: `\n        <color-picker\n            ng-init=\"\"\n            ng-model=\"model[options.key]\"\n            color-picker-format=\"'hex'\"\n            color-picker-alpha=\"true\"\n            color-picker-case=\"'lower'\"\n        ></color-picker>\n        `,\n        wrapper: ['bootstrapLabel', 'bootstrapHasError']\n    });\n\n    config.setType({\n        name: 'array',\n        template: arrayTemplate,\n        controller: arrayController\n    });\n\n    config.setType({\n        name: 'tableSection',\n        template: tableTemplate,\n        controller: tableController,\n        wrapper: ['bootstrapLabel', 'bootstrapHasError']\n    });\n\n    config.setType({\n        name: 'select',\n        template: selectTemplate,\n        controller: function ($scope) {\n        },\n        overwriteOk: true,\n        wrapper: ['bootstrapLabel', 'bootstrapHasError']\n    });\n\n    config.setType({\n        name: 'select-ref-static',\n        template: selectTemplate,\n        controller: function ($scope, cms) {\n            const type = $scope.options.templateOptions.Type;\n            $scope.to.options = [];\n            cms.loadElements(type, () => {\n                $scope.to.options.push(..._.map(Types[type].list, e => {\n                    const value = cms.getTitle(type, e._id);\n                    return ({\n                        value: value,\n                        name: $scope.to.labelProp ? e[$scope.to.labelProp] : value\n                    });\n                }));\n\n            })\n        },\n        overwriteOk: true,\n        wrapper: ['bootstrapLabel', 'bootstrapHasError']\n    });\n\n    config.setType({\n        name: 'select-whole',\n        template: selectWholeTemplate,\n        controller: () => {\n        },\n        overwriteOk: true,\n        wrapper: ['bootstrapLabel', 'bootstrapHasError']\n    });\n\n    config.setType({\n        name: 'recursive',\n        template: recursiveTemplate,\n        controller: recursiveController,\n        overwriteOk: true,\n        wrapper: ['bootstrapLabel', 'bootstrapHasError']\n    });\n\n    config.setType({\n        name: 'select-type',\n        template: selectTemplate,\n        controller: selectTypeController,\n        overwriteOk: true,\n        wrapper: ['bootstrapLabel', 'bootstrapHasError']\n    });\n\n    config.setType({\n        name: 'select-element',\n        template: selectWholeTemplate,\n        controller: selectElementController,\n        overwriteOk: true,\n        wrapper: ['bootstrapLabel', 'bootstrapHasError']\n    });\n\n    config.setType({\n        name: 'select-property',\n        template: selectTemplate,\n        controller: selectPropertyController,\n        overwriteOk: true,\n        wrapper: ['bootstrapLabel', 'bootstrapHasError']\n    });\n\n    config.setType({\n        name: 'select-child-property',\n        template: selectTemplate,\n        controller: selectChildPropertyController,\n        overwriteOk: true,\n        wrapper: ['bootstrapLabel', 'bootstrapHasError']\n    });\n\n    config.setType({\n        name: 'select-fn',\n        template: selectTemplate,\n        controller: selectFnController,\n        overwriteOk: true,\n        wrapper: ['bootstrapLabel', 'bootstrapHasError']\n    });\n\n    config.setType({\n        name: 'multi-select',\n        template: multiSelectTemplate,\n        controller: function () {\n        },\n        overwriteOk: true,\n        wrapper: ['bootstrapLabel', 'bootstrapHasError']\n    });\n\n    config.setType({\n        name: 'bs-grid-select',\n        template: bsGridSelectTemplate,\n        controller: bsGridSelectController,\n        overwriteOk: true,\n        wrapper: ['bootstrapLabel', 'bootstrapHasError']\n    });\n\n    config.setType({\n        name: 'save-containers',\n        template: `\n            <button class=\"btn btn-sm\"\n                    type=\"button\"\n                    ng-click=\"save()\"\n                    ng-class=\"{'btn-success' : model[options.key],'btn-white' : !model[options.key]}\"\n                    >save</button>\n            <button class=\"btn btn-sm btn-danger\"\n                    type=\"button\"\n                    ng-click=\"restore()\"\n                    ng-show=\"model[options.key]\"\n                    >restore</button>\n        `,\n        controller: saveContainersController,\n        overwriteOk: true,\n        wrapper: ['bootstrapLabel', 'bootstrapHasError']\n    });\n}\n\nexport default config;\n\n\n\n/** WEBPACK FOOTER **\n ** ./components/formly/config.js\n **/","module.exports = \"<div class=\\\"clearfix\\\"></div>\\n<div ng-if=\\\"!to.noPanel\\\"\\n     ng-show=\\\"!(model[options.key].null && to.null)\\\"\\n     class=\\\"cms-panel\\\" ng-init=\\\"state = {_show :true}\\\"\\n     style=\\\"position: relative;\\\">\\n\\n    <button type=\\\"button\\\" class=\\\"btn btn-xs btn-white\\\" ng-if=\\\"to.null\\\"\\n            style=\\\"position: relative;right: 0px;margin-top: 15px;z-index: 1;\\\"\\n            ng-click=\\\"model[options.key].null = true;\\\">\\n        <i class=\\\"fa fa-trash-o\\\"></i>\\n    </button>\\n\\n    <fieldset style=\\\"padding: 0 10px 10px 10px;position: relative;top:0px;\\n    border: 1px solid #eee;border-radius:4px;background-color: rgba(128, 128, 128, 0.03)\\\">\\n        <legend style=\\\"color: #337ab7;font-weight: 200;border: 0;margin-left: 10px;width: initial;padding: 0 5px;\\\"\\n                ng-if=\\\"to.label\\\"\\n                ng-style=\\\"{color:to.choice?'#8338b7':'#337ab7'}\\\">\\n            <span ng-show=\\\"to.choice\\\"\\n                  uib-dropdown on-toggle=\\\"toggled(open)\\\">\\n                  <span uib-dropdown-toggle\\n                        uib-tooltip='{{to.tooltip}}'\\n                        style=\\\"cursor: pointer\\\">\\n                      {{options.templateOptions.label}}</span>\\n                  <ul uib-dropdown-menu aria-labelledby=\\\"simple-dropdown\\\">\\n                      <li ng-repeat=\\\"v in options.fieldGroup track by $index\\\"\\n                          ng-show=\\\"v.key !== 'choice'\\\">\\n                          <a ng-click=\\\"options.key && options.key !== ''? (model[options.key].choice = v.key): (model.choice = v.key);\\\">\\n                              {{v.key}}</a>\\n                      </li>\\n                  </ul>\\n\\n            </span>\\n            <span ng-if=\\\"!to.choice\\\"\\n                  uib-tooltip='{{to.tooltip}}'>\\n                {{options.templateOptions.label}}\\n            </span>\\n            <button type=\\\"button\\\" ng-click=\\\"state._show = !state._show\\\"\\n                    class=\\\"btn btn-white btn-xs\\\"\\n                    style=\\\"border: none;background-color: transparent;\\\"\\n                    ng-bind=\\\"state._show? '-': '+'\\\">\\n            </button>\\n        </legend>\\n        <div ng-show=\\\"state._show\\\">\\n            <formly-transclude></formly-transclude>\\n        </div>\\n    </fieldset>\\n    <br>\\n</div>\\n<div ng-if=\\\"to.noPanel\\\">\\n    <formly-transclude></formly-transclude>\\n</div>\\n<div ng-show=\\\"(model[options.key].null && to.null)\\\">\\n    <div class=\\\"form-group\\\">\\n        <div class=\\\"col-sm-offset-2 col-sm-10\\\">\\n            <button type=\\\"button\\\" class=\\\"btn btn-white btn-xs\\\"\\n                    ng-click=\\\"model[options.key].null = false;\\\" style=\\\"z-index: 1;\\\"> add {{to.label}}\\n            </button>\\n        </div>\\n    </div>\\n</div>\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./components/formly/panel.html\n ** module id = 19\n ** module chunks = 0\n **/","module.exports = \"<div class=\\\"clearfix\\\"></div>\\n<div>\\n    <div dnd-list=\\\"model[options.key]\\\"\\n         class=\\\"cms-containers\\\" style=\\\"min-height: 0px\\\">\\n        <div class=\\\"repeatsection\\\"\\n             style=\\\"position: relative\\\"\\n             ng-repeat=\\\"element in model[options.key]\\\"\\n             dnd-draggable=\\\"element\\\"\\n             dnd-moved=\\\"model[options.key].splice($index, 1);\\\"\\n             dnd-effect-allowed=\\\"move\\\"\\n             ng-init=\\\"_fields = copyFields(to.fields)[0];_options = createFormOptions($index)\\\">\\n\\n\\n\\n            <dnd-nodrag style=\\\"display: block\\\">\\n                <div style=\\\"position: absolute;right: 0px;z-index: 10;\\\" ng-style=\\\"{'margin-top': marginTop}\\\">\\n                    <button type=\\\"button\\\" class=\\\"btn btn-xs btn-white\\\"\\n                            ng-click=\\\"model[options.key].splice($index, 1)\\\">\\n                        <i class=\\\"fa fa-trash-o\\\"></i>\\n                    </button>\\n                    <button type=\\\"button\\\" dnd-handle class=\\\"btn btn-xs btn-white\\\" style=\\\"cursor: move;\\\">:::</button>\\n                </div>\\n\\n                <formly-field options=\\\"_fields\\\"\\n                              form-options=\\\"{}\\\"\\n                              form-state=\\\"_options.formState\\\"\\n                              model=\\\"element\\\"\\n                              form=\\\"form\\\">\\n                </formly-field>\\n            </dnd-nodrag>\\n        </div>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n        <div class=\\\"col-sm-offset-2 col-sm-10\\\">\\n            <div ng-if=\\\"!choice\\\">\\n                <button type=\\\"button\\\" class=\\\"btn btn-white btn-xs\\\"\\n                        ng-click=\\\"addNew()\\\">{{to.btnText}}\\n                </button>\\n            </div>\\n            <div ng-if=\\\"choice\\\">\\n                <div class=\\\"btn-group-xs\\\" uib-dropdown>\\n                    <button type=\\\"button\\\" class=\\\"btn btn-white\\\" uib-dropdown-toggle>\\n                        {{to.btnText}} <span class=\\\"caret\\\"></span>\\n                    </button>\\n                    <ul class=\\\"scrollable-menu\\\" uib-dropdown-menu role=\\\"menu\\\" aria-labelledby=\\\"btn-append-to-body\\\"\\n                        style=\\\"z-index: 10000;\\\">\\n                        <li style=\\\"padding: 0px 20px;\\\" ng-show=\\\"choice.length > 7\\\">\\n                            <input type=\\\"text\\\" ng-model=\\\"_choice\\\" ng-click=\\\"$event.stopPropagation();\\\">\\n                        </li>\\n                        <li role=\\\"menuitem\\\" ng-repeat=\\\"c in choice | filter: _choice track by $index\\\">\\n                            <a ng-click=\\\"addNewWithChoice(c); _choice = ''\\\">{{c}}</a>\\n                        </li>\\n                    </ul>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n\\n\\n</div>\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./components/formly/repeatSection.html\n ** module id = 20\n ** module chunks = 0\n **/","controller.$inject = ['$scope'];\nfunction controller($scope) {\n    $scope.choice = $scope.to.fields[0].templateOptions.choice;\n    $scope.marginTop = $scope.choice ? '0px' : '15px';\n    if ($scope.choice) $scope.to.fields[0].templateOptions.noPanel = true;\n\n    $scope.formOptions = {formState: $scope.formState};\n\n    $scope.addNew = function () {\n        $scope.model[$scope.options.key] = $scope.model[$scope.options.key] || [];\n        $scope.model[$scope.options.key].push({});\n    }\n\n    $scope.addNewWithChoice = function (choice) {\n        $scope.model[$scope.options.key] = $scope.model[$scope.options.key] || [];\n        $scope.model[$scope.options.key].push({choice});\n    }\n\n    $scope.copyFields = function (fields) {\n        return angular.copy(fields);\n    }\n\n    $scope.createFormOptions = ($index) => {\n        let path = `${$scope.formState.path}.${$scope.options.key}[${$index}]`;\n        if (_.startsWith(path, '.')) path = path.substring(1);\n        return {\n            formState: {\n                path,\n                model: $scope.formState.model || $scope.model\n            }\n        }\n    }\n}\n\nexport default controller;\n\n\n/** WEBPACK FOOTER **\n ** ./components/formly/repeat-section.controller.js\n **/","module.exports = \"<div js-tree=\\\"treeConfig\\\"\\n     ng-model=\\\"tree\\\"\\n     tree=\\\"data.treeInstance\\\"\\n     tree-events=\\\"check_node:check;uncheck_node:check;\\\"></div>\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./components/formly/tree.template.html\n ** module id = 22\n ** module chunks = 0\n **/","controller.$inject = ['$scope', '$timeout', 'size'];\n/**\n *\n * @param {{treeInstance}} $scope\n * @param $timeout\n */\nfunction controller($scope, $timeout) {\n    $scope.tree = $scope.options.templateOptions.options;\n\n    $scope.treeConfig = {\n        core: {\n            themes: {name: 'proton', responsive: true},\n            animation: true,\n            check_callback: true\n        },\n        plugins: [\"checkbox\"],\n        checkbox: {\n            tie_selection: false\n        },\n        version: 1\n    }\n\n    $timeout(() => $scope.treeConfig.version++);\n\n    $scope.data = {};\n\n    $scope.check = function () {\n        $timeout(() => {\n            let _arr = $scope.data.treeInstance.jstree(true).get_checked();\n            _arr = _arr.map(id => $scope.data.treeInstance.jstree(true).get_node(id).text);\n            $scope.model[$scope.options.key] = _arr;\n        });\n    }\n}\n\nexport default controller;\n\n\n/** WEBPACK FOOTER **\n ** ./components/formly/tree.controller.js\n **/","module.exports = \"<selectize config='config' options='models' ng-model=\\\"_model\\\"></selectize>\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./components/formly/ref.select.html\n ** module id = 24\n ** module chunks = 0\n **/","import QueryBuilder from \"../../common/cms/QueryBuilder\";\n\ncontroller.$inject = ['$scope', 'cms', '$timeout'];\n\nfunction controller($scope, cms, $timeout) {\n\n    // resolve\n    const type = $scope.options.templateOptions.Type;\n    $scope.models = [];\n\n    const labelProp = $scope.to.labelProp;\n\n    $scope.config = {\n        plugins: ['remove_button'],\n        dropdownParent: 'body',\n        valueField: '_id',\n        labelField: labelProp,\n        searchField: [labelProp],\n        onChange: function (val) {\n            $timeout(function () {\n                if (!$scope.to.multiple) {\n                    $scope.model[$scope.options.key] = _.find($scope.models, {_id: val});\n                } else {\n                    $scope.model[$scope.options.key] = val.map(_id => _.find($scope.models, {_id}));\n                }\n            })\n        }\n    }\n\n    if ($scope.to.async) {\n        $scope.config.load = function (query, callback) {\n            const queryBuilder = new QueryBuilder().limit(100).query({_textIndex: new RegExp(query, 'i')});\n            cms.loadElements(type, function (list) {\n                // $scope.models = list;\n                callback(list);\n            }, queryBuilder);\n\n        }\n    } else {\n        cms.loadElements(type, () => {\n            $scope.models.push(...Types[type].list);\n        })\n    }\n\n    if (!$scope.to.multiple) $scope.config.maxItems = 1;\n\n    if ($scope.to.sortField) {\n        $scope.config.sortField = $scope.to.sortField;\n        $scope.config.score = function (search) {\n            return function (item) {\n                if (item[$scope.to.labelProp].toLowerCase().indexOf(search.toLowerCase()) === -1) return 0;\n                return 1000000 - item[$scope.to.sortField];\n            };\n        }\n    }\n\n    $scope.$watch(`model['${$scope.options.key}']`, () => {\n        if ($scope.model[$scope.options.key] && $scope.model[$scope.options.key]._id) {\n            $scope._model = $scope.model[$scope.options.key]._id;\n        } else if (Array.isArray($scope.model[$scope.options.key]) && $scope.model[$scope.options.key][0]._id) {\n            $scope._model = $scope.model[$scope.options.key].map(m => m._id);\n        }\n    })\n\n}\n\nexport default controller;\n\n\n/** WEBPACK FOOTER **\n ** ./components/formly/ref.controller.js\n **/","class QueryBuilder {\n    constructor() {\n        this._part = false;\n        this._query = [];\n    }\n\n    part(part) {\n        this._part = part;\n        return this;\n    }\n\n    limit(limit) {\n        this._limit = limit;\n        return this;\n    }\n\n    page(_page) {\n        this._page = _page;\n        return this;\n    }\n\n    sort(_sort) {\n        if (_sort) this._sort = JSON.stringify(_sort);\n        return this;\n    }\n\n    query(_query) {\n        if (_query) this._query.push(_query);\n        return this;\n    }\n\n    search(_search) {\n        if (_search) this._search = _search;\n        return this;\n    }\n\n    populate(_populate) {\n        if (_populate) this._populate = _populate;\n        return this;\n    }\n\n    lean() {\n        this._lean = true;\n    }\n\n    build() {\n        this._skip = (this._page - 1) * this._limit;\n\n        let params = '';\n        if (this._limit) params += `limit=${this._limit}`;\n        if (this._skip) params += `&skip=${this._skip}`;\n        if (this._query) params += `&query=${JSON.stringify(this._query)}`;\n        if (this._sort) params += `&sort=${this._sort}`;\n        return params;\n    }\n\n    buildJson() {\n        this._skip = (this._page - 1) * this._limit;\n\n        let query;\n        if (this._search && this._query) {\n            query = {$and: [{$text: {$search: this._search}}, ...this._query]}\n        } else if (this._search) {\n            query = {$text: {$search: this._search}};\n        } else if (this._query.length > 0) {\n            query = {$and: [...this._query]};\n        }\n\n        const result = {};\n\n        if (this._limit) result.limit = this._limit;\n        if (this._skip) result.skip = this._skip;\n        if (query) result.query = query;\n        if (this._sort) result.limit = this._sort;\n        if (this._part) result.limit = this._part;\n        if (this._populate) result.populate = this._populate;\n        if (this._lean) result.lean = true;\n\n        return result;\n    }\n}\n\nexport default QueryBuilder;\n\n\n/** WEBPACK FOOTER **\n ** ./common/cms/QueryBuilder.js\n **/","module.exports = \"<div class=\\\"form-group\\\">\\n    <label class=\\\"control-label {{size.label}}\\\" uib-tooltip='{{to.tooltip}}'>\\n        {{to.label}}\\n    </label>\\n    <div class=\\\"{{size.input}}\\\">\\n\\n        <button type=\\\"button\\\"\\n                class=\\\"btn btn-white btn-xs\\\"\\n                style=\\\"margin-top: 7px;\\\"\\n                ng-click=\\\"showCode(); selectTab();\\\">\\n            {{!show? 'show code': 'hide code'}}\\n        </button>\\n        <span class=\\\"label label-danger\\\" ng-show=\\\"hasError\\\">The code has error</span>\\n    </div>\\n\\n</div>\\n<ui-codemirror ng-show=\\\"show\\\"\\n                     ng-model=\\\"_model\\\"\\n                     ui-codemirror-opts=\\\"editorOptions\\\"\\n                     ui-codemirror=\\\"{ onLoad : codemirrorLoaded }\\\"\\n                     ui-refresh='refresh'>\\n</ui-codemirror>\\n<br>\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./components/formly/code.html\n ** module id = 27\n ** module chunks = 0\n **/","import {JSHINT} from 'jshint';\nwindow.JSHINT = JSHINT;\nimport es6 from './ecma6.json';\nimport es5 from './ecma5.json';\nimport cmsdef from './cms-def.json';\nimport 'jquery-ui/ui/effect';\n\ncontroller.$inject = ['$scope', '$http', 'size'];\nfunction controller($scope, $http, size) {\n\n    $scope.size = size;\n    $scope.hasError = false;\n    $scope._model = $scope.model[$scope.options.key] ? $scope.model[$scope.options.key].toString().replace('\"use strict\";\\n\\n', '') : 'function () {\\n}';\n\n\n    $scope.$watch('_model', function (value) {\n        if ($scope._model || $scope._model !== '') {\n            try {\n                const escape = s => s.replace(/\\n/g, \"\\\\n\").replace(/\\r/g, \"\\\\r\").replace(/\\t/g, \"\\\\t\").replace(/\\f/g, \"\\\\f\");\n                $scope.model[$scope.options.key] = JsonFn.parse(`{\"fn\":\"${escape(value)}\"}`).fn;\n                $scope.hasError = false;\n            } catch (e) {\n                $scope.hasError = true;\n            }\n        }\n    })\n    $scope.editorOptions = {\n        lineWrapping: true,\n        lineNumbers: true,\n        autoCloseBrackets: true,\n        showHint: true,\n        mode: 'javascript',\n        tabSize: 2,\n        gutters: [\"CodeMirror-lint-markers\"],\n        lint: function (text, options, cm) {\n            const linter = cm.getHelper(CodeMirror.Pos(0, 0), 'lint');\n            _.merge(options, {\n                esversion: 6,\n                debug: true,\n                '-W025': true,\n                asi: true\n            });\n            return linter(text, options);\n        }\n    };\n\n\n    $scope.codemirrorLoaded = function (editor) {\n        $scope.editor = editor;\n        const server = new CodeMirror.TernServer({defs: [es5, es6, cmsdef]});\n        editor.setOption(\"extraKeys\", {\n            \"Ctrl-Space\": function (cm) {\n                server.complete(cm);\n            },\n            \"Ctrl-I\": function (cm) {\n                server.showType(cm);\n            },\n            \"Ctrl-O\": function (cm) {\n                server.showDocs(cm);\n            },\n            \"Alt-.\": function (cm) {\n                server.jumpToDef(cm);\n            },\n            \"Alt-,\": function (cm) {\n                server.jumpBack(cm);\n            },\n            \"Ctrl-Q\": function (cm) {\n                server.rename(cm);\n            },\n            \"Ctrl-.\": function (cm) {\n                server.selectName(cm);\n            },\n            'Ctrl-L': function (cm) {\n                if ($('.cms-window-placeholder').hasClass('cms-window')) {\n                    $('.cms-window-placeholder').removeClass('cms-window');\n                } else {\n                    $('.cms-window-placeholder').addClass('cms-window');\n                }\n                cm.setOption(\"fullScreen\", !cm.getOption(\"fullScreen\"));\n            },\n            'Esc': function (cm) {\n                $('.cms-window-placeholder').removeClass('cms-window');\n                if (cm.getOption(\"fullScreen\")) cm.setOption(\"fullScreen\", false);\n            }\n        })\n        editor.on(\"cursorActivity\", function (cm) {\n            server.updateArgHints(cm);\n        });\n    };\n\n    $scope.selectTab = function () {\n        $scope.refresh = !$scope.refresh;\n    };\n\n    $scope.show = false;\n    $scope.showCode = function () {\n        /*if ($scope.show === false) {\n            $('.cms-window-placeholder').switchClass(null, 'cms-window', 500, \"easeInOutQuad\");\n        } else {\n            $('.cms-window-placeholder').switchClass('cms-window', null, 500, \"easeInOutQuad\");\n        }*/\n        $scope.show = !$scope.show\n    }\n\n}\n\nexport default controller;\n\n\n/** WEBPACK FOOTER **\n ** ./components/formly/code.controller.js\n **/","module.exports = (__webpack_require__(2))(337);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/jshint/src/jshint.js from dll-reference lib_lib\n ** module id = 29\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(353);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./frontend/components/formly/ecma6.json from dll-reference lib_lib\n ** module id = 30\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(4);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./frontend/components/formly/ecma5.json from dll-reference lib_lib\n ** module id = 31\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(5);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./frontend/components/formly/cms-def.json from dll-reference lib_lib\n ** module id = 32\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(6);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/jquery-ui/ui/effect.js from dll-reference lib_lib\n ** module id = 33\n ** module chunks = 0\n **/","controller.$inject = ['$scope'];\nfunction controller($scope) {\n    var unique = 1;\n\n    $scope.formOptions = {formState: $scope.formState};\n    $scope.addNew = addNew;\n\n    $scope.copyItemOptions = copyItemOptions;\n\n    function copyItemOptions(field) {\n        return angular.copy(field);\n    }\n\n    function addNew() {\n        $scope.model[$scope.options.key] = $scope.model[$scope.options.key] || [];\n        var array = $scope.model[$scope.options.key];\n        array.push('');\n    }\n\n    $scope.createFormState = ($index) => {\n        let path = `${$scope.formState.path}.${$scope.options.key}[${$index}]`;\n        if (_.startsWith(path, '.')) path = path.substring(1);\n        return {\n            path,\n            model: $scope.formState.model || $scope.model\n        }\n    }\n}\n\nexport default controller;\n\n\n/** WEBPACK FOOTER **\n ** ./components/formly/array.controller.js\n **/","module.exports = \"<div style=\\\"min-height: 20px;position: relative;\\\"\\n     ng-repeat=\\\"element in model[options.key] track by $index\\\"\\n     ng-init=\\\"itemOptions = copyItemOptions(to.field);_formState = createFormState($index)\\\">\\n    <button type=\\\"button\\\" class=\\\"btn btn-xs btn-white\\\"\\n            style=\\\"position: absolute;right: 0px;z-index: 10;\\\"\\n            ng-click=\\\"model[options.key].splice($index, 1)\\\">\\n        <i class=\\\"fa fa-trash-o\\\"></i>\\n    </button>\\n    <formly-field options=\\\"itemOptions\\\"\\n                  model=\\\"model[options.key]\\\"\\n                  form=\\\"form\\\"\\n                  form-state=\\\"_formState\\\"\\n                  index=\\\"$index\\\">\\n    </formly-field>\\n</div>\\n<div class=\\\"form-group\\\">\\n    <div class=\\\"col-sm-offset-2 col-sm-10\\\">\\n        <button type=\\\"button\\\" class=\\\"btn btn-white btn-xs\\\"\\n                ng-click=\\\"addNew()\\\" style=\\\"z-index: 1;\\\">{{to.btnText}}\\n        </button>\\n    </div>\\n</div>\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./components/formly/array.template.html\n ** module id = 35\n ** module chunks = 0\n **/","controller.$inject = ['$scope'];\nfunction controller($scope) {\n    var unique = 1;\n\n    $scope.formOptions = {formState: $scope.formState};\n    $scope.addNew = addNew;\n\n    $scope.copyItemOptions = copyItemOptions;\n\n    $scope.getCols = function () {\n\n    }\n\n    function copyItemOptions(field) {\n        return angular.copy(field);\n    }\n\n    function addNew() {\n        $scope.model[$scope.options.key] = $scope.model[$scope.options.key] || [];\n        var array = $scope.model[$scope.options.key];\n        array.push({});\n    }\n\n    $scope.createFormState = ($index) => {\n        let path = `${$scope.formState.path}.${$scope.options.key}[${$index}]`;\n        if (_.startsWith(path, '.')) path = path.substring(1);\n        return {\n            path,\n            model: $scope.formState.model || $scope.model\n        }\n    }\n}\n\nexport default controller;\n\n\n/** WEBPACK FOOTER **\n ** ./components/formly/table.controller.js\n **/","module.exports = \"<table class=\\\"table cms-admin-table cms-table-section\\\">\\n    <thead>\\n    <tr>\\n        <th ng-repeat=\\\"col in to.fields track by $index\\\"\\n            ng-style=\\\"{width:to.widths ? to.widths.split(' ')[$index] + '%':'initial'}\\\">{{col.templateOptions.label}}\\n        </th>\\n        <th>X</th>\\n    </tr>\\n    </thead>\\n    <tbody>\\n    <tr ng-repeat=\\\"element in model[options.key] track by $index\\\"\\n        ng-init=\\\"_index = $index;_formState = createFormState($index)\\\">\\n        <td ng-repeat=\\\"field in to.fields\\\"\\n            ng-init=\\\"_field = copyItemOptions(field)\\\">\\n            <formly-field options=\\\"_field\\\"\\n                          model=\\\"model[options.key][_index]\\\"\\n                          form=\\\"form\\\"\\n                          form-state=\\\"_formState\\\">\\n            </formly-field>\\n        </td>\\n        <td>\\n            <button type=\\\"button\\\" class=\\\"btn btn-xs btn-white\\\"\\n                    tabIndex=\\\"-1\\\"\\n                    ng-click=\\\"model[options.key].splice(_index, 1)\\\">\\n                <i class=\\\"fa fa-trash-o\\\"></i>\\n            </button>\\n        </td>\\n    </tr>\\n    </tbody>\\n</table>\\n\\n<button type=\\\"button\\\" class=\\\"btn btn-white btn-xs\\\"\\n        ng-click=\\\"addNew()\\\" style=\\\"z-index: 1;\\\">{{to.btnText}}\\n</button>\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./components/formly/table.template.html\n ** module id = 37\n ** module chunks = 0\n **/","controller.$inject = ['$scope', 'cms'];\n\nfunction controller($scope, cms) {\n    $scope.to.options = _.map(cms.data.types, (v, k) => ({name: k, value: k}));\n}\n\n\nexport default controller;\n\n\n/** WEBPACK FOOTER **\n ** ./components/formly/select-type.controller.js\n **/","controller.$inject = ['$scope'];\n\nfunction controller($scope) {\n    const options = $scope.to.options = [];\n    let {path, model} = $scope.formState;\n    path = _.dropRight(path.split('\\.')).join('.');\n\n    let {containers} = _.get(model, path);\n    $scope.to.labelProp = 'Type';\n    const map = {};\n    $scope.getLabel = selected => selected && selected.ref ? map[selected.ref] : '';\n\n    cms.walkInContainers(containers, (element, e) => {\n        options.push({Type: element.type, ref: e._id});\n        map[e._id] = `${element.type} : ${e[Types[element.type].info.title]}`;\n    })\n}\n\n\nexport default controller;\n\n\n/** WEBPACK FOOTER **\n ** ./components/formly/select-element.controller.js\n **/","controller.$inject = ['$scope', 'cms'];\n\nfunction controller($scope, cms) {\n    debugger;\n    let {path, model} = $scope.formState;\n    path = _.dropRight(path.split('\\.')).join('.');\n\n    const Type = cms.data.types[_.get(model,path).BindType];\n    $scope.to.options = _.map(Type.columns, v => ({name: v, value: v}));\n}\n\n\nexport default controller;\n\n\n/** WEBPACK FOOTER **\n ** ./components/formly/select-property.controller.js\n **/","controller.$inject = ['$scope', 'cms', '$timeout'];\n\nfunction controller($scope, cms, $timeout) {\n    function getProperties() {\n        try {\n            const Type = cms.data.types[$scope.model.child.Type];\n            $scope.to.options = _.map(Type.columns, v => ({name: v, value: v}));\n        } catch (e) {\n        }\n    }\n\n    getProperties();\n    $timeout(()=> {\n        $scope.$watch('model.child.Type', () => {\n            getProperties();\n        })\n    }, 200);\n\n}\n\n\nexport default controller;\n\n\n/** WEBPACK FOOTER **\n ** ./components/formly/select-child-property.controller.js\n **/","controller.$inject = ['$scope', 'cms'];\n\nfunction controller($scope, cms) {\n    let {path, model} = $scope.formState;\n    path = _.dropRight(path.split('\\.')).join('.');\n\n    const {BindType} = _.get(model, path);\n    const Type = cms.data.types[BindType];\n    $scope.to.options = _.map(Type.fn, (v, k) => ({name: k, value: k}));\n}\n\n\nexport default controller;\n\n\n/** WEBPACK FOOTER **\n ** ./components/formly/select-fn.controller.js\n **/","module.exports = \"<selectize\\n        config=\\\"{\\n            plugins: ['remove_button'],\\n            dropdownParent: 'body',\\n            valueField: 'value',\\n            labelField: 'name',\\n            searchField: ['name'],\\n            maxItems:to.multiple ? 50:1\\n        }\\\" options='to.options' ng-model=\\\"model[options.key]\\\"></selectize>\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./components/formly/select.html\n ** module id = 43\n ** module chunks = 0\n **/","module.exports = \"<ui-select data-ng-model=\\\"model[options.key]\\\" theme=\\\"bootstrap\\\" on-select=\\\"onSelect()\\\" append-to-body=\\\"true\\\">\\n    <ui-select-match allow-clear=\\\"true\\\" placeholder=\\\"{{to.placeholder}}\\\">\\n        {{getLabel? getLabel($select.selected): $select.selected[to.labelProp]}}\\n    </ui-select-match>\\n    <ui-select-choices data-repeat=\\\"item in to.options | filterBy: [to.labelProp]: $select.search\\\">\\n        <div ng-bind-html=\\\"getLabel? getLabel(item): item[to.labelProp] | highlight: $select.search\\\"></div>\\n    </ui-select-choices>\\n</ui-select>\\n\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./components/formly/select-whole.html\n ** module id = 44\n ** module chunks = 0\n **/","module.exports = \"<ui-select multiple data-ng-model=\\\"model[options.key]\\\" theme=\\\"bootstrap\\\" append-to-body=\\\"true\\\">\\n    <ui-select-match placeholder=\\\"{{to.placeholder}}\\\">\\n        {{$item.name}}\\n    </ui-select-match>\\n    <ui-select-choices data-repeat=\\\"item.value as item in to.options | filterBy: ['name']: $select.search\\\">\\n        <div ng-bind-html=\\\"item.name | highlight: $select.search\\\"></div>\\n    </ui-select-choices>\\n</ui-select>\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./components/formly/multi-select.html\n ** module id = 45\n ** module chunks = 0\n **/","controller.$inject = ['$scope', '$http'];\n\nfunction controller($scope, $http) {\n    $scope.add = function (item) {\n        $scope.model[$scope.options.key] = $scope.model[$scope.options.key] || [];\n        $scope.model[$scope.options.key].push(item);\n    }\n}\n\n\nexport default controller;\n\n\n/** WEBPACK FOOTER **\n ** ./components/formly/bs-grid-select.controller.js\n **/","module.exports = \"<div class=\\\"ui-select-container ui-select-multiple ui-select-bootstrap dropdown form-control\\\">\\n    <span>\\n        <button type=\\\"button\\\" class=\\\"ui-select-match-item btn btn-default btn-xs\\\"\\n                style=\\\"min-width: 30px;\\\"\\n                ng-click=\\\"model[options.key].splice($index,1)\\\"\\n                ng-repeat=\\\"item in model[options.key] track by $index\\\">\\n            {{item}}\\n        </button>\\n    </span>\\n    <div class=\\\"btn-group\\\" uib-dropdown>\\n        <input class=\\\"ui-select-search input-xs\\\" uib-dropdown-toggle>\\n        <ul uib-dropdown-menu role=\\\"menu\\\" aria-labelledby=\\\"single-button\\\">\\n            <li role=\\\"menuitem\\\" ng-repeat=\\\"option in to.options track by $index\\\">\\n                <a ng-click=\\\"add(option.value)\\\">{{option.name}}</a>\\n            </li>\\n        </ul>\\n    </div>\\n</div>\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./components/formly/bs-grid-select.html\n ** module id = 47\n ** module chunks = 0\n **/","module.exports = \"<div class=\\\"checkbox\\\">\\n\\t<label>\\n\\t\\t<input type=\\\"checkbox\\\"\\n           class=\\\"formly-field-checkbox\\\"\\n\\t\\t       ng-model=\\\"model[options.key]\\\">\\n\\t\\t{{to.label}}\\n\\t\\t{{to.required ? '*' : ''}}\\n\\t</label>\\n</div>\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../~/angular-formly-templates-bootstrap/src/types/checkbox.html\n ** module id = 48\n ** module chunks = 0\n **/","controller.$inject = ['$scope'];\n\nfunction controller($scope) {\n    $scope.save = () => $scope.$emit('saveContainers', {\n        type: 'Layout',\n        cb: containers => {\n            $scope.model[$scope.options.key] = containers;\n        }\n    });\n    $scope.restore = () => $scope.$emit('restoreContainers', {\n        type: 'Layout',\n        containers: $scope.model[$scope.options.key]\n    });\n}\n\nexport default controller;\n\n\n/** WEBPACK FOOTER **\n ** ./components/formly/saveContainersController.js\n **/","module.exports = \"<formly-form fields=\\\"_fields\\\"\\n             model=\\\"_model\\\"\\n             options=\\\"{formState:_formState}\\\"\\n             form=\\\"form\\\">\\n</formly-form>\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./components/formly/recursive.html\n ** module id = 50\n ** module chunks = 0\n **/","controller.$inject = ['$scope'];\n\nfunction controller($scope) {\n    const path  = $scope.to.path;\n    const fields = $scope.formState.fields || $scope.fields;\n    const field = angular.copy(_.find(fields, {key:path}));\n    field.key = $scope.options.key;\n    // resolve fields\n    $scope._fields = [field];\n\n    // resolve model\n    if (!$scope.model[$scope.options.key]) $scope.model[$scope.options.key] = {};\n    $scope._model = $scope.model[$scope.options.key];\n\n    // resolve formState;\n    $scope._formState = {\n        model: $scope.model,\n        fields\n    }\n\n}\n\nexport default controller;\n\n\n/** WEBPACK FOOTER **\n ** ./components/formly/recursive.controller.js\n **/","module.exports = (__webpack_require__(2))(51);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/api-check/dist/api-check.js from dll-reference lib_lib\n ** module id = 52\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(21);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/angular-ui-switch/angular-ui-switch.js from dll-reference lib_lib\n ** module id = 53\n ** module chunks = 0\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../css-loader/index.js!./angular-ui-switch.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../css-loader/index.js!./angular-ui-switch.css\", function() {\n\t\t\tvar newContent = require(\"!!./../css-loader/index.js!./angular-ui-switch.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../~/angular-ui-switch/angular-ui-switch.css\n ** module id = 54\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".switch {\\n  background: #fff;\\n  border: 1px solid #dfdfdf;\\n  position: relative;\\n  display: inline-block;\\n  box-sizing: content-box;\\n  overflow: visible;\\n  width: 52px;\\n  height: 30px;\\n  padding: 0px;\\n  margin: 0px;\\n  border-radius: 20px;\\n  cursor: pointer;\\n  box-shadow: rgb(223, 223, 223) 0px 0px 0px 0px inset;\\n  transition: 0.3s ease-out all;\\n  -webkit-transition: 0.3s ease-out all;\\n  top: -1px;\\n}\\n/*adding a wide width for larger switch text*/\\n.switch.wide {\\n  width:80px;\\n}\\n.switch small {\\n  background: #fff;\\n  border-radius: 100%;\\n  box-shadow: 0 1px 3px rgba(0,0,0,0.4);\\n  width: 30px;\\n  height: 30px;\\n  position: absolute;\\n  top: 0px;\\n  left: 0px;\\n  transition: 0.3s ease-out all;\\n  -webkit-transition: 0.3s ease-out all;\\n}\\n.switch.checked {\\n  background: rgb(100, 189, 99);\\n  border-color: rgb(100, 189, 99);\\n}\\n.switch.checked small {\\n  left: 22px;\\n}\\n/*wider switch text moves small further to the right*/\\n.switch.wide.checked small {\\n  left:52px;\\n}\\n/*styles for switch-text*/\\n.switch .switch-text {\\n  font-family:Arial, Helvetica, sans-serif;\\n  font-size:13px;\\n}\\n\\n.switch .off {\\n  display:block;\\n  position: absolute;\\n  right: 10%;\\n  top: 25%;\\n  z-index: 0;\\n  color:#A9A9A9;\\n}\\n\\n.switch .on {\\n  display:none;\\n   z-index: 0;\\n  color:#fff;\\n  position: absolute;\\n  top: 25%;\\n  left: 9%;\\n}\\n\\n.switch.checked .off {\\n  display:none;\\n}\\n\\n.switch.checked .on {\\n  display:block;\\n\\n}\\n\\n.switch.disabled {\\n  opacity: .50;\\n  cursor: not-allowed;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../~/css-loader!../~/angular-ui-switch/angular-ui-switch.css\n ** module id = 55\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(24);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/css-loader/lib/css-base.js from dll-reference lib_lib\n ** module id = 56\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(25);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/style-loader/addStyles.js from dll-reference lib_lib\n ** module id = 57\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(52);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/angular-formly/dist/formly.js from dll-reference lib_lib\n ** module id = 58\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(53);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/angular-formly-templates-bootstrap/dist/angular-formly-templates-bootstrap.js from dll-reference lib_lib\n ** module id = 59\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(26);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/jstree/dist/jstree.js from dll-reference lib_lib\n ** module id = 60\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(27);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/jstree-bootstrap-theme/dist/themes/proton/style.min.css from dll-reference lib_lib\n ** module id = 61\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(46);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/ng-js-tree/dist/ngJsTree.min.js from dll-reference lib_lib\n ** module id = 62\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(47);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/ui-select/index.js from dll-reference lib_lib\n ** module id = 63\n ** module chunks = 0\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../css-loader/index.js!./select.min.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../css-loader/index.js!./select.min.css\", function() {\n\t\t\tvar newContent = require(\"!!./../../css-loader/index.js!./select.min.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../~/ui-select/dist/select.min.css\n ** module id = 64\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../../css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"/*!\\n * ui-select\\n * http://github.com/angular-ui/ui-select\\n * Version: 0.18.1 - 2016-07-10T00:30:49.466Z\\n * License: MIT\\n */.ui-select-highlight{font-weight:700}.ui-select-offscreen{clip:rect(0 0 0 0)!important;width:1px!important;height:1px!important;border:0!important;margin:0!important;padding:0!important;overflow:hidden!important;position:absolute!important;outline:0!important;left:0!important;top:0!important}.ui-select-choices-row:hover{background-color:#f5f5f5}.ng-dirty.ng-invalid>a.select2-choice{border-color:#D44950}.select2-result-single{padding-left:0}.select-locked>.ui-select-match-close,.select2-locked>.select2-search-choice-close{display:none}body>.select2-container.open{z-index:9999}.ui-select-container.select2.direction-up .ui-select-match,.ui-select-container[theme=select2].direction-up .ui-select-match{border-radius:0 0 4px 4px}.ui-select-container.select2.direction-up .ui-select-dropdown,.ui-select-container[theme=select2].direction-up .ui-select-dropdown{border-radius:4px 4px 0 0;border-top-width:1px;border-top-style:solid;box-shadow:0 -4px 8px rgba(0,0,0,.25);margin-top:-4px}.ui-select-container.select2.direction-up .ui-select-dropdown .select2-search,.ui-select-container[theme=select2].direction-up .ui-select-dropdown .select2-search{margin-top:4px}.ui-select-container.select2.direction-up.select2-dropdown-open .ui-select-match,.ui-select-container[theme=select2].direction-up.select2-dropdown-open .ui-select-match{border-bottom-color:#5897fb}.selectize-input.selectize-focus{border-color:#007FBB!important}.selectize-control>.selectize-dropdown,.selectize-control>.selectize-input>input{width:100%}.ng-dirty.ng-invalid>div.selectize-input{border-color:#D44950}.ui-select-container[theme=selectize].direction-up .ui-select-dropdown{box-shadow:0 -4px 8px rgba(0,0,0,.25);margin-top:-2px}.btn-default-focus{color:#333;background-color:#EBEBEB;border-color:#ADADAD;text-decoration:none;outline:-webkit-focus-ring-color auto 5px;outline-offset:-2px;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6)}.ui-select-bootstrap .ui-select-toggle{position:relative}.ui-select-bootstrap .ui-select-toggle>.caret{position:absolute;height:10px;top:50%;right:10px;margin-top:-2px}.input-group>.ui-select-bootstrap.dropdown{position:static}.input-group>.ui-select-bootstrap>input.ui-select-search.form-control{border-radius:4px 0 0 4px}.input-group>.ui-select-bootstrap>input.ui-select-search.form-control.direction-up{border-radius:4px 0 0 4px!important}.ui-select-bootstrap>.ui-select-match>.btn{text-align:left!important}.ui-select-bootstrap>.ui-select-match>.caret{position:absolute;top:45%;right:15px}.ui-select-bootstrap>.ui-select-choices,.ui-select-bootstrap>.ui-select-no-choice{width:100%;height:auto;max-height:200px;overflow-x:hidden;margin-top:-1px}body>.ui-select-bootstrap.open{z-index:1000}.ui-select-multiple.ui-select-bootstrap{height:auto;padding:3px 3px 0}.ui-select-multiple.ui-select-bootstrap input.ui-select-search{background-color:transparent!important;border:none;outline:0;height:1.666666em;margin-bottom:3px}.ui-select-multiple.ui-select-bootstrap .ui-select-match .close{font-size:1.6em;line-height:.75}.ui-select-multiple.ui-select-bootstrap .ui-select-match-item{outline:0;margin:0 3px 3px 0}.ui-select-multiple .ui-select-match-item{position:relative}.ui-select-multiple .ui-select-match-item.dropping .ui-select-match-close{pointer-events:none}.ui-select-multiple:hover .ui-select-match-item.dropping-before:before{content:\\\"\\\";position:absolute;top:0;right:100%;height:100%;margin-right:2px;border-left:1px solid #428bca}.ui-select-multiple:hover .ui-select-match-item.dropping-after:after{content:\\\"\\\";position:absolute;top:0;left:100%;height:100%;margin-left:2px;border-right:1px solid #428bca}.ui-select-bootstrap .ui-select-choices-row>a{display:block;padding:3px 20px;clear:both;font-weight:400;line-height:1.42857143;color:#333;white-space:nowrap}.ui-select-bootstrap .ui-select-choices-row>a:focus,.ui-select-bootstrap .ui-select-choices-row>a:hover{text-decoration:none;color:#262626;background-color:#f5f5f5}.ui-select-bootstrap .ui-select-choices-row.active>a{color:#fff;text-decoration:none;outline:0;background-color:#428bca}.ui-select-bootstrap .ui-select-choices-row.active.disabled>a,.ui-select-bootstrap .ui-select-choices-row.disabled>a{color:#777;cursor:not-allowed;background-color:#fff}.ui-select-match.ng-hide-add,.ui-select-search.ng-hide-add{display:none!important}.ui-select-bootstrap.ng-dirty.ng-invalid>button.btn.ui-select-match{border-color:#D44950}.ui-select-container[theme=bootstrap].direction-up .ui-select-dropdown{box-shadow:0 -4px 8px rgba(0,0,0,.25)}\\n/*# sourceMappingURL=select.min.css.map */\\n\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../~/css-loader!../~/ui-select/dist/select.min.css\n ** module id = 65\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(330);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/selectize/dist/css/selectize.css from dll-reference lib_lib\n ** module id = 66\n ** module chunks = 0\n **/","/**\n * sifter.js\n * Copyright (c) 2013 Brian Reavis & contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n * @author Brian Reavis <brian@thirdroute.com>\n */\n\n(function(root, factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine('sifter', factory);\n\t} else if (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t} else {\n\t\troot.Sifter = factory();\n\t}\n}(this, function() {\n\n\t/**\n\t * Textually searches arrays and hashes of objects\n\t * by property (or multiple properties). Designed\n\t * specifically for autocomplete.\n\t *\n\t * @constructor\n\t * @param {array|object} items\n\t * @param {object} items\n\t */\n\tvar Sifter = function(items, settings) {\n\t\tthis.items = items;\n\t\tthis.settings = settings || {diacritics: true};\n\t};\n\n\t/**\n\t * Splits a search string into an array of individual\n\t * regexps to be used to match results.\n\t *\n\t * @param {string} query\n\t * @returns {array}\n\t */\n\tSifter.prototype.tokenize = function(query) {\n\t\tquery = trim(String(query || '').toLowerCase());\n\t\tif (!query || !query.length) return [];\n\n\t\tvar i, n, regex, letter;\n\t\tvar tokens = [];\n\t\tvar words = query.split(/ +/);\n\n\t\tfor (i = 0, n = words.length; i < n; i++) {\n\t\t\tregex = escape_regex(words[i]);\n\t\t\tif (this.settings.diacritics) {\n\t\t\t\tfor (letter in DIACRITICS) {\n\t\t\t\t\tif (DIACRITICS.hasOwnProperty(letter)) {\n\t\t\t\t\t\tregex = regex.replace(new RegExp(letter, 'g'), DIACRITICS[letter]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\ttokens.push({\n\t\t\t\tstring : words[i],\n\t\t\t\tregex  : new RegExp(regex, 'i')\n\t\t\t});\n\t\t}\n\n\t\treturn tokens;\n\t};\n\n\t/**\n\t * Iterates over arrays and hashes.\n\t *\n\t * ```\n\t * this.iterator(this.items, function(item, id) {\n\t *    // invoked for each item\n\t * });\n\t * ```\n\t *\n\t * @param {array|object} object\n\t */\n\tSifter.prototype.iterator = function(object, callback) {\n\t\tvar iterator;\n\t\tif (is_array(object)) {\n\t\t\titerator = Array.prototype.forEach || function(callback) {\n\t\t\t\tfor (var i = 0, n = this.length; i < n; i++) {\n\t\t\t\t\tcallback(this[i], i, this);\n\t\t\t\t}\n\t\t\t};\n\t\t} else {\n\t\t\titerator = function(callback) {\n\t\t\t\tfor (var key in this) {\n\t\t\t\t\tif (this.hasOwnProperty(key)) {\n\t\t\t\t\t\tcallback(this[key], key, this);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\titerator.apply(object, [callback]);\n\t};\n\n\t/**\n\t * Returns a function to be used to score individual results.\n\t *\n\t * Good matches will have a higher score than poor matches.\n\t * If an item is not a match, 0 will be returned by the function.\n\t *\n\t * @param {object|string} search\n\t * @param {object} options (optional)\n\t * @returns {function}\n\t */\n\tSifter.prototype.getScoreFunction = function(search, options) {\n\t\tvar self, fields, tokens, token_count, nesting;\n\n\t\tself        = this;\n\t\tsearch      = self.prepareSearch(search, options);\n\t\ttokens      = search.tokens;\n\t\tfields      = search.options.fields;\n\t\ttoken_count = tokens.length;\n\t\tnesting     = search.options.nesting;\n\n\t\t/**\n\t\t * Calculates how close of a match the\n\t\t * given value is against a search token.\n\t\t *\n\t\t * @param {mixed} value\n\t\t * @param {object} token\n\t\t * @return {number}\n\t\t */\n\t\tvar scoreValue = function(value, token) {\n\t\t\tvar score, pos;\n\n\t\t\tif (!value) return 0;\n\t\t\tvalue = String(value || '');\n\t\t\tpos = value.search(token.regex);\n\t\t\tif (pos === -1) return 0;\n\t\t\tscore = token.string.length / value.length;\n\t\t\tif (pos === 0) score += 0.5;\n\t\t\treturn score;\n\t\t};\n\n\t\t/**\n\t\t * Calculates the score of an object\n\t\t * against the search query.\n\t\t *\n\t\t * @param {object} token\n\t\t * @param {object} data\n\t\t * @return {number}\n\t\t */\n\t\tvar scoreObject = (function() {\n\t\t\tvar field_count = fields.length;\n\t\t\tif (!field_count) {\n\t\t\t\treturn function() { return 0; };\n\t\t\t}\n\t\t\tif (field_count === 1) {\n\t\t\t\treturn function(token, data) {\n\t\t\t\t\treturn scoreValue(getattr(data, fields[0], nesting), token);\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn function(token, data) {\n\t\t\t\tfor (var i = 0, sum = 0; i < field_count; i++) {\n\t\t\t\t\tsum += scoreValue(getattr(data, fields[i], nesting), token);\n\t\t\t\t}\n\t\t\t\treturn sum / field_count;\n\t\t\t};\n\t\t})();\n\n\t\tif (!token_count) {\n\t\t\treturn function() { return 0; };\n\t\t}\n\t\tif (token_count === 1) {\n\t\t\treturn function(data) {\n\t\t\t\treturn scoreObject(tokens[0], data);\n\t\t\t};\n\t\t}\n\n\t\tif (search.options.conjunction === 'and') {\n\t\t\treturn function(data) {\n\t\t\t\tvar score;\n\t\t\t\tfor (var i = 0, sum = 0; i < token_count; i++) {\n\t\t\t\t\tscore = scoreObject(tokens[i], data);\n\t\t\t\t\tif (score <= 0) return 0;\n\t\t\t\t\tsum += score;\n\t\t\t\t}\n\t\t\t\treturn sum / token_count;\n\t\t\t};\n\t\t} else {\n\t\t\treturn function(data) {\n\t\t\t\tfor (var i = 0, sum = 0; i < token_count; i++) {\n\t\t\t\t\tsum += scoreObject(tokens[i], data);\n\t\t\t\t}\n\t\t\t\treturn sum / token_count;\n\t\t\t};\n\t\t}\n\t};\n\n\t/**\n\t * Returns a function that can be used to compare two\n\t * results, for sorting purposes. If no sorting should\n\t * be performed, `null` will be returned.\n\t *\n\t * @param {string|object} search\n\t * @param {object} options\n\t * @return function(a,b)\n\t */\n\tSifter.prototype.getSortFunction = function(search, options) {\n\t\tvar i, n, self, field, fields, fields_count, multiplier, multipliers, get_field, implicit_score, sort;\n\n\t\tself   = this;\n\t\tsearch = self.prepareSearch(search, options);\n\t\tsort   = (!search.query && options.sort_empty) || options.sort;\n\n\t\t/**\n\t\t * Fetches the specified sort field value\n\t\t * from a search result item.\n\t\t *\n\t\t * @param  {string} name\n\t\t * @param  {object} result\n\t\t * @return {mixed}\n\t\t */\n\t\tget_field = function(name, result) {\n\t\t\tif (name === '$score') return result.score;\n\t\t\treturn getattr(self.items[result.id], name, options.nesting);\n\t\t};\n\n\t\t// parse options\n\t\tfields = [];\n\t\tif (sort) {\n\t\t\tfor (i = 0, n = sort.length; i < n; i++) {\n\t\t\t\tif (search.query || sort[i].field !== '$score') {\n\t\t\t\t\tfields.push(sort[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// the \"$score\" field is implied to be the primary\n\t\t// sort field, unless it's manually specified\n\t\tif (search.query) {\n\t\t\timplicit_score = true;\n\t\t\tfor (i = 0, n = fields.length; i < n; i++) {\n\t\t\t\tif (fields[i].field === '$score') {\n\t\t\t\t\timplicit_score = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (implicit_score) {\n\t\t\t\tfields.unshift({field: '$score', direction: 'desc'});\n\t\t\t}\n\t\t} else {\n\t\t\tfor (i = 0, n = fields.length; i < n; i++) {\n\t\t\t\tif (fields[i].field === '$score') {\n\t\t\t\t\tfields.splice(i, 1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tmultipliers = [];\n\t\tfor (i = 0, n = fields.length; i < n; i++) {\n\t\t\tmultipliers.push(fields[i].direction === 'desc' ? -1 : 1);\n\t\t}\n\n\t\t// build function\n\t\tfields_count = fields.length;\n\t\tif (!fields_count) {\n\t\t\treturn null;\n\t\t} else if (fields_count === 1) {\n\t\t\tfield = fields[0].field;\n\t\t\tmultiplier = multipliers[0];\n\t\t\treturn function(a, b) {\n\t\t\t\treturn multiplier * cmp(\n\t\t\t\t\tget_field(field, a),\n\t\t\t\t\tget_field(field, b)\n\t\t\t\t);\n\t\t\t};\n\t\t} else {\n\t\t\treturn function(a, b) {\n\t\t\t\tvar i, result, a_value, b_value, field;\n\t\t\t\tfor (i = 0; i < fields_count; i++) {\n\t\t\t\t\tfield = fields[i].field;\n\t\t\t\t\tresult = multipliers[i] * cmp(\n\t\t\t\t\t\tget_field(field, a),\n\t\t\t\t\t\tget_field(field, b)\n\t\t\t\t\t);\n\t\t\t\t\tif (result) return result;\n\t\t\t\t}\n\t\t\t\treturn 0;\n\t\t\t};\n\t\t}\n\t};\n\n\t/**\n\t * Parses a search query and returns an object\n\t * with tokens and fields ready to be populated\n\t * with results.\n\t *\n\t * @param {string} query\n\t * @param {object} options\n\t * @returns {object}\n\t */\n\tSifter.prototype.prepareSearch = function(query, options) {\n\t\tif (typeof query === 'object') return query;\n\n\t\toptions = extend({}, options);\n\n\t\tvar option_fields     = options.fields;\n\t\tvar option_sort       = options.sort;\n\t\tvar option_sort_empty = options.sort_empty;\n\n\t\tif (option_fields && !is_array(option_fields)) options.fields = [option_fields];\n\t\tif (option_sort && !is_array(option_sort)) options.sort = [option_sort];\n\t\tif (option_sort_empty && !is_array(option_sort_empty)) options.sort_empty = [option_sort_empty];\n\n\t\treturn {\n\t\t\toptions : options,\n\t\t\tquery   : String(query || '').toLowerCase(),\n\t\t\ttokens  : this.tokenize(query),\n\t\t\ttotal   : 0,\n\t\t\titems   : []\n\t\t};\n\t};\n\n\t/**\n\t * Searches through all items and returns a sorted array of matches.\n\t *\n\t * The `options` parameter can contain:\n\t *\n\t *   - fields {string|array}\n\t *   - sort {array}\n\t *   - score {function}\n\t *   - filter {bool}\n\t *   - limit {integer}\n\t *\n\t * Returns an object containing:\n\t *\n\t *   - options {object}\n\t *   - query {string}\n\t *   - tokens {array}\n\t *   - total {int}\n\t *   - items {array}\n\t *\n\t * @param {string} query\n\t * @param {object} options\n\t * @returns {object}\n\t */\n\tSifter.prototype.search = function(query, options) {\n\t\tvar self = this, value, score, search, calculateScore;\n\t\tvar fn_sort;\n\t\tvar fn_score;\n\n\t\tsearch  = this.prepareSearch(query, options);\n\t\toptions = search.options;\n\t\tquery   = search.query;\n\n\t\t// generate result scoring function\n\t\tfn_score = options.score || self.getScoreFunction(search);\n\n\t\t// perform search and sort\n\t\tif (query.length) {\n\t\t\tself.iterator(self.items, function(item, id) {\n\t\t\t\tscore = fn_score(item);\n\t\t\t\tif (options.filter === false || score > 0) {\n\t\t\t\t\tsearch.items.push({'score': score, 'id': id});\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tself.iterator(self.items, function(item, id) {\n\t\t\t\tsearch.items.push({'score': 1, 'id': id});\n\t\t\t});\n\t\t}\n\n\t\tfn_sort = self.getSortFunction(search, options);\n\t\tif (fn_sort) search.items.sort(fn_sort);\n\n\t\t// apply limits\n\t\tsearch.total = search.items.length;\n\t\tif (typeof options.limit === 'number') {\n\t\t\tsearch.items = search.items.slice(0, options.limit);\n\t\t}\n\n\t\treturn search;\n\t};\n\n\t// utilities\n\t// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n\n\tvar cmp = function(a, b) {\n\t\tif (typeof a === 'number' && typeof b === 'number') {\n\t\t\treturn a > b ? 1 : (a < b ? -1 : 0);\n\t\t}\n\t\ta = asciifold(String(a || ''));\n\t\tb = asciifold(String(b || ''));\n\t\tif (a > b) return 1;\n\t\tif (b > a) return -1;\n\t\treturn 0;\n\t};\n\n\tvar extend = function(a, b) {\n\t\tvar i, n, k, object;\n\t\tfor (i = 1, n = arguments.length; i < n; i++) {\n\t\t\tobject = arguments[i];\n\t\t\tif (!object) continue;\n\t\t\tfor (k in object) {\n\t\t\t\tif (object.hasOwnProperty(k)) {\n\t\t\t\t\ta[k] = object[k];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn a;\n\t};\n\n\t/**\n\t * A property getter resolving dot-notation\n\t * @param  {Object}  obj     The root object to fetch property on\n\t * @param  {String}  name    The optionally dotted property name to fetch\n\t * @param  {Boolean} nesting Handle nesting or not\n\t * @return {Object}          The resolved property value\n\t */\n\tvar getattr = function(obj, name, nesting) {\n\t    if (!obj || !name) return;\n\t    if (!nesting) return obj[name];\n\t    var names = name.split(\".\");\n\t    while(names.length && (obj = obj[names.shift()]));\n\t    return obj;\n\t};\n\n\tvar trim = function(str) {\n\t\treturn (str + '').replace(/^\\s+|\\s+$|/g, '');\n\t};\n\n\tvar escape_regex = function(str) {\n\t\treturn (str + '').replace(/([.?*+^$[\\]\\\\(){}|-])/g, '\\\\$1');\n\t};\n\n\tvar is_array = Array.isArray || (typeof $ !== 'undefined' && $.isArray) || function(object) {\n\t\treturn Object.prototype.toString.call(object) === '[object Array]';\n\t};\n\n\tvar DIACRITICS = {\n\t\t'a': '[a]',\n\t\t'b': '[bB]',\n\t\t'c': '[cCc]',\n\t\t'd': '[dDd]',\n\t\t'e': '[e]',\n\t\t'f': '[f]',\n\t\t'g': '[g]',\n\t\t'h': '[h]',\n\t\t'i': '[iiI]',\n\t\t'j': '[j]',\n\t\t'k': '[k]',\n\t\t'l': '[l]',\n\t\t'n': '[nNn]',\n\t\t'o': '[o]',\n\t\t'p': '[p]',\n\t\t'q': '[qq]',\n\t\t'r': '[r]',\n\t\t's': '[sSs]',\n\t\t't': '[t]',\n\t\t'u': '[u]',\n\t\t'v': '[v]',\n\t\t'w': '[w]',\n\t\t'x': '[x]',\n\t\t'y': '[y]',\n\t\t'z': '[z]'\n\t};\n\n\tvar asciifold = (function() {\n\t\tvar i, n, k, chunk;\n\t\tvar foreignletters = '';\n\t\tvar lookup = {};\n\t\tfor (k in DIACRITICS) {\n\t\t\tif (DIACRITICS.hasOwnProperty(k)) {\n\t\t\t\tchunk = DIACRITICS[k].substring(2, DIACRITICS[k].length - 1);\n\t\t\t\tforeignletters += chunk;\n\t\t\t\tfor (i = 0, n = chunk.length; i < n; i++) {\n\t\t\t\t\tlookup[chunk.charAt(i)] = k;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvar regexp = new RegExp('[' +  foreignletters + ']', 'g');\n\t\treturn function(str) {\n\t\t\treturn str.replace(regexp, function(foreignletter) {\n\t\t\t\treturn lookup[foreignletter];\n\t\t\t}).toLowerCase();\n\t\t};\n\t})();\n\n\n\t// export\n\t// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n\n\treturn Sifter;\n}));\n\n\n\n/**\n * microplugin.js\n * Copyright (c) 2013 Brian Reavis & contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n * @author Brian Reavis <brian@thirdroute.com>\n */\n\n(function(root, factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine('microplugin', factory);\n\t} else if (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t} else {\n\t\troot.MicroPlugin = factory();\n\t}\n}(this, function() {\n\tvar MicroPlugin = {};\n\n\tMicroPlugin.mixin = function(Interface) {\n\t\tInterface.plugins = {};\n\n\t\t/**\n\t\t * Initializes the listed plugins (with options).\n\t\t * Acceptable formats:\n\t\t *\n\t\t * List (without options):\n\t\t *   ['a', 'b', 'c']\n\t\t *\n\t\t * List (with options):\n\t\t *   [{'name': 'a', options: {}}, {'name': 'b', options: {}}]\n\t\t *\n\t\t * Hash (with options):\n\t\t *   {'a': { ... }, 'b': { ... }, 'c': { ... }}\n\t\t *\n\t\t * @param {mixed} plugins\n\t\t */\n\t\tInterface.prototype.initializePlugins = function(plugins) {\n\t\t\tvar i, n, key;\n\t\t\tvar self  = this;\n\t\t\tvar queue = [];\n\n\t\t\tself.plugins = {\n\t\t\t\tnames     : [],\n\t\t\t\tsettings  : {},\n\t\t\t\trequested : {},\n\t\t\t\tloaded    : {}\n\t\t\t};\n\n\t\t\tif (utils.isArray(plugins)) {\n\t\t\t\tfor (i = 0, n = plugins.length; i < n; i++) {\n\t\t\t\t\tif (typeof plugins[i] === 'string') {\n\t\t\t\t\t\tqueue.push(plugins[i]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.plugins.settings[plugins[i].name] = plugins[i].options;\n\t\t\t\t\t\tqueue.push(plugins[i].name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (plugins) {\n\t\t\t\tfor (key in plugins) {\n\t\t\t\t\tif (plugins.hasOwnProperty(key)) {\n\t\t\t\t\t\tself.plugins.settings[key] = plugins[key];\n\t\t\t\t\t\tqueue.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\twhile (queue.length) {\n\t\t\t\tself.require(queue.shift());\n\t\t\t}\n\t\t};\n\n\t\tInterface.prototype.loadPlugin = function(name) {\n\t\t\tvar self    = this;\n\t\t\tvar plugins = self.plugins;\n\t\t\tvar plugin  = Interface.plugins[name];\n\n\t\t\tif (!Interface.plugins.hasOwnProperty(name)) {\n\t\t\t\tthrow new Error('Unable to find \"' +  name + '\" plugin');\n\t\t\t}\n\n\t\t\tplugins.requested[name] = true;\n\t\t\tplugins.loaded[name] = plugin.fn.apply(self, [self.plugins.settings[name] || {}]);\n\t\t\tplugins.names.push(name);\n\t\t};\n\n\t\t/**\n\t\t * Initializes a plugin.\n\t\t *\n\t\t * @param {string} name\n\t\t */\n\t\tInterface.prototype.require = function(name) {\n\t\t\tvar self = this;\n\t\t\tvar plugins = self.plugins;\n\n\t\t\tif (!self.plugins.loaded.hasOwnProperty(name)) {\n\t\t\t\tif (plugins.requested[name]) {\n\t\t\t\t\tthrow new Error('Plugin has circular dependency (\"' + name + '\")');\n\t\t\t\t}\n\t\t\t\tself.loadPlugin(name);\n\t\t\t}\n\n\t\t\treturn plugins.loaded[name];\n\t\t};\n\n\t\t/**\n\t\t * Registers a plugin.\n\t\t *\n\t\t * @param {string} name\n\t\t * @param {function} fn\n\t\t */\n\t\tInterface.define = function(name, fn) {\n\t\t\tInterface.plugins[name] = {\n\t\t\t\t'name' : name,\n\t\t\t\t'fn'   : fn\n\t\t\t};\n\t\t};\n\t};\n\n\tvar utils = {\n\t\tisArray: Array.isArray || function(vArg) {\n\t\t\treturn Object.prototype.toString.call(vArg) === '[object Array]';\n\t\t}\n\t};\n\n\treturn MicroPlugin;\n}));\n\n/**\n * selectize.js (v0.12.3)\n * Copyright (c) 20132015 Brian Reavis & contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n * @author Brian Reavis <brian@thirdroute.com>\n */\n\n/*jshint curly:false */\n/*jshint browser:true */\n\n(function(root, factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine('selectize', ['jquery','sifter','microplugin'], factory);\n\t} else if (typeof exports === 'object') {\n\t\tmodule.exports = factory(require('jquery'), require('sifter'), require('microplugin'));\n\t} else {\n\t\troot.Selectize = factory(root.jQuery, root.Sifter, root.MicroPlugin);\n\t}\n}(this, function($, Sifter, MicroPlugin) {\n\t'use strict';\n\n\tvar highlight = function($element, pattern) {\n\t\tif (typeof pattern === 'string' && !pattern.length) return;\n\t\tvar regex = (typeof pattern === 'string') ? new RegExp(pattern, 'i') : pattern;\n\t\n\t\tvar highlight = function(node) {\n\t\t\tvar skip = 0;\n\t\t\tif (node.nodeType === 3) {\n\t\t\t\tvar pos = node.data.search(regex);\n\t\t\t\tif (pos >= 0 && node.data.length > 0) {\n\t\t\t\t\tvar match = node.data.match(regex);\n\t\t\t\t\tvar spannode = document.createElement('span');\n\t\t\t\t\tspannode.className = 'highlight';\n\t\t\t\t\tvar middlebit = node.splitText(pos);\n\t\t\t\t\tvar endbit = middlebit.splitText(match[0].length);\n\t\t\t\t\tvar middleclone = middlebit.cloneNode(true);\n\t\t\t\t\tspannode.appendChild(middleclone);\n\t\t\t\t\tmiddlebit.parentNode.replaceChild(spannode, middlebit);\n\t\t\t\t\tskip = 1;\n\t\t\t\t}\n\t\t\t} else if (node.nodeType === 1 && node.childNodes && !/(script|style)/i.test(node.tagName)) {\n\t\t\t\tfor (var i = 0; i < node.childNodes.length; ++i) {\n\t\t\t\t\ti += highlight(node.childNodes[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn skip;\n\t\t};\n\t\n\t\treturn $element.each(function() {\n\t\t\thighlight(this);\n\t\t});\n\t};\n\t\n\t/**\n\t * removeHighlight fn copied from highlight v5 and\n\t * edited to remove with() and pass js strict mode\n\t */\n\tjQuery.fn.removeHighlight = function() {\n\t\treturn this.find(\"span.highlight\").each(function() {\n\t\t\tthis.parentNode.firstChild.nodeName;\n\t\t\tvar parent = this.parentNode;\n\t\t\tparent.replaceChild(this.firstChild, this);\n\t\t\tparent.normalize();\n\t\t}).end();\n\t};\n\t\n\t\n\tvar MicroEvent = function() {};\n\tMicroEvent.prototype = {\n\t\ton: function(event, fct){\n\t\t\tthis._events = this._events || {};\n\t\t\tthis._events[event] = this._events[event] || [];\n\t\t\tthis._events[event].push(fct);\n\t\t},\n\t\toff: function(event, fct){\n\t\t\tvar n = arguments.length;\n\t\t\tif (n === 0) return delete this._events;\n\t\t\tif (n === 1) return delete this._events[event];\n\t\n\t\t\tthis._events = this._events || {};\n\t\t\tif (event in this._events === false) return;\n\t\t\tthis._events[event].splice(this._events[event].indexOf(fct), 1);\n\t\t},\n\t\ttrigger: function(event /* , args... */){\n\t\t\tthis._events = this._events || {};\n\t\t\tif (event in this._events === false) return;\n\t\t\tfor (var i = 0; i < this._events[event].length; i++){\n\t\t\t\tthis._events[event][i].apply(this, Array.prototype.slice.call(arguments, 1));\n\t\t\t}\n\t\t}\n\t};\n\t\n\t/**\n\t * Mixin will delegate all MicroEvent.js function in the destination object.\n\t *\n\t * - MicroEvent.mixin(Foobar) will make Foobar able to use MicroEvent\n\t *\n\t * @param {object} the object which will support MicroEvent\n\t */\n\tMicroEvent.mixin = function(destObject){\n\t\tvar props = ['on', 'off', 'trigger'];\n\t\tfor (var i = 0; i < props.length; i++){\n\t\t\tdestObject.prototype[props[i]] = MicroEvent.prototype[props[i]];\n\t\t}\n\t};\n\t\n\tvar IS_MAC        = /Mac/.test(navigator.userAgent);\n\t\n\tvar KEY_A         = 65;\n\tvar KEY_COMMA     = 188;\n\tvar KEY_RETURN    = 13;\n\tvar KEY_ESC       = 27;\n\tvar KEY_LEFT      = 37;\n\tvar KEY_UP        = 38;\n\tvar KEY_P         = 80;\n\tvar KEY_RIGHT     = 39;\n\tvar KEY_DOWN      = 40;\n\tvar KEY_N         = 78;\n\tvar KEY_BACKSPACE = 8;\n\tvar KEY_DELETE    = 46;\n\tvar KEY_SHIFT     = 16;\n\tvar KEY_CMD       = IS_MAC ? 91 : 17;\n\tvar KEY_CTRL      = IS_MAC ? 18 : 17;\n\tvar KEY_TAB       = 9;\n\t\n\tvar TAG_SELECT    = 1;\n\tvar TAG_INPUT     = 2;\n\t\n\t// for now, android support in general is too spotty to support validity\n\tvar SUPPORTS_VALIDITY_API = !/android/i.test(window.navigator.userAgent) && !!document.createElement('input').validity;\n\t\n\t\n\tvar isset = function(object) {\n\t\treturn typeof object !== 'undefined';\n\t};\n\t\n\t/**\n\t * Converts a scalar to its best string representation\n\t * for hash keys and HTML attribute values.\n\t *\n\t * Transformations:\n\t *   'str'     -> 'str'\n\t *   null      -> ''\n\t *   undefined -> ''\n\t *   true      -> '1'\n\t *   false     -> '0'\n\t *   0         -> '0'\n\t *   1         -> '1'\n\t *\n\t * @param {string} value\n\t * @returns {string|null}\n\t */\n\tvar hash_key = function(value) {\n\t\tif (typeof value === 'undefined' || value === null) return null;\n\t\tif (typeof value === 'boolean') return value ? '1' : '0';\n\t\treturn value + '';\n\t};\n\t\n\t/**\n\t * Escapes a string for use within HTML.\n\t *\n\t * @param {string} str\n\t * @returns {string}\n\t */\n\tvar escape_html = function(str) {\n\t\treturn (str + '')\n\t\t\t.replace(/&/g, '&amp;')\n\t\t\t.replace(/</g, '&lt;')\n\t\t\t.replace(/>/g, '&gt;')\n\t\t\t.replace(/\"/g, '&quot;');\n\t};\n\t\n\t/**\n\t * Escapes \"$\" characters in replacement strings.\n\t *\n\t * @param {string} str\n\t * @returns {string}\n\t */\n\tvar escape_replace = function(str) {\n\t\treturn (str + '').replace(/\\$/g, '$$$$');\n\t};\n\t\n\tvar hook = {};\n\t\n\t/**\n\t * Wraps `method` on `self` so that `fn`\n\t * is invoked before the original method.\n\t *\n\t * @param {object} self\n\t * @param {string} method\n\t * @param {function} fn\n\t */\n\thook.before = function(self, method, fn) {\n\t\tvar original = self[method];\n\t\tself[method] = function() {\n\t\t\tfn.apply(self, arguments);\n\t\t\treturn original.apply(self, arguments);\n\t\t};\n\t};\n\t\n\t/**\n\t * Wraps `method` on `self` so that `fn`\n\t * is invoked after the original method.\n\t *\n\t * @param {object} self\n\t * @param {string} method\n\t * @param {function} fn\n\t */\n\thook.after = function(self, method, fn) {\n\t\tvar original = self[method];\n\t\tself[method] = function() {\n\t\t\tvar result = original.apply(self, arguments);\n\t\t\tfn.apply(self, arguments);\n\t\t\treturn result;\n\t\t};\n\t};\n\t\n\t/**\n\t * Wraps `fn` so that it can only be invoked once.\n\t *\n\t * @param {function} fn\n\t * @returns {function}\n\t */\n\tvar once = function(fn) {\n\t\tvar called = false;\n\t\treturn function() {\n\t\t\tif (called) return;\n\t\t\tcalled = true;\n\t\t\tfn.apply(this, arguments);\n\t\t};\n\t};\n\t\n\t/**\n\t * Wraps `fn` so that it can only be called once\n\t * every `delay` milliseconds (invoked on the falling edge).\n\t *\n\t * @param {function} fn\n\t * @param {int} delay\n\t * @returns {function}\n\t */\n\tvar debounce = function(fn, delay) {\n\t\tvar timeout;\n\t\treturn function() {\n\t\t\tvar self = this;\n\t\t\tvar args = arguments;\n\t\t\twindow.clearTimeout(timeout);\n\t\t\ttimeout = window.setTimeout(function() {\n\t\t\t\tfn.apply(self, args);\n\t\t\t}, delay);\n\t\t};\n\t};\n\t\n\t/**\n\t * Debounce all fired events types listed in `types`\n\t * while executing the provided `fn`.\n\t *\n\t * @param {object} self\n\t * @param {array} types\n\t * @param {function} fn\n\t */\n\tvar debounce_events = function(self, types, fn) {\n\t\tvar type;\n\t\tvar trigger = self.trigger;\n\t\tvar event_args = {};\n\t\n\t\t// override trigger method\n\t\tself.trigger = function() {\n\t\t\tvar type = arguments[0];\n\t\t\tif (types.indexOf(type) !== -1) {\n\t\t\t\tevent_args[type] = arguments;\n\t\t\t} else {\n\t\t\t\treturn trigger.apply(self, arguments);\n\t\t\t}\n\t\t};\n\t\n\t\t// invoke provided function\n\t\tfn.apply(self, []);\n\t\tself.trigger = trigger;\n\t\n\t\t// trigger queued events\n\t\tfor (type in event_args) {\n\t\t\tif (event_args.hasOwnProperty(type)) {\n\t\t\t\ttrigger.apply(self, event_args[type]);\n\t\t\t}\n\t\t}\n\t};\n\t\n\t/**\n\t * A workaround for http://bugs.jquery.com/ticket/6696\n\t *\n\t * @param {object} $parent - Parent element to listen on.\n\t * @param {string} event - Event name.\n\t * @param {string} selector - Descendant selector to filter by.\n\t * @param {function} fn - Event handler.\n\t */\n\tvar watchChildEvent = function($parent, event, selector, fn) {\n\t\t$parent.on(event, selector, function(e) {\n\t\t\tvar child = e.target;\n\t\t\twhile (child && child.parentNode !== $parent[0]) {\n\t\t\t\tchild = child.parentNode;\n\t\t\t}\n\t\t\te.currentTarget = child;\n\t\t\treturn fn.apply(this, [e]);\n\t\t});\n\t};\n\t\n\t/**\n\t * Determines the current selection within a text input control.\n\t * Returns an object containing:\n\t *   - start\n\t *   - length\n\t *\n\t * @param {object} input\n\t * @returns {object}\n\t */\n\tvar getSelection = function(input) {\n\t\tvar result = {};\n\t\tif ('selectionStart' in input) {\n\t\t\tresult.start = input.selectionStart;\n\t\t\tresult.length = input.selectionEnd - result.start;\n\t\t} else if (document.selection) {\n\t\t\tinput.focus();\n\t\t\tvar sel = document.selection.createRange();\n\t\t\tvar selLen = document.selection.createRange().text.length;\n\t\t\tsel.moveStart('character', -input.value.length);\n\t\t\tresult.start = sel.text.length - selLen;\n\t\t\tresult.length = selLen;\n\t\t}\n\t\treturn result;\n\t};\n\t\n\t/**\n\t * Copies CSS properties from one element to another.\n\t *\n\t * @param {object} $from\n\t * @param {object} $to\n\t * @param {array} properties\n\t */\n\tvar transferStyles = function($from, $to, properties) {\n\t\tvar i, n, styles = {};\n\t\tif (properties) {\n\t\t\tfor (i = 0, n = properties.length; i < n; i++) {\n\t\t\t\tstyles[properties[i]] = $from.css(properties[i]);\n\t\t\t}\n\t\t} else {\n\t\t\tstyles = $from.css();\n\t\t}\n\t\t$to.css(styles);\n\t};\n\t\n\t/**\n\t * Measures the width of a string within a\n\t * parent element (in pixels).\n\t *\n\t * @param {string} str\n\t * @param {object} $parent\n\t * @returns {int}\n\t */\n\tvar measureString = function(str, $parent) {\n\t\tif (!str) {\n\t\t\treturn 0;\n\t\t}\n\t\n\t\tvar $test = $('<test>').css({\n\t\t\tposition: 'absolute',\n\t\t\ttop: -99999,\n\t\t\tleft: -99999,\n\t\t\twidth: 'auto',\n\t\t\tpadding: 0,\n\t\t\twhiteSpace: 'pre'\n\t\t}).text(str).appendTo('body');\n\t\n\t\ttransferStyles($parent, $test, [\n\t\t\t'letterSpacing',\n\t\t\t'fontSize',\n\t\t\t'fontFamily',\n\t\t\t'fontWeight',\n\t\t\t'textTransform'\n\t\t]);\n\t\n\t\tvar width = $test.width();\n\t\t$test.remove();\n\t\n\t\treturn width;\n\t};\n\t\n\t/**\n\t * Sets up an input to grow horizontally as the user\n\t * types. If the value is changed manually, you can\n\t * trigger the \"update\" handler to resize:\n\t *\n\t * $input.trigger('update');\n\t *\n\t * @param {object} $input\n\t */\n\tvar autoGrow = function($input) {\n\t\tvar currentWidth = null;\n\t\n\t\tvar update = function(e, options) {\n\t\t\tvar value, keyCode, printable, placeholder, width;\n\t\t\tvar shift, character, selection;\n\t\t\te = e || window.event || {};\n\t\t\toptions = options || {};\n\t\n\t\t\tif (e.metaKey || e.altKey) return;\n\t\t\tif (!options.force && $input.data('grow') === false) return;\n\t\n\t\t\tvalue = $input.val();\n\t\t\tif (e.type && e.type.toLowerCase() === 'keydown') {\n\t\t\t\tkeyCode = e.keyCode;\n\t\t\t\tprintable = (\n\t\t\t\t\t(keyCode >= 97 && keyCode <= 122) || // a-z\n\t\t\t\t\t(keyCode >= 65 && keyCode <= 90)  || // A-Z\n\t\t\t\t\t(keyCode >= 48 && keyCode <= 57)  || // 0-9\n\t\t\t\t\tkeyCode === 32 // space\n\t\t\t\t);\n\t\n\t\t\t\tif (keyCode === KEY_DELETE || keyCode === KEY_BACKSPACE) {\n\t\t\t\t\tselection = getSelection($input[0]);\n\t\t\t\t\tif (selection.length) {\n\t\t\t\t\t\tvalue = value.substring(0, selection.start) + value.substring(selection.start + selection.length);\n\t\t\t\t\t} else if (keyCode === KEY_BACKSPACE && selection.start) {\n\t\t\t\t\t\tvalue = value.substring(0, selection.start - 1) + value.substring(selection.start + 1);\n\t\t\t\t\t} else if (keyCode === KEY_DELETE && typeof selection.start !== 'undefined') {\n\t\t\t\t\t\tvalue = value.substring(0, selection.start) + value.substring(selection.start + 1);\n\t\t\t\t\t}\n\t\t\t\t} else if (printable) {\n\t\t\t\t\tshift = e.shiftKey;\n\t\t\t\t\tcharacter = String.fromCharCode(e.keyCode);\n\t\t\t\t\tif (shift) character = character.toUpperCase();\n\t\t\t\t\telse character = character.toLowerCase();\n\t\t\t\t\tvalue += character;\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tplaceholder = $input.attr('placeholder');\n\t\t\tif (!value && placeholder) {\n\t\t\t\tvalue = placeholder;\n\t\t\t}\n\t\n\t\t\twidth = measureString(value, $input) + 4;\n\t\t\tif (width !== currentWidth) {\n\t\t\t\tcurrentWidth = width;\n\t\t\t\t$input.width(width);\n\t\t\t\t$input.triggerHandler('resize');\n\t\t\t}\n\t\t};\n\t\n\t\t$input.on('keydown keyup update blur', update);\n\t\tupdate();\n\t};\n\t\n\tvar domToString = function(d) {\n\t\tvar tmp = document.createElement('div');\n\t\n\t\ttmp.appendChild(d.cloneNode(true));\n\t\n\t\treturn tmp.innerHTML;\n\t};\n\t\n\tvar logError = function(message, options){\n\t\tif(!options) options = {};\n\t\tvar component = \"Selectize\";\n\t\n\t\tconsole.error(component + \": \" + message)\n\t\n\t\tif(options.explanation){\n\t\t\t// console.group is undefined in <IE11\n\t\t\tif(console.group) console.group();\n\t\t\tconsole.error(options.explanation);\n\t\t\tif(console.group) console.groupEnd();\n\t\t}\n\t}\n\t\n\t\n\tvar Selectize = function($input, settings) {\n\t\tvar key, i, n, dir, input, self = this;\n\t\tinput = $input[0];\n\t\tinput.selectize = self;\n\t\n\t\t// detect rtl environment\n\t\tvar computedStyle = window.getComputedStyle && window.getComputedStyle(input, null);\n\t\tdir = computedStyle ? computedStyle.getPropertyValue('direction') : input.currentStyle && input.currentStyle.direction;\n\t\tdir = dir || $input.parents('[dir]:first').attr('dir') || '';\n\t\n\t\t// setup default state\n\t\t$.extend(self, {\n\t\t\torder            : 0,\n\t\t\tsettings         : settings,\n\t\t\t$input           : $input,\n\t\t\ttabIndex         : $input.attr('tabindex') || '',\n\t\t\ttagType          : input.tagName.toLowerCase() === 'select' ? TAG_SELECT : TAG_INPUT,\n\t\t\trtl              : /rtl/i.test(dir),\n\t\n\t\t\teventNS          : '.selectize' + (++Selectize.count),\n\t\t\thighlightedValue : null,\n\t\t\tisOpen           : false,\n\t\t\tisDisabled       : false,\n\t\t\tisRequired       : $input.is('[required]'),\n\t\t\tisInvalid        : false,\n\t\t\tisLocked         : false,\n\t\t\tisFocused        : false,\n\t\t\tisInputHidden    : false,\n\t\t\tisSetup          : false,\n\t\t\tisShiftDown      : false,\n\t\t\tisCmdDown        : false,\n\t\t\tisCtrlDown       : false,\n\t\t\tignoreFocus      : false,\n\t\t\tignoreBlur       : false,\n\t\t\tignoreHover      : false,\n\t\t\thasOptions       : false,\n\t\t\tcurrentResults   : null,\n\t\t\tlastValue        : '',\n\t\t\tcaretPos         : 0,\n\t\t\tloading          : 0,\n\t\t\tloadedSearches   : {},\n\t\n\t\t\t$activeOption    : null,\n\t\t\t$activeItems     : [],\n\t\n\t\t\toptgroups        : {},\n\t\t\toptions          : {},\n\t\t\tuserOptions      : {},\n\t\t\titems            : [],\n\t\t\trenderCache      : {},\n\t\t\tonSearchChange   : settings.loadThrottle === null ? self.onSearchChange : debounce(self.onSearchChange, settings.loadThrottle)\n\t\t});\n\t\n\t\t// search system\n\t\tself.sifter = new Sifter(this.options, {diacritics: settings.diacritics});\n\t\n\t\t// build options table\n\t\tif (self.settings.options) {\n\t\t\tfor (i = 0, n = self.settings.options.length; i < n; i++) {\n\t\t\t\tself.registerOption(self.settings.options[i]);\n\t\t\t}\n\t\t\tdelete self.settings.options;\n\t\t}\n\t\n\t\t// build optgroup table\n\t\tif (self.settings.optgroups) {\n\t\t\tfor (i = 0, n = self.settings.optgroups.length; i < n; i++) {\n\t\t\t\tself.registerOptionGroup(self.settings.optgroups[i]);\n\t\t\t}\n\t\t\tdelete self.settings.optgroups;\n\t\t}\n\t\n\t\t// option-dependent defaults\n\t\tself.settings.mode = self.settings.mode || (self.settings.maxItems === 1 ? 'single' : 'multi');\n\t\tif (typeof self.settings.hideSelected !== 'boolean') {\n\t\t\tself.settings.hideSelected = self.settings.mode === 'multi';\n\t\t}\n\t\n\t\tself.initializePlugins(self.settings.plugins);\n\t\tself.setupCallbacks();\n\t\tself.setupTemplates();\n\t\tself.setup();\n\t};\n\t\n\t// mixins\n\t// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n\t\n\tMicroEvent.mixin(Selectize);\n\t\n\tif(typeof MicroPlugin !== \"undefined\"){\n\t\tMicroPlugin.mixin(Selectize);\n\t}else{\n\t\tlogError(\"Dependency MicroPlugin is missing\",\n\t\t\t{explanation:\n\t\t\t\t\"Make sure you either: (1) are using the \\\"standalone\\\" \"+\n\t\t\t\t\"version of Selectize, or (2) require MicroPlugin before you \"+\n\t\t\t\t\"load Selectize.\"}\n\t\t);\n\t}\n\t\n\t\n\t// methods\n\t// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n\t\n\t$.extend(Selectize.prototype, {\n\t\n\t\t/**\n\t\t * Creates all elements and sets up event bindings.\n\t\t */\n\t\tsetup: function() {\n\t\t\tvar self      = this;\n\t\t\tvar settings  = self.settings;\n\t\t\tvar eventNS   = self.eventNS;\n\t\t\tvar $window   = $(window);\n\t\t\tvar $document = $(document);\n\t\t\tvar $input    = self.$input;\n\t\n\t\t\tvar $wrapper;\n\t\t\tvar $control;\n\t\t\tvar $control_input;\n\t\t\tvar $dropdown;\n\t\t\tvar $dropdown_content;\n\t\t\tvar $dropdown_parent;\n\t\t\tvar inputMode;\n\t\t\tvar timeout_blur;\n\t\t\tvar timeout_focus;\n\t\t\tvar classes;\n\t\t\tvar classes_plugins;\n\t\t\tvar inputId;\n\t\n\t\t\tinputMode         = self.settings.mode;\n\t\t\tclasses           = $input.attr('class') || '';\n\t\n\t\t\t$wrapper          = $('<div>').addClass(settings.wrapperClass).addClass(classes).addClass(inputMode);\n\t\t\t$control          = $('<div>').addClass(settings.inputClass).addClass('items').appendTo($wrapper);\n\t\t\t$control_input    = $('<input type=\"text\" autocomplete=\"off\" />').appendTo($control).attr('tabindex', $input.is(':disabled') ? '-1' : self.tabIndex);\n\t\t\t$dropdown_parent  = $(settings.dropdownParent || $wrapper);\n\t\t\t$dropdown         = $('<div>').addClass(settings.dropdownClass).addClass(inputMode).hide().appendTo($dropdown_parent);\n\t\t\t$dropdown_content = $('<div>').addClass(settings.dropdownContentClass).appendTo($dropdown);\n\t\n\t\t\tif(inputId = $input.attr('id')) {\n\t\t\t\t$control_input.attr('id', inputId + '-selectized');\n\t\t\t\t$(\"label[for='\"+inputId+\"']\").attr('for', inputId + '-selectized');\n\t\t\t}\n\t\n\t\t\tif(self.settings.copyClassesToDropdown) {\n\t\t\t\t$dropdown.addClass(classes);\n\t\t\t}\n\t\n\t\t\t$wrapper.css({\n\t\t\t\twidth: $input[0].style.width\n\t\t\t});\n\t\n\t\t\tif (self.plugins.names.length) {\n\t\t\t\tclasses_plugins = 'plugin-' + self.plugins.names.join(' plugin-');\n\t\t\t\t$wrapper.addClass(classes_plugins);\n\t\t\t\t$dropdown.addClass(classes_plugins);\n\t\t\t}\n\t\n\t\t\tif ((settings.maxItems === null || settings.maxItems > 1) && self.tagType === TAG_SELECT) {\n\t\t\t\t$input.attr('multiple', 'multiple');\n\t\t\t}\n\t\n\t\t\tif (self.settings.placeholder) {\n\t\t\t\t$control_input.attr('placeholder', settings.placeholder);\n\t\t\t}\n\t\n\t\t\t// if splitOn was not passed in, construct it from the delimiter to allow pasting universally\n\t\t\tif (!self.settings.splitOn && self.settings.delimiter) {\n\t\t\t\tvar delimiterEscaped = self.settings.delimiter.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n\t\t\t\tself.settings.splitOn = new RegExp('\\\\s*' + delimiterEscaped + '+\\\\s*');\n\t\t\t}\n\t\n\t\t\tif ($input.attr('autocorrect')) {\n\t\t\t\t$control_input.attr('autocorrect', $input.attr('autocorrect'));\n\t\t\t}\n\t\n\t\t\tif ($input.attr('autocapitalize')) {\n\t\t\t\t$control_input.attr('autocapitalize', $input.attr('autocapitalize'));\n\t\t\t}\n\t\n\t\t\tself.$wrapper          = $wrapper;\n\t\t\tself.$control          = $control;\n\t\t\tself.$control_input    = $control_input;\n\t\t\tself.$dropdown         = $dropdown;\n\t\t\tself.$dropdown_content = $dropdown_content;\n\t\n\t\t\t$dropdown.on('mouseenter', '[data-selectable]', function() { return self.onOptionHover.apply(self, arguments); });\n\t\t\t$dropdown.on('mousedown click', '[data-selectable]', function() { return self.onOptionSelect.apply(self, arguments); });\n\t\t\twatchChildEvent($control, 'mousedown', '*:not(input)', function() { return self.onItemSelect.apply(self, arguments); });\n\t\t\tautoGrow($control_input);\n\t\n\t\t\t$control.on({\n\t\t\t\tmousedown : function() { return self.onMouseDown.apply(self, arguments); },\n\t\t\t\tclick     : function() { return self.onClick.apply(self, arguments); }\n\t\t\t});\n\t\n\t\t\t$control_input.on({\n\t\t\t\tmousedown : function(e) { e.stopPropagation(); },\n\t\t\t\tkeydown   : function() { return self.onKeyDown.apply(self, arguments); },\n\t\t\t\tkeyup     : function() { return self.onKeyUp.apply(self, arguments); },\n\t\t\t\tkeypress  : function() { return self.onKeyPress.apply(self, arguments); },\n\t\t\t\tresize    : function() { self.positionDropdown.apply(self, []); },\n\t\t\t\tblur      : function() { return self.onBlur.apply(self, arguments); },\n\t\t\t\tfocus     : function() { self.ignoreBlur = false; return self.onFocus.apply(self, arguments); },\n\t\t\t\tpaste     : function() { return self.onPaste.apply(self, arguments); }\n\t\t\t});\n\t\n\t\t\t$document.on('keydown' + eventNS, function(e) {\n\t\t\t\tself.isCmdDown = e[IS_MAC ? 'metaKey' : 'ctrlKey'];\n\t\t\t\tself.isCtrlDown = e[IS_MAC ? 'altKey' : 'ctrlKey'];\n\t\t\t\tself.isShiftDown = e.shiftKey;\n\t\t\t});\n\t\n\t\t\t$document.on('keyup' + eventNS, function(e) {\n\t\t\t\tif (e.keyCode === KEY_CTRL) self.isCtrlDown = false;\n\t\t\t\tif (e.keyCode === KEY_SHIFT) self.isShiftDown = false;\n\t\t\t\tif (e.keyCode === KEY_CMD) self.isCmdDown = false;\n\t\t\t});\n\t\n\t\t\t$document.on('mousedown' + eventNS, function(e) {\n\t\t\t\tif (self.isFocused) {\n\t\t\t\t\t// prevent events on the dropdown scrollbar from causing the control to blur\n\t\t\t\t\tif (e.target === self.$dropdown[0] || e.target.parentNode === self.$dropdown[0]) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\t// blur on click outside\n\t\t\t\t\tif (!self.$control.has(e.target).length && e.target !== self.$control[0]) {\n\t\t\t\t\t\tself.blur(e.target);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\n\t\t\t$window.on(['scroll' + eventNS, 'resize' + eventNS].join(' '), function() {\n\t\t\t\tif (self.isOpen) {\n\t\t\t\t\tself.positionDropdown.apply(self, arguments);\n\t\t\t\t}\n\t\t\t});\n\t\t\t$window.on('mousemove' + eventNS, function() {\n\t\t\t\tself.ignoreHover = false;\n\t\t\t});\n\t\n\t\t\t// store original children and tab index so that they can be\n\t\t\t// restored when the destroy() method is called.\n\t\t\tthis.revertSettings = {\n\t\t\t\t$children : $input.children().detach(),\n\t\t\t\ttabindex  : $input.attr('tabindex')\n\t\t\t};\n\t\n\t\t\t$input.attr('tabindex', -1).hide().after(self.$wrapper);\n\t\n\t\t\tif ($.isArray(settings.items)) {\n\t\t\t\tself.setValue(settings.items);\n\t\t\t\tdelete settings.items;\n\t\t\t}\n\t\n\t\t\t// feature detect for the validation API\n\t\t\tif (SUPPORTS_VALIDITY_API) {\n\t\t\t\t$input.on('invalid' + eventNS, function(e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tself.isInvalid = true;\n\t\t\t\t\tself.refreshState();\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\tself.updateOriginalInput();\n\t\t\tself.refreshItems();\n\t\t\tself.refreshState();\n\t\t\tself.updatePlaceholder();\n\t\t\tself.isSetup = true;\n\t\n\t\t\tif ($input.is(':disabled')) {\n\t\t\t\tself.disable();\n\t\t\t}\n\t\n\t\t\tself.on('change', this.onChange);\n\t\n\t\t\t$input.data('selectize', self);\n\t\t\t$input.addClass('selectized');\n\t\t\tself.trigger('initialize');\n\t\n\t\t\t// preload options\n\t\t\tif (settings.preload === true) {\n\t\t\t\tself.onSearchChange('');\n\t\t\t}\n\t\n\t\t},\n\t\n\t\t/**\n\t\t * Sets up default rendering functions.\n\t\t */\n\t\tsetupTemplates: function() {\n\t\t\tvar self = this;\n\t\t\tvar field_label = self.settings.labelField;\n\t\t\tvar field_optgroup = self.settings.optgroupLabelField;\n\t\n\t\t\tvar templates = {\n\t\t\t\t'optgroup': function(data) {\n\t\t\t\t\treturn '<div class=\"optgroup\">' + data.html + '</div>';\n\t\t\t\t},\n\t\t\t\t'optgroup_header': function(data, escape) {\n\t\t\t\t\treturn '<div class=\"optgroup-header\">' + escape(data[field_optgroup]) + '</div>';\n\t\t\t\t},\n\t\t\t\t'option': function(data, escape) {\n\t\t\t\t\treturn '<div class=\"option\">' + escape(data[field_label]) + '</div>';\n\t\t\t\t},\n\t\t\t\t'item': function(data, escape) {\n\t\t\t\t\treturn '<div class=\"item\">' + escape(data[field_label]) + '</div>';\n\t\t\t\t},\n\t\t\t\t'option_create': function(data, escape) {\n\t\t\t\t\treturn '<div class=\"create\">Add <strong>' + escape(data.input) + '</strong>&hellip;</div>';\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tself.settings.render = $.extend({}, templates, self.settings.render);\n\t\t},\n\t\n\t\t/**\n\t\t * Maps fired events to callbacks provided\n\t\t * in the settings used when creating the control.\n\t\t */\n\t\tsetupCallbacks: function() {\n\t\t\tvar key, fn, callbacks = {\n\t\t\t\t'initialize'      : 'onInitialize',\n\t\t\t\t'change'          : 'onChange',\n\t\t\t\t'item_add'        : 'onItemAdd',\n\t\t\t\t'item_remove'     : 'onItemRemove',\n\t\t\t\t'clear'           : 'onClear',\n\t\t\t\t'option_add'      : 'onOptionAdd',\n\t\t\t\t'option_remove'   : 'onOptionRemove',\n\t\t\t\t'option_clear'    : 'onOptionClear',\n\t\t\t\t'optgroup_add'    : 'onOptionGroupAdd',\n\t\t\t\t'optgroup_remove' : 'onOptionGroupRemove',\n\t\t\t\t'optgroup_clear'  : 'onOptionGroupClear',\n\t\t\t\t'dropdown_open'   : 'onDropdownOpen',\n\t\t\t\t'dropdown_close'  : 'onDropdownClose',\n\t\t\t\t'type'            : 'onType',\n\t\t\t\t'load'            : 'onLoad',\n\t\t\t\t'focus'           : 'onFocus',\n\t\t\t\t'blur'            : 'onBlur'\n\t\t\t};\n\t\n\t\t\tfor (key in callbacks) {\n\t\t\t\tif (callbacks.hasOwnProperty(key)) {\n\t\t\t\t\tfn = this.settings[callbacks[key]];\n\t\t\t\t\tif (fn) this.on(key, fn);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Triggered when the main control element\n\t\t * has a click event.\n\t\t *\n\t\t * @param {object} e\n\t\t * @return {boolean}\n\t\t */\n\t\tonClick: function(e) {\n\t\t\tvar self = this;\n\t\n\t\t\t// necessary for mobile webkit devices (manual focus triggering\n\t\t\t// is ignored unless invoked within a click event)\n\t\t\tif (!self.isFocused) {\n\t\t\t\tself.focus();\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Triggered when the main control element\n\t\t * has a mouse down event.\n\t\t *\n\t\t * @param {object} e\n\t\t * @return {boolean}\n\t\t */\n\t\tonMouseDown: function(e) {\n\t\t\tvar self = this;\n\t\t\tvar defaultPrevented = e.isDefaultPrevented();\n\t\t\tvar $target = $(e.target);\n\t\n\t\t\tif (self.isFocused) {\n\t\t\t\t// retain focus by preventing native handling. if the\n\t\t\t\t// event target is the input it should not be modified.\n\t\t\t\t// otherwise, text selection within the input won't work.\n\t\t\t\tif (e.target !== self.$control_input[0]) {\n\t\t\t\t\tif (self.settings.mode === 'single') {\n\t\t\t\t\t\t// toggle dropdown\n\t\t\t\t\t\tself.isOpen ? self.close() : self.open();\n\t\t\t\t\t} else if (!defaultPrevented) {\n\t\t\t\t\t\tself.setActiveItem(null);\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// give control focus\n\t\t\t\tif (!defaultPrevented) {\n\t\t\t\t\twindow.setTimeout(function() {\n\t\t\t\t\t\tself.focus();\n\t\t\t\t\t}, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Triggered when the value of the control has been changed.\n\t\t * This should propagate the event to the original DOM\n\t\t * input / select element.\n\t\t */\n\t\tonChange: function() {\n\t\t\tthis.$input.trigger('change');\n\t\t},\n\t\n\t\t/**\n\t\t * Triggered on <input> paste.\n\t\t *\n\t\t * @param {object} e\n\t\t * @returns {boolean}\n\t\t */\n\t\tonPaste: function(e) {\n\t\t\tvar self = this;\n\t\n\t\t\tif (self.isFull() || self.isInputHidden || self.isLocked) {\n\t\t\t\te.preventDefault();\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\t// If a regex or string is included, this will split the pasted\n\t\t\t// input and create Items for each separate value\n\t\t\tif (self.settings.splitOn) {\n\t\n\t\t\t\t// Wait for pasted text to be recognized in value\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tvar pastedText = self.$control_input.val();\n\t\t\t\t\tif(!pastedText.match(self.settings.splitOn)){ return }\n\t\n\t\t\t\t\tvar splitInput = $.trim(pastedText).split(self.settings.splitOn);\n\t\t\t\t\tfor (var i = 0, n = splitInput.length; i < n; i++) {\n\t\t\t\t\t\tself.createItem(splitInput[i]);\n\t\t\t\t\t}\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Triggered on <input> keypress.\n\t\t *\n\t\t * @param {object} e\n\t\t * @returns {boolean}\n\t\t */\n\t\tonKeyPress: function(e) {\n\t\t\tif (this.isLocked) return e && e.preventDefault();\n\t\t\tvar character = String.fromCharCode(e.keyCode || e.which);\n\t\t\tif (this.settings.create && this.settings.mode === 'multi' && character === this.settings.delimiter) {\n\t\t\t\tthis.createItem();\n\t\t\t\te.preventDefault();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Triggered on <input> keydown.\n\t\t *\n\t\t * @param {object} e\n\t\t * @returns {boolean}\n\t\t */\n\t\tonKeyDown: function(e) {\n\t\t\tvar isInput = e.target === this.$control_input[0];\n\t\t\tvar self = this;\n\t\n\t\t\tif (self.isLocked) {\n\t\t\t\tif (e.keyCode !== KEY_TAB) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\tswitch (e.keyCode) {\n\t\t\t\tcase KEY_A:\n\t\t\t\t\tif (self.isCmdDown) {\n\t\t\t\t\t\tself.selectAll();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase KEY_ESC:\n\t\t\t\t\tif (self.isOpen) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\tself.close();\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\tcase KEY_N:\n\t\t\t\t\tif (!e.ctrlKey || e.altKey) break;\n\t\t\t\tcase KEY_DOWN:\n\t\t\t\t\tif (!self.isOpen && self.hasOptions) {\n\t\t\t\t\t\tself.open();\n\t\t\t\t\t} else if (self.$activeOption) {\n\t\t\t\t\t\tself.ignoreHover = true;\n\t\t\t\t\t\tvar $next = self.getAdjacentOption(self.$activeOption, 1);\n\t\t\t\t\t\tif ($next.length) self.setActiveOption($next, true, true);\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\tcase KEY_P:\n\t\t\t\t\tif (!e.ctrlKey || e.altKey) break;\n\t\t\t\tcase KEY_UP:\n\t\t\t\t\tif (self.$activeOption) {\n\t\t\t\t\t\tself.ignoreHover = true;\n\t\t\t\t\t\tvar $prev = self.getAdjacentOption(self.$activeOption, -1);\n\t\t\t\t\t\tif ($prev.length) self.setActiveOption($prev, true, true);\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\tcase KEY_RETURN:\n\t\t\t\t\tif (self.isOpen && self.$activeOption) {\n\t\t\t\t\t\tself.onOptionSelect({currentTarget: self.$activeOption});\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\tcase KEY_LEFT:\n\t\t\t\t\tself.advanceSelection(-1, e);\n\t\t\t\t\treturn;\n\t\t\t\tcase KEY_RIGHT:\n\t\t\t\t\tself.advanceSelection(1, e);\n\t\t\t\t\treturn;\n\t\t\t\tcase KEY_TAB:\n\t\t\t\t\tif (self.settings.selectOnTab && self.isOpen && self.$activeOption) {\n\t\t\t\t\t\tself.onOptionSelect({currentTarget: self.$activeOption});\n\t\n\t\t\t\t\t\t// Default behaviour is to jump to the next field, we only want this\n\t\t\t\t\t\t// if the current field doesn't accept any more entries\n\t\t\t\t\t\tif (!self.isFull()) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (self.settings.create && self.createItem()) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\tcase KEY_BACKSPACE:\n\t\t\t\tcase KEY_DELETE:\n\t\t\t\t\tself.deleteSelection(e);\n\t\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\tif ((self.isFull() || self.isInputHidden) && !(IS_MAC ? e.metaKey : e.ctrlKey)) {\n\t\t\t\te.preventDefault();\n\t\t\t\treturn;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Triggered on <input> keyup.\n\t\t *\n\t\t * @param {object} e\n\t\t * @returns {boolean}\n\t\t */\n\t\tonKeyUp: function(e) {\n\t\t\tvar self = this;\n\t\n\t\t\tif (self.isLocked) return e && e.preventDefault();\n\t\t\tvar value = self.$control_input.val() || '';\n\t\t\tif (self.lastValue !== value) {\n\t\t\t\tself.lastValue = value;\n\t\t\t\tself.onSearchChange(value);\n\t\t\t\tself.refreshOptions();\n\t\t\t\tself.trigger('type', value);\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Invokes the user-provide option provider / loader.\n\t\t *\n\t\t * Note: this function is debounced in the Selectize\n\t\t * constructor (by `settings.loadThrottle` milliseconds)\n\t\t *\n\t\t * @param {string} value\n\t\t */\n\t\tonSearchChange: function(value) {\n\t\t\tvar self = this;\n\t\t\tvar fn = self.settings.load;\n\t\t\tif (!fn) return;\n\t\t\tif (self.loadedSearches.hasOwnProperty(value)) return;\n\t\t\tself.loadedSearches[value] = true;\n\t\t\tself.load(function(callback) {\n\t\t\t\tfn.apply(self, [value, callback]);\n\t\t\t});\n\t\t},\n\t\n\t\t/**\n\t\t * Triggered on <input> focus.\n\t\t *\n\t\t * @param {object} e (optional)\n\t\t * @returns {boolean}\n\t\t */\n\t\tonFocus: function(e) {\n\t\t\tvar self = this;\n\t\t\tvar wasFocused = self.isFocused;\n\t\n\t\t\tif (self.isDisabled) {\n\t\t\t\tself.blur();\n\t\t\t\te && e.preventDefault();\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\tif (self.ignoreFocus) return;\n\t\t\tself.isFocused = true;\n\t\t\tif (self.settings.preload === 'focus') self.onSearchChange('');\n\t\n\t\t\tif (!wasFocused) self.trigger('focus');\n\t\n\t\t\tif (!self.$activeItems.length) {\n\t\t\t\tself.showInput();\n\t\t\t\tself.setActiveItem(null);\n\t\t\t\tself.refreshOptions(!!self.settings.openOnFocus);\n\t\t\t}\n\t\n\t\t\tself.refreshState();\n\t\t},\n\t\n\t\t/**\n\t\t * Triggered on <input> blur.\n\t\t *\n\t\t * @param {object} e\n\t\t * @param {Element} dest\n\t\t */\n\t\tonBlur: function(e, dest) {\n\t\t\tvar self = this;\n\t\t\tif (!self.isFocused) return;\n\t\t\tself.isFocused = false;\n\t\n\t\t\tif (self.ignoreFocus) {\n\t\t\t\treturn;\n\t\t\t} else if (!self.ignoreBlur && document.activeElement === self.$dropdown_content[0]) {\n\t\t\t\t// necessary to prevent IE closing the dropdown when the scrollbar is clicked\n\t\t\t\tself.ignoreBlur = true;\n\t\t\t\tself.onFocus(e);\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\tvar deactivate = function() {\n\t\t\t\tself.close();\n\t\t\t\tself.setTextboxValue('');\n\t\t\t\tself.setActiveItem(null);\n\t\t\t\tself.setActiveOption(null);\n\t\t\t\tself.setCaret(self.items.length);\n\t\t\t\tself.refreshState();\n\t\n\t\t\t\t// IE11 bug: element still marked as active\n\t\t\t\tdest && dest.focus();\n\t\n\t\t\t\tself.ignoreFocus = false;\n\t\t\t\tself.trigger('blur');\n\t\t\t};\n\t\n\t\t\tself.ignoreFocus = true;\n\t\t\tif (self.settings.create && self.settings.createOnBlur) {\n\t\t\t\tself.createItem(null, false, deactivate);\n\t\t\t} else {\n\t\t\t\tdeactivate();\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Triggered when the user rolls over\n\t\t * an option in the autocomplete dropdown menu.\n\t\t *\n\t\t * @param {object} e\n\t\t * @returns {boolean}\n\t\t */\n\t\tonOptionHover: function(e) {\n\t\t\tif (this.ignoreHover) return;\n\t\t\tthis.setActiveOption(e.currentTarget, false);\n\t\t},\n\t\n\t\t/**\n\t\t * Triggered when the user clicks on an option\n\t\t * in the autocomplete dropdown menu.\n\t\t *\n\t\t * @param {object} e\n\t\t * @returns {boolean}\n\t\t */\n\t\tonOptionSelect: function(e) {\n\t\t\tvar value, $target, $option, self = this;\n\t\n\t\t\tif (e.preventDefault) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\n\t\t\t$target = $(e.currentTarget);\n\t\t\tif ($target.hasClass('create')) {\n\t\t\t\tself.createItem(null, function() {\n\t\t\t\t\tif (self.settings.closeAfterSelect) {\n\t\t\t\t\t\tself.close();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tvalue = $target.attr('data-value');\n\t\t\t\tif (typeof value !== 'undefined') {\n\t\t\t\t\tself.lastQuery = null;\n\t\t\t\t\tself.setTextboxValue('');\n\t\t\t\t\tself.addItem(value);\n\t\t\t\t\tif (self.settings.closeAfterSelect) {\n\t\t\t\t\t\tself.close();\n\t\t\t\t\t} else if (!self.settings.hideSelected && e.type && /mouse/.test(e.type)) {\n\t\t\t\t\t\tself.setActiveOption(self.getOption(value));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Triggered when the user clicks on an item\n\t\t * that has been selected.\n\t\t *\n\t\t * @param {object} e\n\t\t * @returns {boolean}\n\t\t */\n\t\tonItemSelect: function(e) {\n\t\t\tvar self = this;\n\t\n\t\t\tif (self.isLocked) return;\n\t\t\tif (self.settings.mode === 'multi') {\n\t\t\t\te.preventDefault();\n\t\t\t\tself.setActiveItem(e.currentTarget, e);\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Invokes the provided method that provides\n\t\t * results to a callback---which are then added\n\t\t * as options to the control.\n\t\t *\n\t\t * @param {function} fn\n\t\t */\n\t\tload: function(fn) {\n\t\t\tvar self = this;\n\t\t\tvar $wrapper = self.$wrapper.addClass(self.settings.loadingClass);\n\t\n\t\t\tself.loading++;\n\t\t\tfn.apply(self, [function(results) {\n\t\t\t\tself.loading = Math.max(self.loading - 1, 0);\n\t\t\t\tif (results && results.length) {\n\t\t\t\t\tself.addOption(results);\n\t\t\t\t\tself.refreshOptions(self.isFocused && !self.isInputHidden);\n\t\t\t\t}\n\t\t\t\tif (!self.loading) {\n\t\t\t\t\t$wrapper.removeClass(self.settings.loadingClass);\n\t\t\t\t}\n\t\t\t\tself.trigger('load', results);\n\t\t\t}]);\n\t\t},\n\t\n\t\t/**\n\t\t * Sets the input field of the control to the specified value.\n\t\t *\n\t\t * @param {string} value\n\t\t */\n\t\tsetTextboxValue: function(value) {\n\t\t\tvar $input = this.$control_input;\n\t\t\tvar changed = $input.val() !== value;\n\t\t\tif (changed) {\n\t\t\t\t$input.val(value).triggerHandler('update');\n\t\t\t\tthis.lastValue = value;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Returns the value of the control. If multiple items\n\t\t * can be selected (e.g. <select multiple>), this returns\n\t\t * an array. If only one item can be selected, this\n\t\t * returns a string.\n\t\t *\n\t\t * @returns {mixed}\n\t\t */\n\t\tgetValue: function() {\n\t\t\tif (this.tagType === TAG_SELECT && this.$input.attr('multiple')) {\n\t\t\t\treturn this.items;\n\t\t\t} else {\n\t\t\t\treturn this.items.join(this.settings.delimiter);\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Resets the selected items to the given value.\n\t\t *\n\t\t * @param {mixed} value\n\t\t */\n\t\tsetValue: function(value, silent) {\n\t\t\tvar events = silent ? [] : ['change'];\n\t\n\t\t\tdebounce_events(this, events, function() {\n\t\t\t\tthis.clear(silent);\n\t\t\t\tthis.addItems(value, silent);\n\t\t\t});\n\t\t},\n\t\n\t\t/**\n\t\t * Sets the selected item.\n\t\t *\n\t\t * @param {object} $item\n\t\t * @param {object} e (optional)\n\t\t */\n\t\tsetActiveItem: function($item, e) {\n\t\t\tvar self = this;\n\t\t\tvar eventName;\n\t\t\tvar i, idx, begin, end, item, swap;\n\t\t\tvar $last;\n\t\n\t\t\tif (self.settings.mode === 'single') return;\n\t\t\t$item = $($item);\n\t\n\t\t\t// clear the active selection\n\t\t\tif (!$item.length) {\n\t\t\t\t$(self.$activeItems).removeClass('active');\n\t\t\t\tself.$activeItems = [];\n\t\t\t\tif (self.isFocused) {\n\t\t\t\t\tself.showInput();\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\t// modify selection\n\t\t\teventName = e && e.type.toLowerCase();\n\t\n\t\t\tif (eventName === 'mousedown' && self.isShiftDown && self.$activeItems.length) {\n\t\t\t\t$last = self.$control.children('.active:last');\n\t\t\t\tbegin = Array.prototype.indexOf.apply(self.$control[0].childNodes, [$last[0]]);\n\t\t\t\tend   = Array.prototype.indexOf.apply(self.$control[0].childNodes, [$item[0]]);\n\t\t\t\tif (begin > end) {\n\t\t\t\t\tswap  = begin;\n\t\t\t\t\tbegin = end;\n\t\t\t\t\tend   = swap;\n\t\t\t\t}\n\t\t\t\tfor (i = begin; i <= end; i++) {\n\t\t\t\t\titem = self.$control[0].childNodes[i];\n\t\t\t\t\tif (self.$activeItems.indexOf(item) === -1) {\n\t\t\t\t\t\t$(item).addClass('active');\n\t\t\t\t\t\tself.$activeItems.push(item);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\te.preventDefault();\n\t\t\t} else if ((eventName === 'mousedown' && self.isCtrlDown) || (eventName === 'keydown' && this.isShiftDown)) {\n\t\t\t\tif ($item.hasClass('active')) {\n\t\t\t\t\tidx = self.$activeItems.indexOf($item[0]);\n\t\t\t\t\tself.$activeItems.splice(idx, 1);\n\t\t\t\t\t$item.removeClass('active');\n\t\t\t\t} else {\n\t\t\t\t\tself.$activeItems.push($item.addClass('active')[0]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$(self.$activeItems).removeClass('active');\n\t\t\t\tself.$activeItems = [$item.addClass('active')[0]];\n\t\t\t}\n\t\n\t\t\t// ensure control has focus\n\t\t\tself.hideInput();\n\t\t\tif (!this.isFocused) {\n\t\t\t\tself.focus();\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Sets the selected item in the dropdown menu\n\t\t * of available options.\n\t\t *\n\t\t * @param {object} $object\n\t\t * @param {boolean} scroll\n\t\t * @param {boolean} animate\n\t\t */\n\t\tsetActiveOption: function($option, scroll, animate) {\n\t\t\tvar height_menu, height_item, y;\n\t\t\tvar scroll_top, scroll_bottom;\n\t\t\tvar self = this;\n\t\n\t\t\tif (self.$activeOption) self.$activeOption.removeClass('active');\n\t\t\tself.$activeOption = null;\n\t\n\t\t\t$option = $($option);\n\t\t\tif (!$option.length) return;\n\t\n\t\t\tself.$activeOption = $option.addClass('active');\n\t\n\t\t\tif (scroll || !isset(scroll)) {\n\t\n\t\t\t\theight_menu   = self.$dropdown_content.height();\n\t\t\t\theight_item   = self.$activeOption.outerHeight(true);\n\t\t\t\tscroll        = self.$dropdown_content.scrollTop() || 0;\n\t\t\t\ty             = self.$activeOption.offset().top - self.$dropdown_content.offset().top + scroll;\n\t\t\t\tscroll_top    = y;\n\t\t\t\tscroll_bottom = y - height_menu + height_item;\n\t\n\t\t\t\tif (y + height_item > height_menu + scroll) {\n\t\t\t\t\tself.$dropdown_content.stop().animate({scrollTop: scroll_bottom}, animate ? self.settings.scrollDuration : 0);\n\t\t\t\t} else if (y < scroll) {\n\t\t\t\t\tself.$dropdown_content.stop().animate({scrollTop: scroll_top}, animate ? self.settings.scrollDuration : 0);\n\t\t\t\t}\n\t\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Selects all items (CTRL + A).\n\t\t */\n\t\tselectAll: function() {\n\t\t\tvar self = this;\n\t\t\tif (self.settings.mode === 'single') return;\n\t\n\t\t\tself.$activeItems = Array.prototype.slice.apply(self.$control.children(':not(input)').addClass('active'));\n\t\t\tif (self.$activeItems.length) {\n\t\t\t\tself.hideInput();\n\t\t\t\tself.close();\n\t\t\t}\n\t\t\tself.focus();\n\t\t},\n\t\n\t\t/**\n\t\t * Hides the input element out of view, while\n\t\t * retaining its focus.\n\t\t */\n\t\thideInput: function() {\n\t\t\tvar self = this;\n\t\n\t\t\tself.setTextboxValue('');\n\t\t\tself.$control_input.css({opacity: 0, position: 'absolute', left: self.rtl ? 10000 : -10000});\n\t\t\tself.isInputHidden = true;\n\t\t},\n\t\n\t\t/**\n\t\t * Restores input visibility.\n\t\t */\n\t\tshowInput: function() {\n\t\t\tthis.$control_input.css({opacity: 1, position: 'relative', left: 0});\n\t\t\tthis.isInputHidden = false;\n\t\t},\n\t\n\t\t/**\n\t\t * Gives the control focus.\n\t\t */\n\t\tfocus: function() {\n\t\t\tvar self = this;\n\t\t\tif (self.isDisabled) return;\n\t\n\t\t\tself.ignoreFocus = true;\n\t\t\tself.$control_input[0].focus();\n\t\t\twindow.setTimeout(function() {\n\t\t\t\tself.ignoreFocus = false;\n\t\t\t\tself.onFocus();\n\t\t\t}, 0);\n\t\t},\n\t\n\t\t/**\n\t\t * Forces the control out of focus.\n\t\t *\n\t\t * @param {Element} dest\n\t\t */\n\t\tblur: function(dest) {\n\t\t\tthis.$control_input[0].blur();\n\t\t\tthis.onBlur(null, dest);\n\t\t},\n\t\n\t\t/**\n\t\t * Returns a function that scores an object\n\t\t * to show how good of a match it is to the\n\t\t * provided query.\n\t\t *\n\t\t * @param {string} query\n\t\t * @param {object} options\n\t\t * @return {function}\n\t\t */\n\t\tgetScoreFunction: function(query) {\n\t\t\treturn this.sifter.getScoreFunction(query, this.getSearchOptions());\n\t\t},\n\t\n\t\t/**\n\t\t * Returns search options for sifter (the system\n\t\t * for scoring and sorting results).\n\t\t *\n\t\t * @see https://github.com/brianreavis/sifter.js\n\t\t * @return {object}\n\t\t */\n\t\tgetSearchOptions: function() {\n\t\t\tvar settings = this.settings;\n\t\t\tvar sort = settings.sortField;\n\t\t\tif (typeof sort === 'string') {\n\t\t\t\tsort = [{field: sort}];\n\t\t\t}\n\t\n\t\t\treturn {\n\t\t\t\tfields      : settings.searchField,\n\t\t\t\tconjunction : settings.searchConjunction,\n\t\t\t\tsort        : sort\n\t\t\t};\n\t\t},\n\t\n\t\t/**\n\t\t * Searches through available options and returns\n\t\t * a sorted array of matches.\n\t\t *\n\t\t * Returns an object containing:\n\t\t *\n\t\t *   - query {string}\n\t\t *   - tokens {array}\n\t\t *   - total {int}\n\t\t *   - items {array}\n\t\t *\n\t\t * @param {string} query\n\t\t * @returns {object}\n\t\t */\n\t\tsearch: function(query) {\n\t\t\tvar i, value, score, result, calculateScore;\n\t\t\tvar self     = this;\n\t\t\tvar settings = self.settings;\n\t\t\tvar options  = this.getSearchOptions();\n\t\n\t\t\t// validate user-provided result scoring function\n\t\t\tif (settings.score) {\n\t\t\t\tcalculateScore = self.settings.score.apply(this, [query]);\n\t\t\t\tif (typeof calculateScore !== 'function') {\n\t\t\t\t\tthrow new Error('Selectize \"score\" setting must be a function that returns a function');\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t// perform search\n\t\t\tif (query !== self.lastQuery) {\n\t\t\t\tself.lastQuery = query;\n\t\t\t\tresult = self.sifter.search(query, $.extend(options, {score: calculateScore}));\n\t\t\t\tself.currentResults = result;\n\t\t\t} else {\n\t\t\t\tresult = $.extend(true, {}, self.currentResults);\n\t\t\t}\n\t\n\t\t\t// filter out selected items\n\t\t\tif (settings.hideSelected) {\n\t\t\t\tfor (i = result.items.length - 1; i >= 0; i--) {\n\t\t\t\t\tif (self.items.indexOf(hash_key(result.items[i].id)) !== -1) {\n\t\t\t\t\t\tresult.items.splice(i, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\treturn result;\n\t\t},\n\t\n\t\t/**\n\t\t * Refreshes the list of available options shown\n\t\t * in the autocomplete dropdown menu.\n\t\t *\n\t\t * @param {boolean} triggerDropdown\n\t\t */\n\t\trefreshOptions: function(triggerDropdown) {\n\t\t\tvar i, j, k, n, groups, groups_order, option, option_html, optgroup, optgroups, html, html_children, has_create_option;\n\t\t\tvar $active, $active_before, $create;\n\t\n\t\t\tif (typeof triggerDropdown === 'undefined') {\n\t\t\t\ttriggerDropdown = true;\n\t\t\t}\n\t\n\t\t\tvar self              = this;\n\t\t\tvar query             = $.trim(self.$control_input.val());\n\t\t\tvar results           = self.search(query);\n\t\t\tvar $dropdown_content = self.$dropdown_content;\n\t\t\tvar active_before     = self.$activeOption && hash_key(self.$activeOption.attr('data-value'));\n\t\n\t\t\t// build markup\n\t\t\tn = results.items.length;\n\t\t\tif (typeof self.settings.maxOptions === 'number') {\n\t\t\t\tn = Math.min(n, self.settings.maxOptions);\n\t\t\t}\n\t\n\t\t\t// render and group available options individually\n\t\t\tgroups = {};\n\t\t\tgroups_order = [];\n\t\n\t\t\tfor (i = 0; i < n; i++) {\n\t\t\t\toption      = self.options[results.items[i].id];\n\t\t\t\toption_html = self.render('option', option);\n\t\t\t\toptgroup    = option[self.settings.optgroupField] || '';\n\t\t\t\toptgroups   = $.isArray(optgroup) ? optgroup : [optgroup];\n\t\n\t\t\t\tfor (j = 0, k = optgroups && optgroups.length; j < k; j++) {\n\t\t\t\t\toptgroup = optgroups[j];\n\t\t\t\t\tif (!self.optgroups.hasOwnProperty(optgroup)) {\n\t\t\t\t\t\toptgroup = '';\n\t\t\t\t\t}\n\t\t\t\t\tif (!groups.hasOwnProperty(optgroup)) {\n\t\t\t\t\t\tgroups[optgroup] = document.createDocumentFragment();\n\t\t\t\t\t\tgroups_order.push(optgroup);\n\t\t\t\t\t}\n\t\t\t\t\tgroups[optgroup].appendChild(option_html);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t// sort optgroups\n\t\t\tif (this.settings.lockOptgroupOrder) {\n\t\t\t\tgroups_order.sort(function(a, b) {\n\t\t\t\t\tvar a_order = self.optgroups[a].$order || 0;\n\t\t\t\t\tvar b_order = self.optgroups[b].$order || 0;\n\t\t\t\t\treturn a_order - b_order;\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\t// render optgroup headers & join groups\n\t\t\thtml = document.createDocumentFragment();\n\t\t\tfor (i = 0, n = groups_order.length; i < n; i++) {\n\t\t\t\toptgroup = groups_order[i];\n\t\t\t\tif (self.optgroups.hasOwnProperty(optgroup) && groups[optgroup].childNodes.length) {\n\t\t\t\t\t// render the optgroup header and options within it,\n\t\t\t\t\t// then pass it to the wrapper template\n\t\t\t\t\thtml_children = document.createDocumentFragment();\n\t\t\t\t\thtml_children.appendChild(self.render('optgroup_header', self.optgroups[optgroup]));\n\t\t\t\t\thtml_children.appendChild(groups[optgroup]);\n\t\n\t\t\t\t\thtml.appendChild(self.render('optgroup', $.extend({}, self.optgroups[optgroup], {\n\t\t\t\t\t\thtml: domToString(html_children),\n\t\t\t\t\t\tdom:  html_children\n\t\t\t\t\t})));\n\t\t\t\t} else {\n\t\t\t\t\thtml.appendChild(groups[optgroup]);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t$dropdown_content.html(html);\n\t\n\t\t\t// highlight matching terms inline\n\t\t\tif (self.settings.highlight && results.query.length && results.tokens.length) {\n\t\t\t\t$dropdown_content.removeHighlight();\n\t\t\t\tfor (i = 0, n = results.tokens.length; i < n; i++) {\n\t\t\t\t\thighlight($dropdown_content, results.tokens[i].regex);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t// add \"selected\" class to selected options\n\t\t\tif (!self.settings.hideSelected) {\n\t\t\t\tfor (i = 0, n = self.items.length; i < n; i++) {\n\t\t\t\t\tself.getOption(self.items[i]).addClass('selected');\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t// add create option\n\t\t\thas_create_option = self.canCreate(query);\n\t\t\tif (has_create_option) {\n\t\t\t\t$dropdown_content.prepend(self.render('option_create', {input: query}));\n\t\t\t\t$create = $($dropdown_content[0].childNodes[0]);\n\t\t\t}\n\t\n\t\t\t// activate\n\t\t\tself.hasOptions = results.items.length > 0 || has_create_option;\n\t\t\tif (self.hasOptions) {\n\t\t\t\tif (results.items.length > 0) {\n\t\t\t\t\t$active_before = active_before && self.getOption(active_before);\n\t\t\t\t\tif ($active_before && $active_before.length) {\n\t\t\t\t\t\t$active = $active_before;\n\t\t\t\t\t} else if (self.settings.mode === 'single' && self.items.length) {\n\t\t\t\t\t\t$active = self.getOption(self.items[0]);\n\t\t\t\t\t}\n\t\t\t\t\tif (!$active || !$active.length) {\n\t\t\t\t\t\tif ($create && !self.settings.addPrecedence) {\n\t\t\t\t\t\t\t$active = self.getAdjacentOption($create, 1);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$active = $dropdown_content.find('[data-selectable]:first');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$active = $create;\n\t\t\t\t}\n\t\t\t\tself.setActiveOption($active);\n\t\t\t\tif (triggerDropdown && !self.isOpen) { self.open(); }\n\t\t\t} else {\n\t\t\t\tself.setActiveOption(null);\n\t\t\t\tif (triggerDropdown && self.isOpen) { self.close(); }\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Adds an available option. If it already exists,\n\t\t * nothing will happen. Note: this does not refresh\n\t\t * the options list dropdown (use `refreshOptions`\n\t\t * for that).\n\t\t *\n\t\t * Usage:\n\t\t *\n\t\t *   this.addOption(data)\n\t\t *\n\t\t * @param {object|array} data\n\t\t */\n\t\taddOption: function(data) {\n\t\t\tvar i, n, value, self = this;\n\t\n\t\t\tif ($.isArray(data)) {\n\t\t\t\tfor (i = 0, n = data.length; i < n; i++) {\n\t\t\t\t\tself.addOption(data[i]);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\tif (value = self.registerOption(data)) {\n\t\t\t\tself.userOptions[value] = true;\n\t\t\t\tself.lastQuery = null;\n\t\t\t\tself.trigger('option_add', value, data);\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Registers an option to the pool of options.\n\t\t *\n\t\t * @param {object} data\n\t\t * @return {boolean|string}\n\t\t */\n\t\tregisterOption: function(data) {\n\t\t\tvar key = hash_key(data[this.settings.valueField]);\n\t\t\tif (typeof key === 'undefined' || key === null || this.options.hasOwnProperty(key)) return false;\n\t\t\tdata.$order = data.$order || ++this.order;\n\t\t\tthis.options[key] = data;\n\t\t\treturn key;\n\t\t},\n\t\n\t\t/**\n\t\t * Registers an option group to the pool of option groups.\n\t\t *\n\t\t * @param {object} data\n\t\t * @return {boolean|string}\n\t\t */\n\t\tregisterOptionGroup: function(data) {\n\t\t\tvar key = hash_key(data[this.settings.optgroupValueField]);\n\t\t\tif (!key) return false;\n\t\n\t\t\tdata.$order = data.$order || ++this.order;\n\t\t\tthis.optgroups[key] = data;\n\t\t\treturn key;\n\t\t},\n\t\n\t\t/**\n\t\t * Registers a new optgroup for options\n\t\t * to be bucketed into.\n\t\t *\n\t\t * @param {string} id\n\t\t * @param {object} data\n\t\t */\n\t\taddOptionGroup: function(id, data) {\n\t\t\tdata[this.settings.optgroupValueField] = id;\n\t\t\tif (id = this.registerOptionGroup(data)) {\n\t\t\t\tthis.trigger('optgroup_add', id, data);\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Removes an existing option group.\n\t\t *\n\t\t * @param {string} id\n\t\t */\n\t\tremoveOptionGroup: function(id) {\n\t\t\tif (this.optgroups.hasOwnProperty(id)) {\n\t\t\t\tdelete this.optgroups[id];\n\t\t\t\tthis.renderCache = {};\n\t\t\t\tthis.trigger('optgroup_remove', id);\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Clears all existing option groups.\n\t\t */\n\t\tclearOptionGroups: function() {\n\t\t\tthis.optgroups = {};\n\t\t\tthis.renderCache = {};\n\t\t\tthis.trigger('optgroup_clear');\n\t\t},\n\t\n\t\t/**\n\t\t * Updates an option available for selection. If\n\t\t * it is visible in the selected items or options\n\t\t * dropdown, it will be re-rendered automatically.\n\t\t *\n\t\t * @param {string} value\n\t\t * @param {object} data\n\t\t */\n\t\tupdateOption: function(value, data) {\n\t\t\tvar self = this;\n\t\t\tvar $item, $item_new;\n\t\t\tvar value_new, index_item, cache_items, cache_options, order_old;\n\t\n\t\t\tvalue     = hash_key(value);\n\t\t\tvalue_new = hash_key(data[self.settings.valueField]);\n\t\n\t\t\t// sanity checks\n\t\t\tif (value === null) return;\n\t\t\tif (!self.options.hasOwnProperty(value)) return;\n\t\t\tif (typeof value_new !== 'string') throw new Error('Value must be set in option data');\n\t\n\t\t\torder_old = self.options[value].$order;\n\t\n\t\t\t// update references\n\t\t\tif (value_new !== value) {\n\t\t\t\tdelete self.options[value];\n\t\t\t\tindex_item = self.items.indexOf(value);\n\t\t\t\tif (index_item !== -1) {\n\t\t\t\t\tself.items.splice(index_item, 1, value_new);\n\t\t\t\t}\n\t\t\t}\n\t\t\tdata.$order = data.$order || order_old;\n\t\t\tself.options[value_new] = data;\n\t\n\t\t\t// invalidate render cache\n\t\t\tcache_items = self.renderCache['item'];\n\t\t\tcache_options = self.renderCache['option'];\n\t\n\t\t\tif (cache_items) {\n\t\t\t\tdelete cache_items[value];\n\t\t\t\tdelete cache_items[value_new];\n\t\t\t}\n\t\t\tif (cache_options) {\n\t\t\t\tdelete cache_options[value];\n\t\t\t\tdelete cache_options[value_new];\n\t\t\t}\n\t\n\t\t\t// update the item if it's selected\n\t\t\tif (self.items.indexOf(value_new) !== -1) {\n\t\t\t\t$item = self.getItem(value);\n\t\t\t\t$item_new = $(self.render('item', data));\n\t\t\t\tif ($item.hasClass('active')) $item_new.addClass('active');\n\t\t\t\t$item.replaceWith($item_new);\n\t\t\t}\n\t\n\t\t\t// invalidate last query because we might have updated the sortField\n\t\t\tself.lastQuery = null;\n\t\n\t\t\t// update dropdown contents\n\t\t\tif (self.isOpen) {\n\t\t\t\tself.refreshOptions(false);\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Removes a single option.\n\t\t *\n\t\t * @param {string} value\n\t\t * @param {boolean} silent\n\t\t */\n\t\tremoveOption: function(value, silent) {\n\t\t\tvar self = this;\n\t\t\tvalue = hash_key(value);\n\t\n\t\t\tvar cache_items = self.renderCache['item'];\n\t\t\tvar cache_options = self.renderCache['option'];\n\t\t\tif (cache_items) delete cache_items[value];\n\t\t\tif (cache_options) delete cache_options[value];\n\t\n\t\t\tdelete self.userOptions[value];\n\t\t\tdelete self.options[value];\n\t\t\tself.lastQuery = null;\n\t\t\tself.trigger('option_remove', value);\n\t\t\tself.removeItem(value, silent);\n\t\t},\n\t\n\t\t/**\n\t\t * Clears all options.\n\t\t */\n\t\tclearOptions: function() {\n\t\t\tvar self = this;\n\t\n\t\t\tself.loadedSearches = {};\n\t\t\tself.userOptions = {};\n\t\t\tself.renderCache = {};\n\t\t\tself.options = self.sifter.items = {};\n\t\t\tself.lastQuery = null;\n\t\t\tself.trigger('option_clear');\n\t\t\tself.clear();\n\t\t},\n\t\n\t\t/**\n\t\t * Returns the jQuery element of the option\n\t\t * matching the given value.\n\t\t *\n\t\t * @param {string} value\n\t\t * @returns {object}\n\t\t */\n\t\tgetOption: function(value) {\n\t\t\treturn this.getElementWithValue(value, this.$dropdown_content.find('[data-selectable]'));\n\t\t},\n\t\n\t\t/**\n\t\t * Returns the jQuery element of the next or\n\t\t * previous selectable option.\n\t\t *\n\t\t * @param {object} $option\n\t\t * @param {int} direction  can be 1 for next or -1 for previous\n\t\t * @return {object}\n\t\t */\n\t\tgetAdjacentOption: function($option, direction) {\n\t\t\tvar $options = this.$dropdown.find('[data-selectable]');\n\t\t\tvar index    = $options.index($option) + direction;\n\t\n\t\t\treturn index >= 0 && index < $options.length ? $options.eq(index) : $();\n\t\t},\n\t\n\t\t/**\n\t\t * Finds the first element with a \"data-value\" attribute\n\t\t * that matches the given value.\n\t\t *\n\t\t * @param {mixed} value\n\t\t * @param {object} $els\n\t\t * @return {object}\n\t\t */\n\t\tgetElementWithValue: function(value, $els) {\n\t\t\tvalue = hash_key(value);\n\t\n\t\t\tif (typeof value !== 'undefined' && value !== null) {\n\t\t\t\tfor (var i = 0, n = $els.length; i < n; i++) {\n\t\t\t\t\tif ($els[i].getAttribute('data-value') === value) {\n\t\t\t\t\t\treturn $($els[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\treturn $();\n\t\t},\n\t\n\t\t/**\n\t\t * Returns the jQuery element of the item\n\t\t * matching the given value.\n\t\t *\n\t\t * @param {string} value\n\t\t * @returns {object}\n\t\t */\n\t\tgetItem: function(value) {\n\t\t\treturn this.getElementWithValue(value, this.$control.children());\n\t\t},\n\t\n\t\t/**\n\t\t * \"Selects\" multiple items at once. Adds them to the list\n\t\t * at the current caret position.\n\t\t *\n\t\t * @param {string} value\n\t\t * @param {boolean} silent\n\t\t */\n\t\taddItems: function(values, silent) {\n\t\t\tvar items = $.isArray(values) ? values : [values];\n\t\t\tfor (var i = 0, n = items.length; i < n; i++) {\n\t\t\t\tthis.isPending = (i < n - 1);\n\t\t\t\tthis.addItem(items[i], silent);\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * \"Selects\" an item. Adds it to the list\n\t\t * at the current caret position.\n\t\t *\n\t\t * @param {string} value\n\t\t * @param {boolean} silent\n\t\t */\n\t\taddItem: function(value, silent) {\n\t\t\tvar events = silent ? [] : ['change'];\n\t\n\t\t\tdebounce_events(this, events, function() {\n\t\t\t\tvar $item, $option, $options;\n\t\t\t\tvar self = this;\n\t\t\t\tvar inputMode = self.settings.mode;\n\t\t\t\tvar i, active, value_next, wasFull;\n\t\t\t\tvalue = hash_key(value);\n\t\n\t\t\t\tif (self.items.indexOf(value) !== -1) {\n\t\t\t\t\tif (inputMode === 'single') self.close();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tif (!self.options.hasOwnProperty(value)) return;\n\t\t\t\tif (inputMode === 'single') self.clear(silent);\n\t\t\t\tif (inputMode === 'multi' && self.isFull()) return;\n\t\n\t\t\t\t$item = $(self.render('item', self.options[value]));\n\t\t\t\twasFull = self.isFull();\n\t\t\t\tself.items.splice(self.caretPos, 0, value);\n\t\t\t\tself.insertAtCaret($item);\n\t\t\t\tif (!self.isPending || (!wasFull && self.isFull())) {\n\t\t\t\t\tself.refreshState();\n\t\t\t\t}\n\t\n\t\t\t\tif (self.isSetup) {\n\t\t\t\t\t$options = self.$dropdown_content.find('[data-selectable]');\n\t\n\t\t\t\t\t// update menu / remove the option (if this is not one item being added as part of series)\n\t\t\t\t\tif (!self.isPending) {\n\t\t\t\t\t\t$option = self.getOption(value);\n\t\t\t\t\t\tvalue_next = self.getAdjacentOption($option, 1).attr('data-value');\n\t\t\t\t\t\tself.refreshOptions(self.isFocused && inputMode !== 'single');\n\t\t\t\t\t\tif (value_next) {\n\t\t\t\t\t\t\tself.setActiveOption(self.getOption(value_next));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\n\t\t\t\t\t// hide the menu if the maximum number of items have been selected or no options are left\n\t\t\t\t\tif (!$options.length || self.isFull()) {\n\t\t\t\t\t\tself.close();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.positionDropdown();\n\t\t\t\t\t}\n\t\n\t\t\t\t\tself.updatePlaceholder();\n\t\t\t\t\tself.trigger('item_add', value, $item);\n\t\t\t\t\tself.updateOriginalInput({silent: silent});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\n\t\t/**\n\t\t * Removes the selected item matching\n\t\t * the provided value.\n\t\t *\n\t\t * @param {string} value\n\t\t */\n\t\tremoveItem: function(value, silent) {\n\t\t\tvar self = this;\n\t\t\tvar $item, i, idx;\n\t\n\t\t\t$item = (value instanceof $) ? value : self.getItem(value);\n\t\t\tvalue = hash_key($item.attr('data-value'));\n\t\t\ti = self.items.indexOf(value);\n\t\n\t\t\tif (i !== -1) {\n\t\t\t\t$item.remove();\n\t\t\t\tif ($item.hasClass('active')) {\n\t\t\t\t\tidx = self.$activeItems.indexOf($item[0]);\n\t\t\t\t\tself.$activeItems.splice(idx, 1);\n\t\t\t\t}\n\t\n\t\t\t\tself.items.splice(i, 1);\n\t\t\t\tself.lastQuery = null;\n\t\t\t\tif (!self.settings.persist && self.userOptions.hasOwnProperty(value)) {\n\t\t\t\t\tself.removeOption(value, silent);\n\t\t\t\t}\n\t\n\t\t\t\tif (i < self.caretPos) {\n\t\t\t\t\tself.setCaret(self.caretPos - 1);\n\t\t\t\t}\n\t\n\t\t\t\tself.refreshState();\n\t\t\t\tself.updatePlaceholder();\n\t\t\t\tself.updateOriginalInput({silent: silent});\n\t\t\t\tself.positionDropdown();\n\t\t\t\tself.trigger('item_remove', value, $item);\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Invokes the `create` method provided in the\n\t\t * selectize options that should provide the data\n\t\t * for the new item, given the user input.\n\t\t *\n\t\t * Once this completes, it will be added\n\t\t * to the item list.\n\t\t *\n\t\t * @param {string} value\n\t\t * @param {boolean} [triggerDropdown]\n\t\t * @param {function} [callback]\n\t\t * @return {boolean}\n\t\t */\n\t\tcreateItem: function(input, triggerDropdown) {\n\t\t\tvar self  = this;\n\t\t\tvar caret = self.caretPos;\n\t\t\tinput = input || $.trim(self.$control_input.val() || '');\n\t\n\t\t\tvar callback = arguments[arguments.length - 1];\n\t\t\tif (typeof callback !== 'function') callback = function() {};\n\t\n\t\t\tif (typeof triggerDropdown !== 'boolean') {\n\t\t\t\ttriggerDropdown = true;\n\t\t\t}\n\t\n\t\t\tif (!self.canCreate(input)) {\n\t\t\t\tcallback();\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\tself.lock();\n\t\n\t\t\tvar setup = (typeof self.settings.create === 'function') ? this.settings.create : function(input) {\n\t\t\t\tvar data = {};\n\t\t\t\tdata[self.settings.labelField] = input;\n\t\t\t\tdata[self.settings.valueField] = input;\n\t\t\t\treturn data;\n\t\t\t};\n\t\n\t\t\tvar create = once(function(data) {\n\t\t\t\tself.unlock();\n\t\n\t\t\t\tif (!data || typeof data !== 'object') return callback();\n\t\t\t\tvar value = hash_key(data[self.settings.valueField]);\n\t\t\t\tif (typeof value !== 'string') return callback();\n\t\n\t\t\t\tself.setTextboxValue('');\n\t\t\t\tself.addOption(data);\n\t\t\t\tself.setCaret(caret);\n\t\t\t\tself.addItem(value);\n\t\t\t\tself.refreshOptions(triggerDropdown && self.settings.mode !== 'single');\n\t\t\t\tcallback(data);\n\t\t\t});\n\t\n\t\t\tvar output = setup.apply(this, [input, create]);\n\t\t\tif (typeof output !== 'undefined') {\n\t\t\t\tcreate(output);\n\t\t\t}\n\t\n\t\t\treturn true;\n\t\t},\n\t\n\t\t/**\n\t\t * Re-renders the selected item lists.\n\t\t */\n\t\trefreshItems: function() {\n\t\t\tthis.lastQuery = null;\n\t\n\t\t\tif (this.isSetup) {\n\t\t\t\tthis.addItem(this.items);\n\t\t\t}\n\t\n\t\t\tthis.refreshState();\n\t\t\tthis.updateOriginalInput();\n\t\t},\n\t\n\t\t/**\n\t\t * Updates all state-dependent attributes\n\t\t * and CSS classes.\n\t\t */\n\t\trefreshState: function() {\n\t\t\tthis.refreshValidityState();\n\t\t\tthis.refreshClasses();\n\t\t},\n\t\n\t\t/**\n\t\t * Update the `required` attribute of both input and control input.\n\t\t *\n\t\t * The `required` property needs to be activated on the control input\n\t\t * for the error to be displayed at the right place. `required` also\n\t\t * needs to be temporarily deactivated on the input since the input is\n\t\t * hidden and can't show errors.\n\t\t */\n\t\trefreshValidityState: function() {\n\t\t\tif (!this.isRequired) return false;\n\t\n\t\t\tvar invalid = !this.items.length;\n\t\n\t\t\tthis.isInvalid = invalid;\n\t\t\tthis.$control_input.prop('required', invalid);\n\t\t\tthis.$input.prop('required', !invalid);\n\t\t},\n\t\n\t\t/**\n\t\t * Updates all state-dependent CSS classes.\n\t\t */\n\t\trefreshClasses: function() {\n\t\t\tvar self     = this;\n\t\t\tvar isFull   = self.isFull();\n\t\t\tvar isLocked = self.isLocked;\n\t\n\t\t\tself.$wrapper\n\t\t\t\t.toggleClass('rtl', self.rtl);\n\t\n\t\t\tself.$control\n\t\t\t\t.toggleClass('focus', self.isFocused)\n\t\t\t\t.toggleClass('disabled', self.isDisabled)\n\t\t\t\t.toggleClass('required', self.isRequired)\n\t\t\t\t.toggleClass('invalid', self.isInvalid)\n\t\t\t\t.toggleClass('locked', isLocked)\n\t\t\t\t.toggleClass('full', isFull).toggleClass('not-full', !isFull)\n\t\t\t\t.toggleClass('input-active', self.isFocused && !self.isInputHidden)\n\t\t\t\t.toggleClass('dropdown-active', self.isOpen)\n\t\t\t\t.toggleClass('has-options', !$.isEmptyObject(self.options))\n\t\t\t\t.toggleClass('has-items', self.items.length > 0);\n\t\n\t\t\tself.$control_input.data('grow', !isFull && !isLocked);\n\t\t},\n\t\n\t\t/**\n\t\t * Determines whether or not more items can be added\n\t\t * to the control without exceeding the user-defined maximum.\n\t\t *\n\t\t * @returns {boolean}\n\t\t */\n\t\tisFull: function() {\n\t\t\treturn this.settings.maxItems !== null && this.items.length >= this.settings.maxItems;\n\t\t},\n\t\n\t\t/**\n\t\t * Refreshes the original <select> or <input>\n\t\t * element to reflect the current state.\n\t\t */\n\t\tupdateOriginalInput: function(opts) {\n\t\t\tvar i, n, options, label, self = this;\n\t\t\topts = opts || {};\n\t\n\t\t\tif (self.tagType === TAG_SELECT) {\n\t\t\t\toptions = [];\n\t\t\t\tfor (i = 0, n = self.items.length; i < n; i++) {\n\t\t\t\t\tlabel = self.options[self.items[i]][self.settings.labelField] || '';\n\t\t\t\t\toptions.push('<option value=\"' + escape_html(self.items[i]) + '\" selected=\"selected\">' + escape_html(label) + '</option>');\n\t\t\t\t}\n\t\t\t\tif (!options.length && !this.$input.attr('multiple')) {\n\t\t\t\t\toptions.push('<option value=\"\" selected=\"selected\"></option>');\n\t\t\t\t}\n\t\t\t\tself.$input.html(options.join(''));\n\t\t\t} else {\n\t\t\t\tself.$input.val(self.getValue());\n\t\t\t\tself.$input.attr('value',self.$input.val());\n\t\t\t}\n\t\n\t\t\tif (self.isSetup) {\n\t\t\t\tif (!opts.silent) {\n\t\t\t\t\tself.trigger('change', self.$input.val());\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Shows/hide the input placeholder depending\n\t\t * on if there items in the list already.\n\t\t */\n\t\tupdatePlaceholder: function() {\n\t\t\tif (!this.settings.placeholder) return;\n\t\t\tvar $input = this.$control_input;\n\t\n\t\t\tif (this.items.length) {\n\t\t\t\t$input.removeAttr('placeholder');\n\t\t\t} else {\n\t\t\t\t$input.attr('placeholder', this.settings.placeholder);\n\t\t\t}\n\t\t\t$input.triggerHandler('update', {force: true});\n\t\t},\n\t\n\t\t/**\n\t\t * Shows the autocomplete dropdown containing\n\t\t * the available options.\n\t\t */\n\t\topen: function() {\n\t\t\tvar self = this;\n\t\n\t\t\tif (self.isLocked || self.isOpen || (self.settings.mode === 'multi' && self.isFull())) return;\n\t\t\tself.focus();\n\t\t\tself.isOpen = true;\n\t\t\tself.refreshState();\n\t\t\tself.$dropdown.css({visibility: 'hidden', display: 'block'});\n\t\t\tself.positionDropdown();\n\t\t\tself.$dropdown.css({visibility: 'visible'});\n\t\t\tself.trigger('dropdown_open', self.$dropdown);\n\t\t},\n\t\n\t\t/**\n\t\t * Closes the autocomplete dropdown menu.\n\t\t */\n\t\tclose: function() {\n\t\t\tvar self = this;\n\t\t\tvar trigger = self.isOpen;\n\t\n\t\t\tif (self.settings.mode === 'single' && self.items.length) {\n\t\t\t\tself.hideInput();\n\t\t\t\tself.$control_input.blur(); // close keyboard on iOS\n\t\t\t}\n\t\n\t\t\tself.isOpen = false;\n\t\t\tself.$dropdown.hide();\n\t\t\tself.setActiveOption(null);\n\t\t\tself.refreshState();\n\t\n\t\t\tif (trigger) self.trigger('dropdown_close', self.$dropdown);\n\t\t},\n\t\n\t\t/**\n\t\t * Calculates and applies the appropriate\n\t\t * position of the dropdown.\n\t\t */\n\t\tpositionDropdown: function() {\n\t\t\tvar $control = this.$control;\n\t\t\tvar offset = this.settings.dropdownParent === 'body' ? $control.offset() : $control.position();\n\t\t\toffset.top += $control.outerHeight(true);\n\t\n\t\t\tthis.$dropdown.css({\n\t\t\t\twidth : $control.outerWidth(),\n\t\t\t\ttop   : offset.top,\n\t\t\t\tleft  : offset.left\n\t\t\t});\n\t\t},\n\t\n\t\t/**\n\t\t * Resets / clears all selected items\n\t\t * from the control.\n\t\t *\n\t\t * @param {boolean} silent\n\t\t */\n\t\tclear: function(silent) {\n\t\t\tvar self = this;\n\t\n\t\t\tif (!self.items.length) return;\n\t\t\tself.$control.children(':not(input)').remove();\n\t\t\tself.items = [];\n\t\t\tself.lastQuery = null;\n\t\t\tself.setCaret(0);\n\t\t\tself.setActiveItem(null);\n\t\t\tself.updatePlaceholder();\n\t\t\tself.updateOriginalInput({silent: silent});\n\t\t\tself.refreshState();\n\t\t\tself.showInput();\n\t\t\tself.trigger('clear');\n\t\t},\n\t\n\t\t/**\n\t\t * A helper method for inserting an element\n\t\t * at the current caret position.\n\t\t *\n\t\t * @param {object} $el\n\t\t */\n\t\tinsertAtCaret: function($el) {\n\t\t\tvar caret = Math.min(this.caretPos, this.items.length);\n\t\t\tif (caret === 0) {\n\t\t\t\tthis.$control.prepend($el);\n\t\t\t} else {\n\t\t\t\t$(this.$control[0].childNodes[caret]).before($el);\n\t\t\t}\n\t\t\tthis.setCaret(caret + 1);\n\t\t},\n\t\n\t\t/**\n\t\t * Removes the current selected item(s).\n\t\t *\n\t\t * @param {object} e (optional)\n\t\t * @returns {boolean}\n\t\t */\n\t\tdeleteSelection: function(e) {\n\t\t\tvar i, n, direction, selection, values, caret, option_select, $option_select, $tail;\n\t\t\tvar self = this;\n\t\n\t\t\tdirection = (e && e.keyCode === KEY_BACKSPACE) ? -1 : 1;\n\t\t\tselection = getSelection(self.$control_input[0]);\n\t\n\t\t\tif (self.$activeOption && !self.settings.hideSelected) {\n\t\t\t\toption_select = self.getAdjacentOption(self.$activeOption, -1).attr('data-value');\n\t\t\t}\n\t\n\t\t\t// determine items that will be removed\n\t\t\tvalues = [];\n\t\n\t\t\tif (self.$activeItems.length) {\n\t\t\t\t$tail = self.$control.children('.active:' + (direction > 0 ? 'last' : 'first'));\n\t\t\t\tcaret = self.$control.children(':not(input)').index($tail);\n\t\t\t\tif (direction > 0) { caret++; }\n\t\n\t\t\t\tfor (i = 0, n = self.$activeItems.length; i < n; i++) {\n\t\t\t\t\tvalues.push($(self.$activeItems[i]).attr('data-value'));\n\t\t\t\t}\n\t\t\t\tif (e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t} else if ((self.isFocused || self.settings.mode === 'single') && self.items.length) {\n\t\t\t\tif (direction < 0 && selection.start === 0 && selection.length === 0) {\n\t\t\t\t\tvalues.push(self.items[self.caretPos - 1]);\n\t\t\t\t} else if (direction > 0 && selection.start === self.$control_input.val().length) {\n\t\t\t\t\tvalues.push(self.items[self.caretPos]);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t// allow the callback to abort\n\t\t\tif (!values.length || (typeof self.settings.onDelete === 'function' && self.settings.onDelete.apply(self, [values]) === false)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t// perform removal\n\t\t\tif (typeof caret !== 'undefined') {\n\t\t\t\tself.setCaret(caret);\n\t\t\t}\n\t\t\twhile (values.length) {\n\t\t\t\tself.removeItem(values.pop());\n\t\t\t}\n\t\n\t\t\tself.showInput();\n\t\t\tself.positionDropdown();\n\t\t\tself.refreshOptions(true);\n\t\n\t\t\t// select previous option\n\t\t\tif (option_select) {\n\t\t\t\t$option_select = self.getOption(option_select);\n\t\t\t\tif ($option_select.length) {\n\t\t\t\t\tself.setActiveOption($option_select);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\treturn true;\n\t\t},\n\t\n\t\t/**\n\t\t * Selects the previous / next item (depending\n\t\t * on the `direction` argument).\n\t\t *\n\t\t * > 0 - right\n\t\t * < 0 - left\n\t\t *\n\t\t * @param {int} direction\n\t\t * @param {object} e (optional)\n\t\t */\n\t\tadvanceSelection: function(direction, e) {\n\t\t\tvar tail, selection, idx, valueLength, cursorAtEdge, $tail;\n\t\t\tvar self = this;\n\t\n\t\t\tif (direction === 0) return;\n\t\t\tif (self.rtl) direction *= -1;\n\t\n\t\t\ttail = direction > 0 ? 'last' : 'first';\n\t\t\tselection = getSelection(self.$control_input[0]);\n\t\n\t\t\tif (self.isFocused && !self.isInputHidden) {\n\t\t\t\tvalueLength = self.$control_input.val().length;\n\t\t\t\tcursorAtEdge = direction < 0\n\t\t\t\t\t? selection.start === 0 && selection.length === 0\n\t\t\t\t\t: selection.start === valueLength;\n\t\n\t\t\t\tif (cursorAtEdge && !valueLength) {\n\t\t\t\t\tself.advanceCaret(direction, e);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$tail = self.$control.children('.active:' + tail);\n\t\t\t\tif ($tail.length) {\n\t\t\t\t\tidx = self.$control.children(':not(input)').index($tail);\n\t\t\t\t\tself.setActiveItem(null);\n\t\t\t\t\tself.setCaret(direction > 0 ? idx + 1 : idx);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Moves the caret left / right.\n\t\t *\n\t\t * @param {int} direction\n\t\t * @param {object} e (optional)\n\t\t */\n\t\tadvanceCaret: function(direction, e) {\n\t\t\tvar self = this, fn, $adj;\n\t\n\t\t\tif (direction === 0) return;\n\t\n\t\t\tfn = direction > 0 ? 'next' : 'prev';\n\t\t\tif (self.isShiftDown) {\n\t\t\t\t$adj = self.$control_input[fn]();\n\t\t\t\tif ($adj.length) {\n\t\t\t\t\tself.hideInput();\n\t\t\t\t\tself.setActiveItem($adj);\n\t\t\t\t\te && e.preventDefault();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tself.setCaret(self.caretPos + direction);\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Moves the caret to the specified index.\n\t\t *\n\t\t * @param {int} i\n\t\t */\n\t\tsetCaret: function(i) {\n\t\t\tvar self = this;\n\t\n\t\t\tif (self.settings.mode === 'single') {\n\t\t\t\ti = self.items.length;\n\t\t\t} else {\n\t\t\t\ti = Math.max(0, Math.min(self.items.length, i));\n\t\t\t}\n\t\n\t\t\tif(!self.isPending) {\n\t\t\t\t// the input must be moved by leaving it in place and moving the\n\t\t\t\t// siblings, due to the fact that focus cannot be restored once lost\n\t\t\t\t// on mobile webkit devices\n\t\t\t\tvar j, n, fn, $children, $child;\n\t\t\t\t$children = self.$control.children(':not(input)');\n\t\t\t\tfor (j = 0, n = $children.length; j < n; j++) {\n\t\t\t\t\t$child = $($children[j]).detach();\n\t\t\t\t\tif (j <  i) {\n\t\t\t\t\t\tself.$control_input.before($child);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.$control.append($child);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tself.caretPos = i;\n\t\t},\n\t\n\t\t/**\n\t\t * Disables user input on the control. Used while\n\t\t * items are being asynchronously created.\n\t\t */\n\t\tlock: function() {\n\t\t\tthis.close();\n\t\t\tthis.isLocked = true;\n\t\t\tthis.refreshState();\n\t\t},\n\t\n\t\t/**\n\t\t * Re-enables user input on the control.\n\t\t */\n\t\tunlock: function() {\n\t\t\tthis.isLocked = false;\n\t\t\tthis.refreshState();\n\t\t},\n\t\n\t\t/**\n\t\t * Disables user input on the control completely.\n\t\t * While disabled, it cannot receive focus.\n\t\t */\n\t\tdisable: function() {\n\t\t\tvar self = this;\n\t\t\tself.$input.prop('disabled', true);\n\t\t\tself.$control_input.prop('disabled', true).prop('tabindex', -1);\n\t\t\tself.isDisabled = true;\n\t\t\tself.lock();\n\t\t},\n\t\n\t\t/**\n\t\t * Enables the control so that it can respond\n\t\t * to focus and user input.\n\t\t */\n\t\tenable: function() {\n\t\t\tvar self = this;\n\t\t\tself.$input.prop('disabled', false);\n\t\t\tself.$control_input.prop('disabled', false).prop('tabindex', self.tabIndex);\n\t\t\tself.isDisabled = false;\n\t\t\tself.unlock();\n\t\t},\n\t\n\t\t/**\n\t\t * Completely destroys the control and\n\t\t * unbinds all event listeners so that it can\n\t\t * be garbage collected.\n\t\t */\n\t\tdestroy: function() {\n\t\t\tvar self = this;\n\t\t\tvar eventNS = self.eventNS;\n\t\t\tvar revertSettings = self.revertSettings;\n\t\n\t\t\tself.trigger('destroy');\n\t\t\tself.off();\n\t\t\tself.$wrapper.remove();\n\t\t\tself.$dropdown.remove();\n\t\n\t\t\tself.$input\n\t\t\t\t.html('')\n\t\t\t\t.append(revertSettings.$children)\n\t\t\t\t.removeAttr('tabindex')\n\t\t\t\t.removeClass('selectized')\n\t\t\t\t.attr({tabindex: revertSettings.tabindex})\n\t\t\t\t.show();\n\t\n\t\t\tself.$control_input.removeData('grow');\n\t\t\tself.$input.removeData('selectize');\n\t\n\t\t\t$(window).off(eventNS);\n\t\t\t$(document).off(eventNS);\n\t\t\t$(document.body).off(eventNS);\n\t\n\t\t\tdelete self.$input[0].selectize;\n\t\t},\n\t\n\t\t/**\n\t\t * A helper method for rendering \"item\" and\n\t\t * \"option\" templates, given the data.\n\t\t *\n\t\t * @param {string} templateName\n\t\t * @param {object} data\n\t\t * @returns {string}\n\t\t */\n\t\trender: function(templateName, data) {\n\t\t\tvar value, id, label;\n\t\t\tvar html = '';\n\t\t\tvar cache = false;\n\t\t\tvar self = this;\n\t\t\tvar regex_tag = /^[\\t \\r\\n]*<([a-z][a-z0-9\\-_]*(?:\\:[a-z][a-z0-9\\-_]*)?)/i;\n\t\n\t\t\tif (templateName === 'option' || templateName === 'item') {\n\t\t\t\tvalue = hash_key(data[self.settings.valueField]);\n\t\t\t\tcache = !!value;\n\t\t\t}\n\t\n\t\t\t// pull markup from cache if it exists\n\t\t\tif (cache) {\n\t\t\t\tif (!isset(self.renderCache[templateName])) {\n\t\t\t\t\tself.renderCache[templateName] = {};\n\t\t\t\t}\n\t\t\t\tif (self.renderCache[templateName].hasOwnProperty(value)) {\n\t\t\t\t\treturn self.renderCache[templateName][value];\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t// render markup\n\t\t\thtml = $(self.settings.render[templateName].apply(this, [data, escape_html]));\n\t\n\t\t\t// add mandatory attributes\n\t\t\tif (templateName === 'option' || templateName === 'option_create') {\n\t\t\t\thtml.attr('data-selectable', '');\n\t\t\t}\n\t\t\telse if (templateName === 'optgroup') {\n\t\t\t\tid = data[self.settings.optgroupValueField] || '';\n\t\t\t\thtml.attr('data-group', id);\n\t\t\t}\n\t\t\tif (templateName === 'option' || templateName === 'item') {\n\t\t\t\thtml.attr('data-value', value || '');\n\t\t\t}\n\t\n\t\t\t// update cache\n\t\t\tif (cache) {\n\t\t\t\tself.renderCache[templateName][value] = html[0];\n\t\t\t}\n\t\n\t\t\treturn html[0];\n\t\t},\n\t\n\t\t/**\n\t\t * Clears the render cache for a template. If\n\t\t * no template is given, clears all render\n\t\t * caches.\n\t\t *\n\t\t * @param {string} templateName\n\t\t */\n\t\tclearCache: function(templateName) {\n\t\t\tvar self = this;\n\t\t\tif (typeof templateName === 'undefined') {\n\t\t\t\tself.renderCache = {};\n\t\t\t} else {\n\t\t\t\tdelete self.renderCache[templateName];\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Determines whether or not to display the\n\t\t * create item prompt, given a user input.\n\t\t *\n\t\t * @param {string} input\n\t\t * @return {boolean}\n\t\t */\n\t\tcanCreate: function(input) {\n\t\t\tvar self = this;\n\t\t\tif (!self.settings.create) return false;\n\t\t\tvar filter = self.settings.createFilter;\n\t\t\treturn input.length\n\t\t\t\t&& (typeof filter !== 'function' || filter.apply(self, [input]))\n\t\t\t\t&& (typeof filter !== 'string' || new RegExp(filter).test(input))\n\t\t\t\t&& (!(filter instanceof RegExp) || filter.test(input));\n\t\t}\n\t\n\t});\n\t\n\t\n\tSelectize.count = 0;\n\tSelectize.defaults = {\n\t\toptions: [],\n\t\toptgroups: [],\n\t\n\t\tplugins: [],\n\t\tdelimiter: ',',\n\t\tsplitOn: null, // regexp or string for splitting up values from a paste command\n\t\tpersist: true,\n\t\tdiacritics: true,\n\t\tcreate: false,\n\t\tcreateOnBlur: false,\n\t\tcreateFilter: null,\n\t\thighlight: true,\n\t\topenOnFocus: true,\n\t\tmaxOptions: 1000,\n\t\tmaxItems: null,\n\t\thideSelected: null,\n\t\taddPrecedence: false,\n\t\tselectOnTab: false,\n\t\tpreload: false,\n\t\tallowEmptyOption: false,\n\t\tcloseAfterSelect: false,\n\t\n\t\tscrollDuration: 60,\n\t\tloadThrottle: 300,\n\t\tloadingClass: 'loading',\n\t\n\t\tdataAttr: 'data-data',\n\t\toptgroupField: 'optgroup',\n\t\tvalueField: 'value',\n\t\tlabelField: 'text',\n\t\toptgroupLabelField: 'label',\n\t\toptgroupValueField: 'value',\n\t\tlockOptgroupOrder: false,\n\t\n\t\tsortField: '$order',\n\t\tsearchField: ['text'],\n\t\tsearchConjunction: 'and',\n\t\n\t\tmode: null,\n\t\twrapperClass: 'selectize-control',\n\t\tinputClass: 'selectize-input',\n\t\tdropdownClass: 'selectize-dropdown',\n\t\tdropdownContentClass: 'selectize-dropdown-content',\n\t\n\t\tdropdownParent: null,\n\t\n\t\tcopyClassesToDropdown: true,\n\t\n\t\t/*\n\t\tload                 : null, // function(query, callback) { ... }\n\t\tscore                : null, // function(search) { ... }\n\t\tonInitialize         : null, // function() { ... }\n\t\tonChange             : null, // function(value) { ... }\n\t\tonItemAdd            : null, // function(value, $item) { ... }\n\t\tonItemRemove         : null, // function(value) { ... }\n\t\tonClear              : null, // function() { ... }\n\t\tonOptionAdd          : null, // function(value, data) { ... }\n\t\tonOptionRemove       : null, // function(value) { ... }\n\t\tonOptionClear        : null, // function() { ... }\n\t\tonOptionGroupAdd     : null, // function(id, data) { ... }\n\t\tonOptionGroupRemove  : null, // function(id) { ... }\n\t\tonOptionGroupClear   : null, // function() { ... }\n\t\tonDropdownOpen       : null, // function($dropdown) { ... }\n\t\tonDropdownClose      : null, // function($dropdown) { ... }\n\t\tonType               : null, // function(str) { ... }\n\t\tonDelete             : null, // function(values) { ... }\n\t\t*/\n\t\n\t\trender: {\n\t\t\t/*\n\t\t\titem: null,\n\t\t\toptgroup: null,\n\t\t\toptgroup_header: null,\n\t\t\toption: null,\n\t\t\toption_create: null\n\t\t\t*/\n\t\t}\n\t};\n\t\n\t\n\t$.fn.selectize = function(settings_user) {\n\t\tvar defaults             = $.fn.selectize.defaults;\n\t\tvar settings             = $.extend({}, defaults, settings_user);\n\t\tvar attr_data            = settings.dataAttr;\n\t\tvar field_label          = settings.labelField;\n\t\tvar field_value          = settings.valueField;\n\t\tvar field_optgroup       = settings.optgroupField;\n\t\tvar field_optgroup_label = settings.optgroupLabelField;\n\t\tvar field_optgroup_value = settings.optgroupValueField;\n\t\n\t\t/**\n\t\t * Initializes selectize from a <input type=\"text\"> element.\n\t\t *\n\t\t * @param {object} $input\n\t\t * @param {object} settings_element\n\t\t */\n\t\tvar init_textbox = function($input, settings_element) {\n\t\t\tvar i, n, values, option;\n\t\n\t\t\tvar data_raw = $input.attr(attr_data);\n\t\n\t\t\tif (!data_raw) {\n\t\t\t\tvar value = $.trim($input.val() || '');\n\t\t\t\tif (!settings.allowEmptyOption && !value.length) return;\n\t\t\t\tvalues = value.split(settings.delimiter);\n\t\t\t\tfor (i = 0, n = values.length; i < n; i++) {\n\t\t\t\t\toption = {};\n\t\t\t\t\toption[field_label] = values[i];\n\t\t\t\t\toption[field_value] = values[i];\n\t\t\t\t\tsettings_element.options.push(option);\n\t\t\t\t}\n\t\t\t\tsettings_element.items = values;\n\t\t\t} else {\n\t\t\t\tsettings_element.options = JSON.parse(data_raw);\n\t\t\t\tfor (i = 0, n = settings_element.options.length; i < n; i++) {\n\t\t\t\t\tsettings_element.items.push(settings_element.options[i][field_value]);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\n\t\t/**\n\t\t * Initializes selectize from a <select> element.\n\t\t *\n\t\t * @param {object} $input\n\t\t * @param {object} settings_element\n\t\t */\n\t\tvar init_select = function($input, settings_element) {\n\t\t\tvar i, n, tagName, $children, order = 0;\n\t\t\tvar options = settings_element.options;\n\t\t\tvar optionsMap = {};\n\t\n\t\t\tvar readData = function($el) {\n\t\t\t\tvar data = attr_data && $el.attr(attr_data);\n\t\t\t\tif (typeof data === 'string' && data.length) {\n\t\t\t\t\treturn JSON.parse(data);\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t};\n\t\n\t\t\tvar addOption = function($option, group) {\n\t\t\t\t$option = $($option);\n\t\n\t\t\t\tvar value = hash_key($option.val());\n\t\t\t\tif (!value && !settings.allowEmptyOption) return;\n\t\n\t\t\t\t// if the option already exists, it's probably been\n\t\t\t\t// duplicated in another optgroup. in this case, push\n\t\t\t\t// the current group to the \"optgroup\" property on the\n\t\t\t\t// existing option so that it's rendered in both places.\n\t\t\t\tif (optionsMap.hasOwnProperty(value)) {\n\t\t\t\t\tif (group) {\n\t\t\t\t\t\tvar arr = optionsMap[value][field_optgroup];\n\t\t\t\t\t\tif (!arr) {\n\t\t\t\t\t\t\toptionsMap[value][field_optgroup] = group;\n\t\t\t\t\t\t} else if (!$.isArray(arr)) {\n\t\t\t\t\t\t\toptionsMap[value][field_optgroup] = [arr, group];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tarr.push(group);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tvar option             = readData($option) || {};\n\t\t\t\toption[field_label]    = option[field_label] || $option.text();\n\t\t\t\toption[field_value]    = option[field_value] || value;\n\t\t\t\toption[field_optgroup] = option[field_optgroup] || group;\n\t\n\t\t\t\toptionsMap[value] = option;\n\t\t\t\toptions.push(option);\n\t\n\t\t\t\tif ($option.is(':selected')) {\n\t\t\t\t\tsettings_element.items.push(value);\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tvar addGroup = function($optgroup) {\n\t\t\t\tvar i, n, id, optgroup, $options;\n\t\n\t\t\t\t$optgroup = $($optgroup);\n\t\t\t\tid = $optgroup.attr('label');\n\t\n\t\t\t\tif (id) {\n\t\t\t\t\toptgroup = readData($optgroup) || {};\n\t\t\t\t\toptgroup[field_optgroup_label] = id;\n\t\t\t\t\toptgroup[field_optgroup_value] = id;\n\t\t\t\t\tsettings_element.optgroups.push(optgroup);\n\t\t\t\t}\n\t\n\t\t\t\t$options = $('option', $optgroup);\n\t\t\t\tfor (i = 0, n = $options.length; i < n; i++) {\n\t\t\t\t\taddOption($options[i], id);\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tsettings_element.maxItems = $input.attr('multiple') ? null : 1;\n\t\n\t\t\t$children = $input.children();\n\t\t\tfor (i = 0, n = $children.length; i < n; i++) {\n\t\t\t\ttagName = $children[i].tagName.toLowerCase();\n\t\t\t\tif (tagName === 'optgroup') {\n\t\t\t\t\taddGroup($children[i]);\n\t\t\t\t} else if (tagName === 'option') {\n\t\t\t\t\taddOption($children[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\n\t\treturn this.each(function() {\n\t\t\tif (this.selectize) return;\n\t\n\t\t\tvar instance;\n\t\t\tvar $input = $(this);\n\t\t\tvar tag_name = this.tagName.toLowerCase();\n\t\t\tvar placeholder = $input.attr('placeholder') || $input.attr('data-placeholder');\n\t\t\tif (!placeholder && !settings.allowEmptyOption) {\n\t\t\t\tplaceholder = $input.children('option[value=\"\"]').text();\n\t\t\t}\n\t\n\t\t\tvar settings_element = {\n\t\t\t\t'placeholder' : placeholder,\n\t\t\t\t'options'     : [],\n\t\t\t\t'optgroups'   : [],\n\t\t\t\t'items'       : []\n\t\t\t};\n\t\n\t\t\tif (tag_name === 'select') {\n\t\t\t\tinit_select($input, settings_element);\n\t\t\t} else {\n\t\t\t\tinit_textbox($input, settings_element);\n\t\t\t}\n\t\n\t\t\tinstance = new Selectize($input, $.extend(true, {}, defaults, settings_element, settings_user));\n\t\t});\n\t};\n\t\n\t$.fn.selectize.defaults = Selectize.defaults;\n\t$.fn.selectize.support = {\n\t\tvalidity: SUPPORTS_VALIDITY_API\n\t};\n\t\n\t\n\tSelectize.define('drag_drop', function(options) {\n\t\tif (!$.fn.sortable) throw new Error('The \"drag_drop\" plugin requires jQuery UI \"sortable\".');\n\t\tif (this.settings.mode !== 'multi') return;\n\t\tvar self = this;\n\t\n\t\tself.lock = (function() {\n\t\t\tvar original = self.lock;\n\t\t\treturn function() {\n\t\t\t\tvar sortable = self.$control.data('sortable');\n\t\t\t\tif (sortable) sortable.disable();\n\t\t\t\treturn original.apply(self, arguments);\n\t\t\t};\n\t\t})();\n\t\n\t\tself.unlock = (function() {\n\t\t\tvar original = self.unlock;\n\t\t\treturn function() {\n\t\t\t\tvar sortable = self.$control.data('sortable');\n\t\t\t\tif (sortable) sortable.enable();\n\t\t\t\treturn original.apply(self, arguments);\n\t\t\t};\n\t\t})();\n\t\n\t\tself.setup = (function() {\n\t\t\tvar original = self.setup;\n\t\t\treturn function() {\n\t\t\t\toriginal.apply(this, arguments);\n\t\n\t\t\t\tvar $control = self.$control.sortable({\n\t\t\t\t\titems: '[data-value]',\n\t\t\t\t\tforcePlaceholderSize: true,\n\t\t\t\t\tdisabled: self.isLocked,\n\t\t\t\t\tstart: function(e, ui) {\n\t\t\t\t\t\tui.placeholder.css('width', ui.helper.css('width'));\n\t\t\t\t\t\t$control.css({overflow: 'visible'});\n\t\t\t\t\t},\n\t\t\t\t\tstop: function() {\n\t\t\t\t\t\t$control.css({overflow: 'hidden'});\n\t\t\t\t\t\tvar active = self.$activeItems ? self.$activeItems.slice() : null;\n\t\t\t\t\t\tvar values = [];\n\t\t\t\t\t\t$control.children('[data-value]').each(function() {\n\t\t\t\t\t\t\tvalues.push($(this).attr('data-value'));\n\t\t\t\t\t\t});\n\t\t\t\t\t\tself.setValue(values);\n\t\t\t\t\t\tself.setActiveItem(active);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\t\t})();\n\t\n\t});\n\t\n\tSelectize.define('dropdown_header', function(options) {\n\t\tvar self = this;\n\t\n\t\toptions = $.extend({\n\t\t\ttitle         : 'Untitled',\n\t\t\theaderClass   : 'selectize-dropdown-header',\n\t\t\ttitleRowClass : 'selectize-dropdown-header-title',\n\t\t\tlabelClass    : 'selectize-dropdown-header-label',\n\t\t\tcloseClass    : 'selectize-dropdown-header-close',\n\t\n\t\t\thtml: function(data) {\n\t\t\t\treturn (\n\t\t\t\t\t'<div class=\"' + data.headerClass + '\">' +\n\t\t\t\t\t\t'<div class=\"' + data.titleRowClass + '\">' +\n\t\t\t\t\t\t\t'<span class=\"' + data.labelClass + '\">' + data.title + '</span>' +\n\t\t\t\t\t\t\t'<a href=\"javascript:void(0)\" class=\"' + data.closeClass + '\">&times;</a>' +\n\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t'</div>'\n\t\t\t\t);\n\t\t\t}\n\t\t}, options);\n\t\n\t\tself.setup = (function() {\n\t\t\tvar original = self.setup;\n\t\t\treturn function() {\n\t\t\t\toriginal.apply(self, arguments);\n\t\t\t\tself.$dropdown_header = $(options.html(options));\n\t\t\t\tself.$dropdown.prepend(self.$dropdown_header);\n\t\t\t};\n\t\t})();\n\t\n\t});\n\t\n\tSelectize.define('optgroup_columns', function(options) {\n\t\tvar self = this;\n\t\n\t\toptions = $.extend({\n\t\t\tequalizeWidth  : true,\n\t\t\tequalizeHeight : true\n\t\t}, options);\n\t\n\t\tthis.getAdjacentOption = function($option, direction) {\n\t\t\tvar $options = $option.closest('[data-group]').find('[data-selectable]');\n\t\t\tvar index    = $options.index($option) + direction;\n\t\n\t\t\treturn index >= 0 && index < $options.length ? $options.eq(index) : $();\n\t\t};\n\t\n\t\tthis.onKeyDown = (function() {\n\t\t\tvar original = self.onKeyDown;\n\t\t\treturn function(e) {\n\t\t\t\tvar index, $option, $options, $optgroup;\n\t\n\t\t\t\tif (this.isOpen && (e.keyCode === KEY_LEFT || e.keyCode === KEY_RIGHT)) {\n\t\t\t\t\tself.ignoreHover = true;\n\t\t\t\t\t$optgroup = this.$activeOption.closest('[data-group]');\n\t\t\t\t\tindex = $optgroup.find('[data-selectable]').index(this.$activeOption);\n\t\n\t\t\t\t\tif(e.keyCode === KEY_LEFT) {\n\t\t\t\t\t\t$optgroup = $optgroup.prev('[data-group]');\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$optgroup = $optgroup.next('[data-group]');\n\t\t\t\t\t}\n\t\n\t\t\t\t\t$options = $optgroup.find('[data-selectable]');\n\t\t\t\t\t$option  = $options.eq(Math.min($options.length - 1, index));\n\t\t\t\t\tif ($option.length) {\n\t\t\t\t\t\tthis.setActiveOption($option);\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\treturn original.apply(this, arguments);\n\t\t\t};\n\t\t})();\n\t\n\t\tvar getScrollbarWidth = function() {\n\t\t\tvar div;\n\t\t\tvar width = getScrollbarWidth.width;\n\t\t\tvar doc = document;\n\t\n\t\t\tif (typeof width === 'undefined') {\n\t\t\t\tdiv = doc.createElement('div');\n\t\t\t\tdiv.innerHTML = '<div style=\"width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;\"><div style=\"width:1px;height:100px;\"></div></div>';\n\t\t\t\tdiv = div.firstChild;\n\t\t\t\tdoc.body.appendChild(div);\n\t\t\t\twidth = getScrollbarWidth.width = div.offsetWidth - div.clientWidth;\n\t\t\t\tdoc.body.removeChild(div);\n\t\t\t}\n\t\t\treturn width;\n\t\t};\n\t\n\t\tvar equalizeSizes = function() {\n\t\t\tvar i, n, height_max, width, width_last, width_parent, $optgroups;\n\t\n\t\t\t$optgroups = $('[data-group]', self.$dropdown_content);\n\t\t\tn = $optgroups.length;\n\t\t\tif (!n || !self.$dropdown_content.width()) return;\n\t\n\t\t\tif (options.equalizeHeight) {\n\t\t\t\theight_max = 0;\n\t\t\t\tfor (i = 0; i < n; i++) {\n\t\t\t\t\theight_max = Math.max(height_max, $optgroups.eq(i).height());\n\t\t\t\t}\n\t\t\t\t$optgroups.css({height: height_max});\n\t\t\t}\n\t\n\t\t\tif (options.equalizeWidth) {\n\t\t\t\twidth_parent = self.$dropdown_content.innerWidth() - getScrollbarWidth();\n\t\t\t\twidth = Math.round(width_parent / n);\n\t\t\t\t$optgroups.css({width: width});\n\t\t\t\tif (n > 1) {\n\t\t\t\t\twidth_last = width_parent - width * (n - 1);\n\t\t\t\t\t$optgroups.eq(n - 1).css({width: width_last});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\n\t\tif (options.equalizeHeight || options.equalizeWidth) {\n\t\t\thook.after(this, 'positionDropdown', equalizeSizes);\n\t\t\thook.after(this, 'refreshOptions', equalizeSizes);\n\t\t}\n\t\n\t\n\t});\n\t\n\tSelectize.define('remove_button', function(options) {\n\t\toptions = $.extend({\n\t\t\t\tlabel     : '&times;',\n\t\t\t\ttitle     : 'Remove',\n\t\t\t\tclassName : 'remove',\n\t\t\t\tappend    : true\n\t\t\t}, options);\n\t\n\t\t\tvar singleClose = function(thisRef, options) {\n\t\n\t\t\t\toptions.className = 'remove-single';\n\t\n\t\t\t\tvar self = thisRef;\n\t\t\t\tvar html = '<a href=\"javascript:void(0)\" class=\"' + options.className + '\" tabindex=\"-1\" title=\"' + escape_html(options.title) + '\">' + options.label + '</a>';\n\t\n\t\t\t\t/**\n\t\t\t\t * Appends an element as a child (with raw HTML).\n\t\t\t\t *\n\t\t\t\t * @param {string} html_container\n\t\t\t\t * @param {string} html_element\n\t\t\t\t * @return {string}\n\t\t\t\t */\n\t\t\t\tvar append = function(html_container, html_element) {\n\t\t\t\t\treturn html_container + html_element;\n\t\t\t\t};\n\t\n\t\t\t\tthisRef.setup = (function() {\n\t\t\t\t\tvar original = self.setup;\n\t\t\t\t\treturn function() {\n\t\t\t\t\t\t// override the item rendering method to add the button to each\n\t\t\t\t\t\tif (options.append) {\n\t\t\t\t\t\t\tvar id = $(self.$input.context).attr('id');\n\t\t\t\t\t\t\tvar selectizer = $('#'+id);\n\t\n\t\t\t\t\t\t\tvar render_item = self.settings.render.item;\n\t\t\t\t\t\t\tself.settings.render.item = function(data) {\n\t\t\t\t\t\t\t\treturn append(render_item.apply(thisRef, arguments), html);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\toriginal.apply(thisRef, arguments);\n\t\n\t\t\t\t\t\t// add event listener\n\t\t\t\t\t\tthisRef.$control.on('click', '.' + options.className, function(e) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tif (self.isLocked) return;\n\t\n\t\t\t\t\t\t\tself.clear();\n\t\t\t\t\t\t});\n\t\n\t\t\t\t\t};\n\t\t\t\t})();\n\t\t\t};\n\t\n\t\t\tvar multiClose = function(thisRef, options) {\n\t\n\t\t\t\tvar self = thisRef;\n\t\t\t\tvar html = '<a href=\"javascript:void(0)\" class=\"' + options.className + '\" tabindex=\"-1\" title=\"' + escape_html(options.title) + '\">' + options.label + '</a>';\n\t\n\t\t\t\t/**\n\t\t\t\t * Appends an element as a child (with raw HTML).\n\t\t\t\t *\n\t\t\t\t * @param {string} html_container\n\t\t\t\t * @param {string} html_element\n\t\t\t\t * @return {string}\n\t\t\t\t */\n\t\t\t\tvar append = function(html_container, html_element) {\n\t\t\t\t\tvar pos = html_container.search(/(<\\/[^>]+>\\s*)$/);\n\t\t\t\t\treturn html_container.substring(0, pos) + html_element + html_container.substring(pos);\n\t\t\t\t};\n\t\n\t\t\t\tthisRef.setup = (function() {\n\t\t\t\t\tvar original = self.setup;\n\t\t\t\t\treturn function() {\n\t\t\t\t\t\t// override the item rendering method to add the button to each\n\t\t\t\t\t\tif (options.append) {\n\t\t\t\t\t\t\tvar render_item = self.settings.render.item;\n\t\t\t\t\t\t\tself.settings.render.item = function(data) {\n\t\t\t\t\t\t\t\treturn append(render_item.apply(thisRef, arguments), html);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\toriginal.apply(thisRef, arguments);\n\t\n\t\t\t\t\t\t// add event listener\n\t\t\t\t\t\tthisRef.$control.on('click', '.' + options.className, function(e) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tif (self.isLocked) return;\n\t\n\t\t\t\t\t\t\tvar $item = $(e.currentTarget).parent();\n\t\t\t\t\t\t\tself.setActiveItem($item);\n\t\t\t\t\t\t\tif (self.deleteSelection()) {\n\t\t\t\t\t\t\t\tself.setCaret(self.items.length);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\n\t\t\t\t\t};\n\t\t\t\t})();\n\t\t\t};\n\t\n\t\t\tif (this.settings.mode === 'single') {\n\t\t\t\tsingleClose(this, options);\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tmultiClose(this, options);\n\t\t\t}\n\t});\n\t\n\t\n\tSelectize.define('restore_on_backspace', function(options) {\n\t\tvar self = this;\n\t\n\t\toptions.text = options.text || function(option) {\n\t\t\treturn option[this.settings.labelField];\n\t\t};\n\t\n\t\tthis.onKeyDown = (function() {\n\t\t\tvar original = self.onKeyDown;\n\t\t\treturn function(e) {\n\t\t\t\tvar index, option;\n\t\t\t\tif (e.keyCode === KEY_BACKSPACE && this.$control_input.val() === '' && !this.$activeItems.length) {\n\t\t\t\t\tindex = this.caretPos - 1;\n\t\t\t\t\tif (index >= 0 && index < this.items.length) {\n\t\t\t\t\t\toption = this.options[this.items[index]];\n\t\t\t\t\t\tif (this.deleteSelection(e)) {\n\t\t\t\t\t\t\tthis.setTextboxValue(options.text.apply(this, [option]));\n\t\t\t\t\t\t\tthis.refreshOptions(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn original.apply(this, arguments);\n\t\t\t};\n\t\t})();\n\t});\n\t\n\n\treturn Selectize;\n}));\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../~/selectize/dist/js/standalone/selectize.js\n ** module id = 67\n ** module chunks = 0\n **/","angular.module('selectize', []).value('selectizeConfig', {}).directive(\"selectize\", ['selectizeConfig', function(selectizeConfig) {\n    return {\n        restrict: 'EA',\n        require: '^ngModel',\n        scope: { ngModel: '=', config: '=?', options: '=?', ngDisabled: '=', ngRequired: '&' },\n        link: function(scope, element, attrs, modelCtrl) {\n\n            var selectize,\n                settings = angular.extend({}, Selectize.defaults, selectizeConfig, scope.config);\n\n            scope.options = scope.options || [];\n            scope.config = scope.config || {};\n\n            var isEmpty = function(val) {\n                return val === undefined || val === null || !val.length; //support checking empty arrays\n            };\n\n            var toggle = function(disabled) {\n                disabled ? selectize.disable() : selectize.enable();\n            }\n\n            var validate = function() {\n                var isInvalid = (scope.ngRequired() || attrs.required || settings.required) && isEmpty(scope.ngModel);\n                modelCtrl.$setValidity('required', !isInvalid);\n            };\n\n            var setSelectizeOptions = function(curr, prev) {\n                angular.forEach(prev, function(opt){\n                    if(curr.indexOf(opt) === -1){\n                        var value = opt[settings.valueField];\n                        selectize.removeOption(value, true);\n                    }\n                });\n\n                selectize.addOption(curr);\n\n                selectize.refreshOptions(false); // updates results if user has entered a query\n                setSelectizeValue();\n            }\n\n            var setSelectizeValue = function() {\n                validate();\n\n                selectize.$control.toggleClass('ng-valid', modelCtrl.$valid);\n                selectize.$control.toggleClass('ng-invalid', modelCtrl.$invalid);\n                selectize.$control.toggleClass('ng-dirty', modelCtrl.$dirty);\n                selectize.$control.toggleClass('ng-pristine', modelCtrl.$pristine);\n\n                if (!angular.equals(selectize.items, scope.ngModel)) {\n                    selectize.setValue(scope.ngModel, true);\n                }\n            }\n\n            settings.onChange = function(value) {\n                var value = angular.copy(selectize.items);\n                if (settings.maxItems == 1) {\n                    value = value[0]\n                }\n                modelCtrl.$setViewValue( value );\n\n                if (scope.config.onChange) {\n                    scope.config.onChange.apply(this, arguments);\n                }\n            };\n\n            settings.onOptionAdd = function(value, data) {\n                if( scope.options.indexOf(data) === -1 ) {\n                    scope.options.push(data);\n\n                    if (scope.config.onOptionAdd) {\n                        scope.config.onOptionAdd.apply(this, arguments);\n                    }\n                }\n            };\n\n            settings.onInitialize = function() {\n                selectize = element[0].selectize;\n\n                setSelectizeOptions(scope.options);\n\n                //provides a way to access the selectize element from an\n                //angular controller\n                if (scope.config.onInitialize) {\n                    scope.config.onInitialize(selectize);\n                }\n\n                scope.$watchCollection('options', setSelectizeOptions);\n                scope.$watch('ngModel', setSelectizeValue);\n                scope.$watch('ngDisabled', toggle);\n            };\n\n            element.selectize(settings);\n\n            element.on('$destroy', function() {\n                if (selectize) {\n                    selectize.destroy();\n                    element = null;\n                }\n            });\n        }\n    };\n}]);\n\n\n/** WEBPACK FOOTER **\n ** ./components/formly/selectize.js\n **/","// TinyColor v1.4.1\n// https://github.com/bgrins/TinyColor\n// Brian Grinstead, MIT License\n\n(function(Math) {\n\nvar trimLeft = /^\\s+/,\n    trimRight = /\\s+$/,\n    tinyCounter = 0,\n    mathRound = Math.round,\n    mathMin = Math.min,\n    mathMax = Math.max,\n    mathRandom = Math.random;\n\nfunction tinycolor (color, opts) {\n\n    color = (color) ? color : '';\n    opts = opts || { };\n\n    // If input is already a tinycolor, return itself\n    if (color instanceof tinycolor) {\n       return color;\n    }\n    // If we are called as a function, call using new instead\n    if (!(this instanceof tinycolor)) {\n        return new tinycolor(color, opts);\n    }\n\n    var rgb = inputToRGB(color);\n    this._originalInput = color,\n    this._r = rgb.r,\n    this._g = rgb.g,\n    this._b = rgb.b,\n    this._a = rgb.a,\n    this._roundA = mathRound(100*this._a) / 100,\n    this._format = opts.format || rgb.format;\n    this._gradientType = opts.gradientType;\n\n    // Don't let the range of [0,255] come back in [0,1].\n    // Potentially lose a little bit of precision here, but will fix issues where\n    // .5 gets interpreted as half of the total, instead of half of 1\n    // If it was supposed to be 128, this was already taken care of by `inputToRgb`\n    if (this._r < 1) { this._r = mathRound(this._r); }\n    if (this._g < 1) { this._g = mathRound(this._g); }\n    if (this._b < 1) { this._b = mathRound(this._b); }\n\n    this._ok = rgb.ok;\n    this._tc_id = tinyCounter++;\n}\n\ntinycolor.prototype = {\n    isDark: function() {\n        return this.getBrightness() < 128;\n    },\n    isLight: function() {\n        return !this.isDark();\n    },\n    isValid: function() {\n        return this._ok;\n    },\n    getOriginalInput: function() {\n      return this._originalInput;\n    },\n    getFormat: function() {\n        return this._format;\n    },\n    getAlpha: function() {\n        return this._a;\n    },\n    getBrightness: function() {\n        //http://www.w3.org/TR/AERT#color-contrast\n        var rgb = this.toRgb();\n        return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\n    },\n    getLuminance: function() {\n        //http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n        var rgb = this.toRgb();\n        var RsRGB, GsRGB, BsRGB, R, G, B;\n        RsRGB = rgb.r/255;\n        GsRGB = rgb.g/255;\n        BsRGB = rgb.b/255;\n\n        if (RsRGB <= 0.03928) {R = RsRGB / 12.92;} else {R = Math.pow(((RsRGB + 0.055) / 1.055), 2.4);}\n        if (GsRGB <= 0.03928) {G = GsRGB / 12.92;} else {G = Math.pow(((GsRGB + 0.055) / 1.055), 2.4);}\n        if (BsRGB <= 0.03928) {B = BsRGB / 12.92;} else {B = Math.pow(((BsRGB + 0.055) / 1.055), 2.4);}\n        return (0.2126 * R) + (0.7152 * G) + (0.0722 * B);\n    },\n    setAlpha: function(value) {\n        this._a = boundAlpha(value);\n        this._roundA = mathRound(100*this._a) / 100;\n        return this;\n    },\n    toHsv: function() {\n        var hsv = rgbToHsv(this._r, this._g, this._b);\n        return { h: hsv.h * 360, s: hsv.s, v: hsv.v, a: this._a };\n    },\n    toHsvString: function() {\n        var hsv = rgbToHsv(this._r, this._g, this._b);\n        var h = mathRound(hsv.h * 360), s = mathRound(hsv.s * 100), v = mathRound(hsv.v * 100);\n        return (this._a == 1) ?\n          \"hsv(\"  + h + \", \" + s + \"%, \" + v + \"%)\" :\n          \"hsva(\" + h + \", \" + s + \"%, \" + v + \"%, \"+ this._roundA + \")\";\n    },\n    toHsl: function() {\n        var hsl = rgbToHsl(this._r, this._g, this._b);\n        return { h: hsl.h * 360, s: hsl.s, l: hsl.l, a: this._a };\n    },\n    toHslString: function() {\n        var hsl = rgbToHsl(this._r, this._g, this._b);\n        var h = mathRound(hsl.h * 360), s = mathRound(hsl.s * 100), l = mathRound(hsl.l * 100);\n        return (this._a == 1) ?\n          \"hsl(\"  + h + \", \" + s + \"%, \" + l + \"%)\" :\n          \"hsla(\" + h + \", \" + s + \"%, \" + l + \"%, \"+ this._roundA + \")\";\n    },\n    toHex: function(allow3Char) {\n        return rgbToHex(this._r, this._g, this._b, allow3Char);\n    },\n    toHexString: function(allow3Char) {\n        return '#' + this.toHex(allow3Char);\n    },\n    toHex8: function(allow4Char) {\n        return rgbaToHex(this._r, this._g, this._b, this._a, allow4Char);\n    },\n    toHex8String: function(allow4Char) {\n        return '#' + this.toHex8(allow4Char);\n    },\n    toRgb: function() {\n        return { r: mathRound(this._r), g: mathRound(this._g), b: mathRound(this._b), a: this._a };\n    },\n    toRgbString: function() {\n        return (this._a == 1) ?\n          \"rgb(\"  + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \")\" :\n          \"rgba(\" + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \", \" + this._roundA + \")\";\n    },\n    toPercentageRgb: function() {\n        return { r: mathRound(bound01(this._r, 255) * 100) + \"%\", g: mathRound(bound01(this._g, 255) * 100) + \"%\", b: mathRound(bound01(this._b, 255) * 100) + \"%\", a: this._a };\n    },\n    toPercentageRgbString: function() {\n        return (this._a == 1) ?\n          \"rgb(\"  + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%)\" :\n          \"rgba(\" + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%, \" + this._roundA + \")\";\n    },\n    toName: function() {\n        if (this._a === 0) {\n            return \"transparent\";\n        }\n\n        if (this._a < 1) {\n            return false;\n        }\n\n        return hexNames[rgbToHex(this._r, this._g, this._b, true)] || false;\n    },\n    toFilter: function(secondColor) {\n        var hex8String = '#' + rgbaToArgbHex(this._r, this._g, this._b, this._a);\n        var secondHex8String = hex8String;\n        var gradientType = this._gradientType ? \"GradientType = 1, \" : \"\";\n\n        if (secondColor) {\n            var s = tinycolor(secondColor);\n            secondHex8String = '#' + rgbaToArgbHex(s._r, s._g, s._b, s._a);\n        }\n\n        return \"progid:DXImageTransform.Microsoft.gradient(\"+gradientType+\"startColorstr=\"+hex8String+\",endColorstr=\"+secondHex8String+\")\";\n    },\n    toString: function(format) {\n        var formatSet = !!format;\n        format = format || this._format;\n\n        var formattedString = false;\n        var hasAlpha = this._a < 1 && this._a >= 0;\n        var needsAlphaFormat = !formatSet && hasAlpha && (format === \"hex\" || format === \"hex6\" || format === \"hex3\" || format === \"hex4\" || format === \"hex8\" || format === \"name\");\n\n        if (needsAlphaFormat) {\n            // Special case for \"transparent\", all other non-alpha formats\n            // will return rgba when there is transparency.\n            if (format === \"name\" && this._a === 0) {\n                return this.toName();\n            }\n            return this.toRgbString();\n        }\n        if (format === \"rgb\") {\n            formattedString = this.toRgbString();\n        }\n        if (format === \"prgb\") {\n            formattedString = this.toPercentageRgbString();\n        }\n        if (format === \"hex\" || format === \"hex6\") {\n            formattedString = this.toHexString();\n        }\n        if (format === \"hex3\") {\n            formattedString = this.toHexString(true);\n        }\n        if (format === \"hex4\") {\n            formattedString = this.toHex8String(true);\n        }\n        if (format === \"hex8\") {\n            formattedString = this.toHex8String();\n        }\n        if (format === \"name\") {\n            formattedString = this.toName();\n        }\n        if (format === \"hsl\") {\n            formattedString = this.toHslString();\n        }\n        if (format === \"hsv\") {\n            formattedString = this.toHsvString();\n        }\n\n        return formattedString || this.toHexString();\n    },\n    clone: function() {\n        return tinycolor(this.toString());\n    },\n\n    _applyModification: function(fn, args) {\n        var color = fn.apply(null, [this].concat([].slice.call(args)));\n        this._r = color._r;\n        this._g = color._g;\n        this._b = color._b;\n        this.setAlpha(color._a);\n        return this;\n    },\n    lighten: function() {\n        return this._applyModification(lighten, arguments);\n    },\n    brighten: function() {\n        return this._applyModification(brighten, arguments);\n    },\n    darken: function() {\n        return this._applyModification(darken, arguments);\n    },\n    desaturate: function() {\n        return this._applyModification(desaturate, arguments);\n    },\n    saturate: function() {\n        return this._applyModification(saturate, arguments);\n    },\n    greyscale: function() {\n        return this._applyModification(greyscale, arguments);\n    },\n    spin: function() {\n        return this._applyModification(spin, arguments);\n    },\n\n    _applyCombination: function(fn, args) {\n        return fn.apply(null, [this].concat([].slice.call(args)));\n    },\n    analogous: function() {\n        return this._applyCombination(analogous, arguments);\n    },\n    complement: function() {\n        return this._applyCombination(complement, arguments);\n    },\n    monochromatic: function() {\n        return this._applyCombination(monochromatic, arguments);\n    },\n    splitcomplement: function() {\n        return this._applyCombination(splitcomplement, arguments);\n    },\n    triad: function() {\n        return this._applyCombination(triad, arguments);\n    },\n    tetrad: function() {\n        return this._applyCombination(tetrad, arguments);\n    }\n};\n\n// If input is an object, force 1 into \"1.0\" to handle ratios properly\n// String input requires \"1.0\" as input, so 1 will be treated as 1\ntinycolor.fromRatio = function(color, opts) {\n    if (typeof color == \"object\") {\n        var newColor = {};\n        for (var i in color) {\n            if (color.hasOwnProperty(i)) {\n                if (i === \"a\") {\n                    newColor[i] = color[i];\n                }\n                else {\n                    newColor[i] = convertToPercentage(color[i]);\n                }\n            }\n        }\n        color = newColor;\n    }\n\n    return tinycolor(color, opts);\n};\n\n// Given a string or object, convert that input to RGB\n// Possible string inputs:\n//\n//     \"red\"\n//     \"#f00\" or \"f00\"\n//     \"#ff0000\" or \"ff0000\"\n//     \"#ff000000\" or \"ff000000\"\n//     \"rgb 255 0 0\" or \"rgb (255, 0, 0)\"\n//     \"rgb 1.0 0 0\" or \"rgb (1, 0, 0)\"\n//     \"rgba (255, 0, 0, 1)\" or \"rgba 255, 0, 0, 1\"\n//     \"rgba (1.0, 0, 0, 1)\" or \"rgba 1.0, 0, 0, 1\"\n//     \"hsl(0, 100%, 50%)\" or \"hsl 0 100% 50%\"\n//     \"hsla(0, 100%, 50%, 1)\" or \"hsla 0 100% 50%, 1\"\n//     \"hsv(0, 100%, 100%)\" or \"hsv 0 100% 100%\"\n//\nfunction inputToRGB(color) {\n\n    var rgb = { r: 0, g: 0, b: 0 };\n    var a = 1;\n    var s = null;\n    var v = null;\n    var l = null;\n    var ok = false;\n    var format = false;\n\n    if (typeof color == \"string\") {\n        color = stringInputToObject(color);\n    }\n\n    if (typeof color == \"object\") {\n        if (isValidCSSUnit(color.r) && isValidCSSUnit(color.g) && isValidCSSUnit(color.b)) {\n            rgb = rgbToRgb(color.r, color.g, color.b);\n            ok = true;\n            format = String(color.r).substr(-1) === \"%\" ? \"prgb\" : \"rgb\";\n        }\n        else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.v)) {\n            s = convertToPercentage(color.s);\n            v = convertToPercentage(color.v);\n            rgb = hsvToRgb(color.h, s, v);\n            ok = true;\n            format = \"hsv\";\n        }\n        else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.l)) {\n            s = convertToPercentage(color.s);\n            l = convertToPercentage(color.l);\n            rgb = hslToRgb(color.h, s, l);\n            ok = true;\n            format = \"hsl\";\n        }\n\n        if (color.hasOwnProperty(\"a\")) {\n            a = color.a;\n        }\n    }\n\n    a = boundAlpha(a);\n\n    return {\n        ok: ok,\n        format: color.format || format,\n        r: mathMin(255, mathMax(rgb.r, 0)),\n        g: mathMin(255, mathMax(rgb.g, 0)),\n        b: mathMin(255, mathMax(rgb.b, 0)),\n        a: a\n    };\n}\n\n\n// Conversion Functions\n// --------------------\n\n// `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:\n// <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>\n\n// `rgbToRgb`\n// Handle bounds / percentage checking to conform to CSS color spec\n// <http://www.w3.org/TR/css3-color/>\n// *Assumes:* r, g, b in [0, 255] or [0, 1]\n// *Returns:* { r, g, b } in [0, 255]\nfunction rgbToRgb(r, g, b){\n    return {\n        r: bound01(r, 255) * 255,\n        g: bound01(g, 255) * 255,\n        b: bound01(b, 255) * 255\n    };\n}\n\n// `rgbToHsl`\n// Converts an RGB color value to HSL.\n// *Assumes:* r, g, and b are contained in [0, 255] or [0, 1]\n// *Returns:* { h, s, l } in [0,1]\nfunction rgbToHsl(r, g, b) {\n\n    r = bound01(r, 255);\n    g = bound01(g, 255);\n    b = bound01(b, 255);\n\n    var max = mathMax(r, g, b), min = mathMin(r, g, b);\n    var h, s, l = (max + min) / 2;\n\n    if(max == min) {\n        h = s = 0; // achromatic\n    }\n    else {\n        var d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n        switch(max) {\n            case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n            case g: h = (b - r) / d + 2; break;\n            case b: h = (r - g) / d + 4; break;\n        }\n\n        h /= 6;\n    }\n\n    return { h: h, s: s, l: l };\n}\n\n// `hslToRgb`\n// Converts an HSL color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\nfunction hslToRgb(h, s, l) {\n    var r, g, b;\n\n    h = bound01(h, 360);\n    s = bound01(s, 100);\n    l = bound01(l, 100);\n\n    function hue2rgb(p, q, t) {\n        if(t < 0) t += 1;\n        if(t > 1) t -= 1;\n        if(t < 1/6) return p + (q - p) * 6 * t;\n        if(t < 1/2) return q;\n        if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;\n        return p;\n    }\n\n    if(s === 0) {\n        r = g = b = l; // achromatic\n    }\n    else {\n        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        var p = 2 * l - q;\n        r = hue2rgb(p, q, h + 1/3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1/3);\n    }\n\n    return { r: r * 255, g: g * 255, b: b * 255 };\n}\n\n// `rgbToHsv`\n// Converts an RGB color value to HSV\n// *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]\n// *Returns:* { h, s, v } in [0,1]\nfunction rgbToHsv(r, g, b) {\n\n    r = bound01(r, 255);\n    g = bound01(g, 255);\n    b = bound01(b, 255);\n\n    var max = mathMax(r, g, b), min = mathMin(r, g, b);\n    var h, s, v = max;\n\n    var d = max - min;\n    s = max === 0 ? 0 : d / max;\n\n    if(max == min) {\n        h = 0; // achromatic\n    }\n    else {\n        switch(max) {\n            case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n            case g: h = (b - r) / d + 2; break;\n            case b: h = (r - g) / d + 4; break;\n        }\n        h /= 6;\n    }\n    return { h: h, s: s, v: v };\n}\n\n// `hsvToRgb`\n// Converts an HSV color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\n function hsvToRgb(h, s, v) {\n\n    h = bound01(h, 360) * 6;\n    s = bound01(s, 100);\n    v = bound01(v, 100);\n\n    var i = Math.floor(h),\n        f = h - i,\n        p = v * (1 - s),\n        q = v * (1 - f * s),\n        t = v * (1 - (1 - f) * s),\n        mod = i % 6,\n        r = [v, q, p, p, t, v][mod],\n        g = [t, v, v, q, p, p][mod],\n        b = [p, p, t, v, v, q][mod];\n\n    return { r: r * 255, g: g * 255, b: b * 255 };\n}\n\n// `rgbToHex`\n// Converts an RGB color to hex\n// Assumes r, g, and b are contained in the set [0, 255]\n// Returns a 3 or 6 character hex\nfunction rgbToHex(r, g, b, allow3Char) {\n\n    var hex = [\n        pad2(mathRound(r).toString(16)),\n        pad2(mathRound(g).toString(16)),\n        pad2(mathRound(b).toString(16))\n    ];\n\n    // Return a 3 character hex if possible\n    if (allow3Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1)) {\n        return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\n    }\n\n    return hex.join(\"\");\n}\n\n// `rgbaToHex`\n// Converts an RGBA color plus alpha transparency to hex\n// Assumes r, g, b are contained in the set [0, 255] and\n// a in [0, 1]. Returns a 4 or 8 character rgba hex\nfunction rgbaToHex(r, g, b, a, allow4Char) {\n\n    var hex = [\n        pad2(mathRound(r).toString(16)),\n        pad2(mathRound(g).toString(16)),\n        pad2(mathRound(b).toString(16)),\n        pad2(convertDecimalToHex(a))\n    ];\n\n    // Return a 4 character hex if possible\n    if (allow4Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1) && hex[3].charAt(0) == hex[3].charAt(1)) {\n        return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0) + hex[3].charAt(0);\n    }\n\n    return hex.join(\"\");\n}\n\n// `rgbaToArgbHex`\n// Converts an RGBA color to an ARGB Hex8 string\n// Rarely used, but required for \"toFilter()\"\nfunction rgbaToArgbHex(r, g, b, a) {\n\n    var hex = [\n        pad2(convertDecimalToHex(a)),\n        pad2(mathRound(r).toString(16)),\n        pad2(mathRound(g).toString(16)),\n        pad2(mathRound(b).toString(16))\n    ];\n\n    return hex.join(\"\");\n}\n\n// `equals`\n// Can be called with any tinycolor input\ntinycolor.equals = function (color1, color2) {\n    if (!color1 || !color2) { return false; }\n    return tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString();\n};\n\ntinycolor.random = function() {\n    return tinycolor.fromRatio({\n        r: mathRandom(),\n        g: mathRandom(),\n        b: mathRandom()\n    });\n};\n\n\n// Modification Functions\n// ----------------------\n// Thanks to less.js for some of the basics here\n// <https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js>\n\nfunction desaturate(color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.s -= amount / 100;\n    hsl.s = clamp01(hsl.s);\n    return tinycolor(hsl);\n}\n\nfunction saturate(color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.s += amount / 100;\n    hsl.s = clamp01(hsl.s);\n    return tinycolor(hsl);\n}\n\nfunction greyscale(color) {\n    return tinycolor(color).desaturate(100);\n}\n\nfunction lighten (color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.l += amount / 100;\n    hsl.l = clamp01(hsl.l);\n    return tinycolor(hsl);\n}\n\nfunction brighten(color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var rgb = tinycolor(color).toRgb();\n    rgb.r = mathMax(0, mathMin(255, rgb.r - mathRound(255 * - (amount / 100))));\n    rgb.g = mathMax(0, mathMin(255, rgb.g - mathRound(255 * - (amount / 100))));\n    rgb.b = mathMax(0, mathMin(255, rgb.b - mathRound(255 * - (amount / 100))));\n    return tinycolor(rgb);\n}\n\nfunction darken (color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.l -= amount / 100;\n    hsl.l = clamp01(hsl.l);\n    return tinycolor(hsl);\n}\n\n// Spin takes a positive or negative amount within [-360, 360] indicating the change of hue.\n// Values outside of this range will be wrapped into this range.\nfunction spin(color, amount) {\n    var hsl = tinycolor(color).toHsl();\n    var hue = (hsl.h + amount) % 360;\n    hsl.h = hue < 0 ? 360 + hue : hue;\n    return tinycolor(hsl);\n}\n\n// Combination Functions\n// ---------------------\n// Thanks to jQuery xColor for some of the ideas behind these\n// <https://github.com/infusion/jQuery-xcolor/blob/master/jquery.xcolor.js>\n\nfunction complement(color) {\n    var hsl = tinycolor(color).toHsl();\n    hsl.h = (hsl.h + 180) % 360;\n    return tinycolor(hsl);\n}\n\nfunction triad(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [\n        tinycolor(color),\n        tinycolor({ h: (h + 120) % 360, s: hsl.s, l: hsl.l }),\n        tinycolor({ h: (h + 240) % 360, s: hsl.s, l: hsl.l })\n    ];\n}\n\nfunction tetrad(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [\n        tinycolor(color),\n        tinycolor({ h: (h + 90) % 360, s: hsl.s, l: hsl.l }),\n        tinycolor({ h: (h + 180) % 360, s: hsl.s, l: hsl.l }),\n        tinycolor({ h: (h + 270) % 360, s: hsl.s, l: hsl.l })\n    ];\n}\n\nfunction splitcomplement(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [\n        tinycolor(color),\n        tinycolor({ h: (h + 72) % 360, s: hsl.s, l: hsl.l}),\n        tinycolor({ h: (h + 216) % 360, s: hsl.s, l: hsl.l})\n    ];\n}\n\nfunction analogous(color, results, slices) {\n    results = results || 6;\n    slices = slices || 30;\n\n    var hsl = tinycolor(color).toHsl();\n    var part = 360 / slices;\n    var ret = [tinycolor(color)];\n\n    for (hsl.h = ((hsl.h - (part * results >> 1)) + 720) % 360; --results; ) {\n        hsl.h = (hsl.h + part) % 360;\n        ret.push(tinycolor(hsl));\n    }\n    return ret;\n}\n\nfunction monochromatic(color, results) {\n    results = results || 6;\n    var hsv = tinycolor(color).toHsv();\n    var h = hsv.h, s = hsv.s, v = hsv.v;\n    var ret = [];\n    var modification = 1 / results;\n\n    while (results--) {\n        ret.push(tinycolor({ h: h, s: s, v: v}));\n        v = (v + modification) % 1;\n    }\n\n    return ret;\n}\n\n// Utility Functions\n// ---------------------\n\ntinycolor.mix = function(color1, color2, amount) {\n    amount = (amount === 0) ? 0 : (amount || 50);\n\n    var rgb1 = tinycolor(color1).toRgb();\n    var rgb2 = tinycolor(color2).toRgb();\n\n    var p = amount / 100;\n\n    var rgba = {\n        r: ((rgb2.r - rgb1.r) * p) + rgb1.r,\n        g: ((rgb2.g - rgb1.g) * p) + rgb1.g,\n        b: ((rgb2.b - rgb1.b) * p) + rgb1.b,\n        a: ((rgb2.a - rgb1.a) * p) + rgb1.a\n    };\n\n    return tinycolor(rgba);\n};\n\n\n// Readability Functions\n// ---------------------\n// <http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef (WCAG Version 2)\n\n// `contrast`\n// Analyze the 2 colors and returns the color contrast defined by (WCAG Version 2)\ntinycolor.readability = function(color1, color2) {\n    var c1 = tinycolor(color1);\n    var c2 = tinycolor(color2);\n    return (Math.max(c1.getLuminance(),c2.getLuminance())+0.05) / (Math.min(c1.getLuminance(),c2.getLuminance())+0.05);\n};\n\n// `isReadable`\n// Ensure that foreground and background color combinations meet WCAG2 guidelines.\n// The third argument is an optional Object.\n//      the 'level' property states 'AA' or 'AAA' - if missing or invalid, it defaults to 'AA';\n//      the 'size' property states 'large' or 'small' - if missing or invalid, it defaults to 'small'.\n// If the entire object is absent, isReadable defaults to {level:\"AA\",size:\"small\"}.\n\n// *Example*\n//    tinycolor.isReadable(\"#000\", \"#111\") => false\n//    tinycolor.isReadable(\"#000\", \"#111\",{level:\"AA\",size:\"large\"}) => false\ntinycolor.isReadable = function(color1, color2, wcag2) {\n    var readability = tinycolor.readability(color1, color2);\n    var wcag2Parms, out;\n\n    out = false;\n\n    wcag2Parms = validateWCAG2Parms(wcag2);\n    switch (wcag2Parms.level + wcag2Parms.size) {\n        case \"AAsmall\":\n        case \"AAAlarge\":\n            out = readability >= 4.5;\n            break;\n        case \"AAlarge\":\n            out = readability >= 3;\n            break;\n        case \"AAAsmall\":\n            out = readability >= 7;\n            break;\n    }\n    return out;\n\n};\n\n// `mostReadable`\n// Given a base color and a list of possible foreground or background\n// colors for that base, returns the most readable color.\n// Optionally returns Black or White if the most readable color is unreadable.\n// *Example*\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:false}).toHexString(); // \"#112255\"\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:true}).toHexString();  // \"#ffffff\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"large\"}).toHexString(); // \"#faf3f3\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"small\"}).toHexString(); // \"#ffffff\"\ntinycolor.mostReadable = function(baseColor, colorList, args) {\n    var bestColor = null;\n    var bestScore = 0;\n    var readability;\n    var includeFallbackColors, level, size ;\n    args = args || {};\n    includeFallbackColors = args.includeFallbackColors ;\n    level = args.level;\n    size = args.size;\n\n    for (var i= 0; i < colorList.length ; i++) {\n        readability = tinycolor.readability(baseColor, colorList[i]);\n        if (readability > bestScore) {\n            bestScore = readability;\n            bestColor = tinycolor(colorList[i]);\n        }\n    }\n\n    if (tinycolor.isReadable(baseColor, bestColor, {\"level\":level,\"size\":size}) || !includeFallbackColors) {\n        return bestColor;\n    }\n    else {\n        args.includeFallbackColors=false;\n        return tinycolor.mostReadable(baseColor,[\"#fff\", \"#000\"],args);\n    }\n};\n\n\n// Big List of Colors\n// ------------------\n// <http://www.w3.org/TR/css3-color/#svg-color>\nvar names = tinycolor.names = {\n    aliceblue: \"f0f8ff\",\n    antiquewhite: \"faebd7\",\n    aqua: \"0ff\",\n    aquamarine: \"7fffd4\",\n    azure: \"f0ffff\",\n    beige: \"f5f5dc\",\n    bisque: \"ffe4c4\",\n    black: \"000\",\n    blanchedalmond: \"ffebcd\",\n    blue: \"00f\",\n    blueviolet: \"8a2be2\",\n    brown: \"a52a2a\",\n    burlywood: \"deb887\",\n    burntsienna: \"ea7e5d\",\n    cadetblue: \"5f9ea0\",\n    chartreuse: \"7fff00\",\n    chocolate: \"d2691e\",\n    coral: \"ff7f50\",\n    cornflowerblue: \"6495ed\",\n    cornsilk: \"fff8dc\",\n    crimson: \"dc143c\",\n    cyan: \"0ff\",\n    darkblue: \"00008b\",\n    darkcyan: \"008b8b\",\n    darkgoldenrod: \"b8860b\",\n    darkgray: \"a9a9a9\",\n    darkgreen: \"006400\",\n    darkgrey: \"a9a9a9\",\n    darkkhaki: \"bdb76b\",\n    darkmagenta: \"8b008b\",\n    darkolivegreen: \"556b2f\",\n    darkorange: \"ff8c00\",\n    darkorchid: \"9932cc\",\n    darkred: \"8b0000\",\n    darksalmon: \"e9967a\",\n    darkseagreen: \"8fbc8f\",\n    darkslateblue: \"483d8b\",\n    darkslategray: \"2f4f4f\",\n    darkslategrey: \"2f4f4f\",\n    darkturquoise: \"00ced1\",\n    darkviolet: \"9400d3\",\n    deeppink: \"ff1493\",\n    deepskyblue: \"00bfff\",\n    dimgray: \"696969\",\n    dimgrey: \"696969\",\n    dodgerblue: \"1e90ff\",\n    firebrick: \"b22222\",\n    floralwhite: \"fffaf0\",\n    forestgreen: \"228b22\",\n    fuchsia: \"f0f\",\n    gainsboro: \"dcdcdc\",\n    ghostwhite: \"f8f8ff\",\n    gold: \"ffd700\",\n    goldenrod: \"daa520\",\n    gray: \"808080\",\n    green: \"008000\",\n    greenyellow: \"adff2f\",\n    grey: \"808080\",\n    honeydew: \"f0fff0\",\n    hotpink: \"ff69b4\",\n    indianred: \"cd5c5c\",\n    indigo: \"4b0082\",\n    ivory: \"fffff0\",\n    khaki: \"f0e68c\",\n    lavender: \"e6e6fa\",\n    lavenderblush: \"fff0f5\",\n    lawngreen: \"7cfc00\",\n    lemonchiffon: \"fffacd\",\n    lightblue: \"add8e6\",\n    lightcoral: \"f08080\",\n    lightcyan: \"e0ffff\",\n    lightgoldenrodyellow: \"fafad2\",\n    lightgray: \"d3d3d3\",\n    lightgreen: \"90ee90\",\n    lightgrey: \"d3d3d3\",\n    lightpink: \"ffb6c1\",\n    lightsalmon: \"ffa07a\",\n    lightseagreen: \"20b2aa\",\n    lightskyblue: \"87cefa\",\n    lightslategray: \"789\",\n    lightslategrey: \"789\",\n    lightsteelblue: \"b0c4de\",\n    lightyellow: \"ffffe0\",\n    lime: \"0f0\",\n    limegreen: \"32cd32\",\n    linen: \"faf0e6\",\n    magenta: \"f0f\",\n    maroon: \"800000\",\n    mediumaquamarine: \"66cdaa\",\n    mediumblue: \"0000cd\",\n    mediumorchid: \"ba55d3\",\n    mediumpurple: \"9370db\",\n    mediumseagreen: \"3cb371\",\n    mediumslateblue: \"7b68ee\",\n    mediumspringgreen: \"00fa9a\",\n    mediumturquoise: \"48d1cc\",\n    mediumvioletred: \"c71585\",\n    midnightblue: \"191970\",\n    mintcream: \"f5fffa\",\n    mistyrose: \"ffe4e1\",\n    moccasin: \"ffe4b5\",\n    navajowhite: \"ffdead\",\n    navy: \"000080\",\n    oldlace: \"fdf5e6\",\n    olive: \"808000\",\n    olivedrab: \"6b8e23\",\n    orange: \"ffa500\",\n    orangered: \"ff4500\",\n    orchid: \"da70d6\",\n    palegoldenrod: \"eee8aa\",\n    palegreen: \"98fb98\",\n    paleturquoise: \"afeeee\",\n    palevioletred: \"db7093\",\n    papayawhip: \"ffefd5\",\n    peachpuff: \"ffdab9\",\n    peru: \"cd853f\",\n    pink: \"ffc0cb\",\n    plum: \"dda0dd\",\n    powderblue: \"b0e0e6\",\n    purple: \"800080\",\n    rebeccapurple: \"663399\",\n    red: \"f00\",\n    rosybrown: \"bc8f8f\",\n    royalblue: \"4169e1\",\n    saddlebrown: \"8b4513\",\n    salmon: \"fa8072\",\n    sandybrown: \"f4a460\",\n    seagreen: \"2e8b57\",\n    seashell: \"fff5ee\",\n    sienna: \"a0522d\",\n    silver: \"c0c0c0\",\n    skyblue: \"87ceeb\",\n    slateblue: \"6a5acd\",\n    slategray: \"708090\",\n    slategrey: \"708090\",\n    snow: \"fffafa\",\n    springgreen: \"00ff7f\",\n    steelblue: \"4682b4\",\n    tan: \"d2b48c\",\n    teal: \"008080\",\n    thistle: \"d8bfd8\",\n    tomato: \"ff6347\",\n    turquoise: \"40e0d0\",\n    violet: \"ee82ee\",\n    wheat: \"f5deb3\",\n    white: \"fff\",\n    whitesmoke: \"f5f5f5\",\n    yellow: \"ff0\",\n    yellowgreen: \"9acd32\"\n};\n\n// Make it easy to access colors via `hexNames[hex]`\nvar hexNames = tinycolor.hexNames = flip(names);\n\n\n// Utilities\n// ---------\n\n// `{ 'name1': 'val1' }` becomes `{ 'val1': 'name1' }`\nfunction flip(o) {\n    var flipped = { };\n    for (var i in o) {\n        if (o.hasOwnProperty(i)) {\n            flipped[o[i]] = i;\n        }\n    }\n    return flipped;\n}\n\n// Return a valid alpha value [0,1] with all invalid values being set to 1\nfunction boundAlpha(a) {\n    a = parseFloat(a);\n\n    if (isNaN(a) || a < 0 || a > 1) {\n        a = 1;\n    }\n\n    return a;\n}\n\n// Take input from [0, n] and return it as [0, 1]\nfunction bound01(n, max) {\n    if (isOnePointZero(n)) { n = \"100%\"; }\n\n    var processPercent = isPercentage(n);\n    n = mathMin(max, mathMax(0, parseFloat(n)));\n\n    // Automatically convert percentage into number\n    if (processPercent) {\n        n = parseInt(n * max, 10) / 100;\n    }\n\n    // Handle floating point rounding errors\n    if ((Math.abs(n - max) < 0.000001)) {\n        return 1;\n    }\n\n    // Convert into [0, 1] range if it isn't already\n    return (n % max) / parseFloat(max);\n}\n\n// Force a number between 0 and 1\nfunction clamp01(val) {\n    return mathMin(1, mathMax(0, val));\n}\n\n// Parse a base-16 hex value into a base-10 integer\nfunction parseIntFromHex(val) {\n    return parseInt(val, 16);\n}\n\n// Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1\n// <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>\nfunction isOnePointZero(n) {\n    return typeof n == \"string\" && n.indexOf('.') != -1 && parseFloat(n) === 1;\n}\n\n// Check to see if string passed in is a percentage\nfunction isPercentage(n) {\n    return typeof n === \"string\" && n.indexOf('%') != -1;\n}\n\n// Force a hex value to have 2 characters\nfunction pad2(c) {\n    return c.length == 1 ? '0' + c : '' + c;\n}\n\n// Replace a decimal with it's percentage value\nfunction convertToPercentage(n) {\n    if (n <= 1) {\n        n = (n * 100) + \"%\";\n    }\n\n    return n;\n}\n\n// Converts a decimal to a hex value\nfunction convertDecimalToHex(d) {\n    return Math.round(parseFloat(d) * 255).toString(16);\n}\n// Converts a hex value to a decimal\nfunction convertHexToDecimal(h) {\n    return (parseIntFromHex(h) / 255);\n}\n\nvar matchers = (function() {\n\n    // <http://www.w3.org/TR/css3-values/#integers>\n    var CSS_INTEGER = \"[-\\\\+]?\\\\d+%?\";\n\n    // <http://www.w3.org/TR/css3-values/#number-value>\n    var CSS_NUMBER = \"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\";\n\n    // Allow positive/negative integer/number.  Don't capture the either/or, just the entire outcome.\n    var CSS_UNIT = \"(?:\" + CSS_NUMBER + \")|(?:\" + CSS_INTEGER + \")\";\n\n    // Actual matching.\n    // Parentheses and commas are optional, but not required.\n    // Whitespace can take the place of commas or opening paren\n    var PERMISSIVE_MATCH3 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n    var PERMISSIVE_MATCH4 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n\n    return {\n        CSS_UNIT: new RegExp(CSS_UNIT),\n        rgb: new RegExp(\"rgb\" + PERMISSIVE_MATCH3),\n        rgba: new RegExp(\"rgba\" + PERMISSIVE_MATCH4),\n        hsl: new RegExp(\"hsl\" + PERMISSIVE_MATCH3),\n        hsla: new RegExp(\"hsla\" + PERMISSIVE_MATCH4),\n        hsv: new RegExp(\"hsv\" + PERMISSIVE_MATCH3),\n        hsva: new RegExp(\"hsva\" + PERMISSIVE_MATCH4),\n        hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n        hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n        hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n        hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/\n    };\n})();\n\n// `isValidCSSUnit`\n// Take in a single string / number and check to see if it looks like a CSS unit\n// (see `matchers` above for definition).\nfunction isValidCSSUnit(color) {\n    return !!matchers.CSS_UNIT.exec(color);\n}\n\n// `stringInputToObject`\n// Permissive string parsing.  Take in a number of formats, and output an object\n// based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`\nfunction stringInputToObject(color) {\n\n    color = color.replace(trimLeft,'').replace(trimRight, '').toLowerCase();\n    var named = false;\n    if (names[color]) {\n        color = names[color];\n        named = true;\n    }\n    else if (color == 'transparent') {\n        return { r: 0, g: 0, b: 0, a: 0, format: \"name\" };\n    }\n\n    // Try to match string input using regular expressions.\n    // Keep most of the number bounding out of this function - don't worry about [0,1] or [0,100] or [0,360]\n    // Just return an object and let the conversion functions handle that.\n    // This way the result will be the same whether the tinycolor is initialized with string or object.\n    var match;\n    if ((match = matchers.rgb.exec(color))) {\n        return { r: match[1], g: match[2], b: match[3] };\n    }\n    if ((match = matchers.rgba.exec(color))) {\n        return { r: match[1], g: match[2], b: match[3], a: match[4] };\n    }\n    if ((match = matchers.hsl.exec(color))) {\n        return { h: match[1], s: match[2], l: match[3] };\n    }\n    if ((match = matchers.hsla.exec(color))) {\n        return { h: match[1], s: match[2], l: match[3], a: match[4] };\n    }\n    if ((match = matchers.hsv.exec(color))) {\n        return { h: match[1], s: match[2], v: match[3] };\n    }\n    if ((match = matchers.hsva.exec(color))) {\n        return { h: match[1], s: match[2], v: match[3], a: match[4] };\n    }\n    if ((match = matchers.hex8.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1]),\n            g: parseIntFromHex(match[2]),\n            b: parseIntFromHex(match[3]),\n            a: convertHexToDecimal(match[4]),\n            format: named ? \"name\" : \"hex8\"\n        };\n    }\n    if ((match = matchers.hex6.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1]),\n            g: parseIntFromHex(match[2]),\n            b: parseIntFromHex(match[3]),\n            format: named ? \"name\" : \"hex\"\n        };\n    }\n    if ((match = matchers.hex4.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1] + '' + match[1]),\n            g: parseIntFromHex(match[2] + '' + match[2]),\n            b: parseIntFromHex(match[3] + '' + match[3]),\n            a: convertHexToDecimal(match[4] + '' + match[4]),\n            format: named ? \"name\" : \"hex8\"\n        };\n    }\n    if ((match = matchers.hex3.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1] + '' + match[1]),\n            g: parseIntFromHex(match[2] + '' + match[2]),\n            b: parseIntFromHex(match[3] + '' + match[3]),\n            format: named ? \"name\" : \"hex\"\n        };\n    }\n\n    return false;\n}\n\nfunction validateWCAG2Parms(parms) {\n    // return valid WCAG2 parms for isReadable.\n    // If input parms are invalid, return {\"level\":\"AA\", \"size\":\"small\"}\n    var level, size;\n    parms = parms || {\"level\":\"AA\", \"size\":\"small\"};\n    level = (parms.level || \"AA\").toUpperCase();\n    size = (parms.size || \"small\").toLowerCase();\n    if (level !== \"AA\" && level !== \"AAA\") {\n        level = \"AA\";\n    }\n    if (size !== \"small\" && size !== \"large\") {\n        size = \"small\";\n    }\n    return {\"level\":level, \"size\":size};\n}\n\n// Node: Export function\nif (typeof module !== \"undefined\" && module.exports) {\n    module.exports = tinycolor;\n}\n// AMD/requirejs: Define the module\nelse if (typeof define === 'function' && define.amd) {\n    define(function () {return tinycolor;});\n}\n// Browser: Expose to window\nelse {\n    window.tinycolor = tinycolor;\n}\n\n})(Math);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../~/tinycolor2/tinycolor.js\n ** module id = 69\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(54);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/angularjs-color-picker/angularjs-color-picker.js from dll-reference lib_lib\n ** module id = 70\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(55);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/angularjs-color-picker/angularjs-color-picker.css from dll-reference lib_lib\n ** module id = 71\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(57);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/angular-sanitize/index.js from dll-reference lib_lib\n ** module id = 72\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(60);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/codemirror/lib/codemirror.js from dll-reference lib_lib\n ** module id = 73\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(59);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/codemirror/addon/edit/matchbrackets.js from dll-reference lib_lib\n ** module id = 74\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(63);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/codemirror/addon/edit/closebrackets.js from dll-reference lib_lib\n ** module id = 75\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(64);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/codemirror/addon/hint/show-hint.css from dll-reference lib_lib\n ** module id = 76\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(66);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/codemirror/addon/hint/show-hint.js from dll-reference lib_lib\n ** module id = 77\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(67);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/codemirror/mode/javascript/javascript.js from dll-reference lib_lib\n ** module id = 78\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(70);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/codemirror/addon/display/fullscreen.css from dll-reference lib_lib\n ** module id = 79\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(72);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/codemirror/addon/display/fullscreen.js from dll-reference lib_lib\n ** module id = 80\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(73);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/codemirror/addon/lint/lint.css from dll-reference lib_lib\n ** module id = 81\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(75);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/codemirror/addon/lint/lint.js from dll-reference lib_lib\n ** module id = 82\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(76);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/codemirror/addon/lint/javascript-lint.js from dll-reference lib_lib\n ** module id = 83\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(140);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/codemirror/addon/dialog/dialog.css from dll-reference lib_lib\n ** module id = 84\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(142);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/codemirror/addon/dialog/dialog.js from dll-reference lib_lib\n ** module id = 85\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(143);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/acorn/dist/acorn.js from dll-reference lib_lib\n ** module id = 86\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(144);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/acorn/dist/acorn_loose.js from dll-reference lib_lib\n ** module id = 87\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(145);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/acorn/dist/walk.js from dll-reference lib_lib\n ** module id = 88\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(219);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/tern/lib/tern.js from dll-reference lib_lib\n ** module id = 89\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(146);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/tern/doc/demo/polyfill.js from dll-reference lib_lib\n ** module id = 90\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(148);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/tern/lib/signal.js from dll-reference lib_lib\n ** module id = 91\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(149);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/tern/lib/def.js from dll-reference lib_lib\n ** module id = 92\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(150);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/tern/lib/comment.js from dll-reference lib_lib\n ** module id = 93\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(151);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/tern/lib/infer.js from dll-reference lib_lib\n ** module id = 94\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(218);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/tern/plugin/doc_comment.js from dll-reference lib_lib\n ** module id = 95\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(220);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/codemirror/addon/tern/tern.css from dll-reference lib_lib\n ** module id = 96\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(222);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/codemirror/addon/tern/tern.js from dll-reference lib_lib\n ** module id = 97\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(223);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/angular-ui-codemirror/src/ui-codemirror.js from dll-reference lib_lib\n ** module id = 98\n ** module chunks = 0\n **/","module.exports = \"<div ng-if=\\\"vm.showJson()\\\">\\n    <button style=\\\"width: 60px\\\"\\n            popover-placement=\\\"bottom\\\"\\n            popover-is-open=\\\"vm.isOpen\\\"\\n            popover-append-to-body=\\\"true\\\"\\n            uib-popover-template=\\\"'editable-formly.html'\\\"\\n            class=\\\"btn btn-white btn-xs\\\">\\n        edit\\n    </button>\\n</div>\\n<span popover-placement=\\\"bottom\\\"\\n      popover-is-open=\\\"vm.isOpen\\\"\\n      uib-popover-template=\\\"'editable-formly.html'\\\"\\n      popover-append-to-body=\\\"true\\\"\\n      style=\\\"cursor: pointer\\\"\\n      ng-class=\\\"{'cms-empty-value': vm.isValueUndefined}\\\"\\n      ng-if=\\\"!vm.showJson()\\\">\\n    {{!vm.isValueUndefined? vm.value: 'empty'}}\\n</span>\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./components/cms-editable/tpl.html\n ** module id = 99\n ** module chunks = 0\n **/","import data from './cms/cms'\nconst commonModule = angular.module('common', [data]);\n\nexport default commonModule.name;\n\n\n\n/** WEBPACK FOOTER **\n ** ./common/common.module.js\n **/","\"use strict\";\nimport 'ng-file-upload';\nimport TypeClass from './Type';\nimport QueryBuilder from \"./QueryBuilder\";\nimport 'angular-websocket';\nimport Uuid from 'uuid';\nimport 'jquery-ui/ui/widgets/draggable';\nimport 'jquery-ui/ui/widgets/resizable';\nimport traverse from 'traverse';\nimport 'angular-translate';\n\nwindow.Enum = {\n    Load: {NOT: 'NOT', LOADING: 'LOADING', LOADED: 'LOADED', PART_LOADED: 'PART_LOADED'},\n    EditMode: {ALL: 'ALL', VIEWELEMENT: 'VIEWELEMENT', DATAELEMENT: 'DATAELEMENT', CONTAINER: 'CONTAINER'}\n}\n\nconst modelModule = angular\n    .module('common.data', ['ngFileUpload', 'ngWebSocket', 'pascalprecht.translate'])\n    .config(config)\n    .factory('cms', cms)\n    .run(run);\n\n\nconfig.$inject = ['$translateProvider'];\nfunction config($translateProvider) {\n    $translateProvider.translations('en', {\n        Add: 'Add',\n        Setting: 'Setting',\n        DeleteAll: 'Delete all',\n        Show: 'Show'\n    });\n\n    $translateProvider.translations('de', {\n        Add: 'Hinzufgen',\n        Setting: 'Einstellung',\n        DeleteAll: 'alles Lschen',\n        Show: 'Anzeigen'\n    });\n\n    $translateProvider.preferredLanguage('de');\n}\n\ncms.$inject = ['$http', 'Upload'];\nfunction cms($http, Upload) {\n\n\n    const data = {\n        socketQueue: {}\n    };\n    const editState = {\n        /**\n         * 0: edit by drag and drop element\n         * 1: edit by container\n         */\n        editMode: Enum.EditMode.DATAELEMENT,\n        dragType: null,\n        showContainerEdit: false\n    }\n\n    function changeEditMode(mode) {\n        if (mode === Enum.EditMode.DATAELEMENT) {\n            $('body').addClass('cms-data-element');\n        } else {\n            $('body').removeClass('cms-data-element')\n        }\n    }\n\n    changeEditMode(Enum.EditMode.DATAELEMENT);\n\n    function getType(type, ref, cb, content, onfly = true) {\n        let Type = data.types[type];\n        if (!Type || !Type.template || !ref || !_.find(Type.list, {_id: ref})) {\n            let query = ref ? (Type && _.find(Type.list, {_id: ref}) ? 'element=false' : `element=${ref}`) : 'element=false';\n            if (!Type) Type = data.types[type] = {list: []};\n            if (!Type.template) query += '&template=true';\n            if ((content && content._id) || !onfly) query = '';\n            $http.post(`/cms-types/${type}?${query}`, JsonFn.stringify(content)).then(res => {\n                const result = JsonFn.clone(res.data, true);\n\n                if (_.find(Type.list, {_id: ref})) {\n                    _.remove(Type.list, {_id: ref});\n                }\n\n                if (!ref || !_.find(Type.list, {_id: ref})) {\n                    ref = result.data ? result.data._id : null;\n                    Type.list.push(result.data);\n                }\n                if (!Type.template) {\n                    Type.template = result.template;\n                    Type.form = result.form;\n                    Type.fn = result.fn;\n                    Type.serverFn = result.serverFn;\n                    Type.info = result.info;\n                }\n                cb(_.find(Type.list, {_id: ref}));\n            })\n        } else {\n            cb(_.find(Type.list, {_id: ref}));\n        }\n    }\n\n    function createElement(type, content, cb, onfly = true) {\n        return getType(type, null, cb, content, onfly);\n    }\n\n    function removeElement(type, _id, cb, onerror) {\n        $http.delete(`api/v1/${type}/${_id}`).then(() => {\n            _.remove(Types[type].list, {_id: _id});\n            if (cb) cb();\n        }, () => {\n            if (onerror) onerror();\n        });\n    }\n\n    function updateContainerPage() {\n        const url = location.pathname;\n        $http.post(`/cms-container-page${url}`, {containers: data.containers}).then(()=> {\n            console.log('Update container page successful');\n        });\n    }\n\n    const loadElementsPending = [];\n\n\n    function countElements(type, cb, paramsBuilder) {\n        sendWs({path: `get/api/v1/${type}/count`, params: paramsBuilder.buildJson()}, ({result:count}) => {\n            if (cb) cb(count);\n        });\n        /*$http.get(`/api/v1/${type}/count?${params}`, _transform).then(res => {\n         if (cb) cb(res.data.count);\n         });*/\n    }\n\n    function sendWs(msg, cb) {\n        const _uuid = Uuid.v1();\n        data.socketQueue[_uuid] = cb;\n        socket.send(JsonFn.stringify(_.assign(msg, {uuid: _uuid})));\n    }\n\n    function loadElements(type, cb, paramsBuilder) {\n        if (!paramsBuilder && data.types[type] && data.types[type]._load === Enum.Load.LOADED) {\n            if (cb) cb(data.types[type].list);\n            return;\n        }\n        console.time(\"loadElements\");\n        sendWs({\n                path: `get/api/v1/${type}`,\n                params: paramsBuilder ? paramsBuilder.buildJson() : {}\n            }, ({result:_list}) => {\n                console.timeEnd(\"loadElements\");\n                if (!paramsBuilder) {\n                    data.types[type].list = _list;\n                    data.types[type]._load = Enum.Load.LOADED;\n                } else {\n                    data.types[type].list = _.unionWith(_list, _.filter(data.types[type].list, e => e !== null), (e1, e2) => e1._id === e2._id);\n                    data.types[type].queryList = _list.map(e => _.find(data.types[type].list, e2 => e2._id === e._id));\n                    data.types[type]._load = Enum.Load.PART_LOADED;\n                }\n\n                if (cb) cb(data.types[type].queryList);\n            }\n        );\n        /*$http.get(`/api/v1/${type}?${JsonFn.stringify(paramsBuilder)}`, _transform).then(res => {\n         var list = JsonFn.clone(res.data, true);\n         if (!paramsBuilder) {\n         data.types[type].list = list;\n         data.types[type]._load = Enum.Load.LOADED;\n         } else {\n         data.types[type].list = _.unionWith(data.types[type].list, list, (e1, e2) => e1._id === e2._id);\n         data.types[type].queryList = list.map(e => _.find(data.types[type].list, e2 => e2._id === e._id));\n         data.types[type]._load = Enum.Load.PART_LOADED;\n         }\n\n         loadElementsPending.forEach(cb => cb(data.types[type].queryList));\n         loadElementsPending.length = 0;\n         });*/\n\n    }\n\n    function findByRef(type, ref) {\n        return _.find(data.types[type].list, {_id: ref});\n    }\n\n    function findByID(type, ID) {\n        return _.find(data.types[type].list, {ID});\n    }\n\n    function findFnByID(type, ID) {\n        const e = _.find(data.types[type].list, {ID});\n        const fn = JsonFn.clone(data.types[type].fn);\n        _.each(fn, (f, k) => fn[k] = f.bind(e));\n        return fn;\n    }\n\n    function findFnByRef(type, ref) {\n        const e = findByRef(type, ref);\n        const fn = JsonFn.clone(data.types[type].fn);\n        _.each(fn, (f, k) => fn[k] = f.bind(e));\n        return fn;\n    }\n\n    function walkInContainers(containers, cb) {\n        function walk(containers) {\n            _.each(containers, container => {\n                _.each(container.elements, element => {\n                    // save when no data in client exists\n                    loadElements(element.type, () => {\n                        const Type = Types[element.type];\n                        const e = _.find(Type.list, e => e._id === element.ref);\n                        cb(element, e, container);\n                        if (element.containers && element.containers.length > 0) {\n                            walk(element.containers);\n                        }\n                    })\n                });\n            });\n        }\n\n        walk(containers);\n    }\n\n    function updateElement(type, model, resolve, fail) {\n        sendWs({\n            path: `post/api/v1/${type}`,\n            model\n        }, ({result:model}) => {\n\n            if (_.find(Types[type].list, {_id: model._id})) {\n                _.remove(Types[type].list, {_id: model._id});\n                Types[type].list.push(model);\n            }\n\n            if (resolve) resolve(model);\n        });\n    }\n\n    function listColumns(form) {\n        if (form[0].isTab) {\n            const _fields = [];\n            form.forEach(({fields}) => {\n                _fields.push(...fields.map(field => ({\n                    value: field.key,\n                    label: field.templateOptions.label || field.key\n                })));\n            })\n            return _fields;\n        }\n        return form.map(field => ({value: field.key, label: field.templateOptions.label || field.key}));\n    }\n\n    function findField(form, property, deep = false) {\n        if (!deep) {\n            if (form[0].isTab) {\n                let result;\n                form.forEach(({fields}) => {\n                    const f = fields.find(f => f.key === property);\n                    if (f) result = f;\n                })\n                return result;\n            }\n            return form.find(f => f.key === property);\n        }\n\n        let result;\n        const last = property.split('.').pop();\n        traverse(form).forEach(function (node) {\n            if (node && node.key === last) {\n                let path = _.reduce(this.parents.filter(({node:{key}}) => !_.isEmpty(key)), (path, parent) => {\n                    path += `.${parent.node.key}`;\n                    return path;\n                }, '');\n                if (_.isEmpty(path)) {\n                    path = last\n                } else {\n                    path = path.substring(1) + '.' + last;\n                }\n                if (path === property) {\n                    result = node;\n                    this.stop();\n                }\n\n            }\n        });\n        return result;\n    }\n\n    function getContainer(path) {\n        if (!data.containers) {\n            data.containers = {};\n            updateContainerPage();\n        }\n        let container = _.get(data.containers, path);\n\n        // create if not exists\n        if (!container) {\n            const _path = _.dropRight(path.split('\\.')).join('.');\n            (_.isEmpty(_path) ? data.containers : _.get(data.containers, _path))[path.split('\\.').pop()] = {elements: []};\n            container = _.get(data.containers, path);\n            updateContainerPage();\n        }\n\n        return container;\n    }\n\n    function parseAndSaveData(_data) {\n        Object.assign(data, _data);\n        for (let k in data.types) {\n            data.types[k] = new TypeClass(data.types[k]);\n        }\n    }\n\n    function exportAll(filename, types) {\n        $http.post(`/cms-export`, {filename, types}).then(function (res) {\n            confirm('Export successful');\n        });\n    }\n\n    function importAll(types, url) {\n        $http.post(`/cms-import`, {types, url}).then(function (res) {\n            confirm('Import successful');\n        });\n    }\n\n    const uploadFile = function (file, path, cb) {\n        Upload.upload({\n            url: `/cms-files/${path}`,\n            data: {file}\n        }).then(function () {\n            if (cb) cb();\n        });\n    }\n\n    function deleteElements(type, cb) {\n        $http.delete(`/cms-types/${type}`).then(function (res) {\n            if (cb) cb();\n            confirm('delete successful');\n        });\n    }\n\n    function getAdminList() {\n        const _types = _.pick(data.types, function (Type) {\n            if (editState.editMode === Enum.EditMode.ALL) return true;\n            if (editState.editMode === Enum.EditMode.VIEWELEMENT) return Type.info.isViewElement;\n            if (editState.editMode === Enum.EditMode.DATAELEMENT) return !Type.info.isViewElement;\n            return true;\n        })\n\n        let i = -1;\n\n        return _.map(_types, (Type, k) => {\n            i++;\n            let _children = [];\n\n            const createChildren = (_properties, query, path) => {\n                const properties = JsonFn.clone(_properties);\n                const children = [];\n                if (!properties || properties.length === 0) return;\n                const property = properties.shift();\n                const field = findField(Type.form, property, true);\n                if (field.type === 'refSelect') {\n                    var _type = field.templateOptions.Type;\n                    data.types[_type].list.forEach((_element) => {\n                        const _path = `${path}.children[${children.length}]`;\n                        let _query = [{[property]: _element._id}];\n                        _query = query ? query.concat(_query) : _query;\n                        children.push({\n                            children: createChildren(properties, _query, _path),\n                            text: _element[data.types[_type].info.title],\n                            type: k,\n                            path: _path,\n                            columns: _.remove(listColumns(Type.form), _property => _property !== property),\n                            query: {$and: _query}\n                        });\n                    })\n                } else if (field.type === 'select-ref-static') {\n                    var _type = field.templateOptions.Type;\n                    data.types[_type].list.forEach((_element) => {\n                        const _path = `${path}.children[${children.length}]`;\n                        let _query = [{[property]: _element[data.types[_type].info.title]}];\n                        _query = query ? query.concat(_query) : _query;\n                        children.push({\n                            children: createChildren(properties, _query, _path),\n                            text: _element[data.types[_type].info.title],\n                            type: k,\n                            path: _path,\n                            columns: _.remove(listColumns(Type.form), _property => _property !== property),\n                            query: {$and: _query}\n                        });\n                    })\n                } else if (field.type === 'array' && field.templateOptions.field.type === 'refSelect') {\n                    var _type = field.templateOptions.field.templateOptions.Type;\n                    data.types[_type].list.forEach((_element) => {\n                        const _path = `${path}.children[${children.length}]`;\n                        let _query = [{[property]: _element._id}];\n                        _query = query ? query.concat(_query) : _query;\n                        children.push({\n                            children: createChildren(properties, _query, _path),\n                            text: _element[data.types[_type].info.title],\n                            type: k,\n                            path: _path,\n                            columns: _.remove(listColumns(Type.form), _property => _property !== property),\n                            query: {$and: _query}\n                        });\n                    })\n                } else if (field.type === 'select') {\n                    const {options} = field.templateOptions;\n                    _.each(options, ({name, value}) => {\n                        const _path = `${path}.children[${children.length}]`;\n                        let _query = [{[property]: value}];\n                        _query = query ? query.concat(_query) : _query;\n                        children.push({\n                            children: createChildren(properties, _query, _path),\n                            text: name,\n                            type: k,\n                            path: _path,\n                            columns: _.remove(listColumns(Type.form), _property => _property !== property),\n                            query: {$and: _query}\n                        });\n                    })\n                }\n\n                return children;\n            }\n\n            var config = data.types.Config.list.find(config => config.type === k);\n            const _path = `[${i}]`;\n\n            let columns = listColumns(Type.form);\n            if (config) {\n                try {\n                    config.dynamicQuery.forEach(dynamicQuery => {\n                        if (dynamicQuery.field.length === 0) return;\n                        _children.push(...createChildren(dynamicQuery.field, null, _path));\n                    });\n                    columns = _.filter(columns, col => {\n                        if (_.isEmpty(config.showFields)) return true;\n                        return config.showFields.indexOf(col.value) !== -1;\n                    })\n                } catch (e) {\n                }\n            }\n            return {\n                children: _children,\n                columns,\n                text: Type.label || k,\n                type: k,\n                path: _path\n            }\n        });\n    }\n\n\n    function execServerFn(type, model, fnName, ...args) {\n        return $http.post(`/cms-types/${type}/${model._id}/${fnName}`, args);\n    }\n\n    function execServerFnForWrapper(name, fnName, ...args) {\n        return $http.post(`/cms-wrappers/${name}/${fnName}`, args);\n    }\n\n    function getTitle(type, ref) {\n        const Type = data.types[type];\n        const e = _.find(Type.list, {_id: ref})\n        return e[Type.info.title];\n    }\n\n    return window.cms = {\n        sendWs,\n        findByID,\n        findFnByID,\n        findByRef,\n        findFnByRef,\n        getType,\n        createElement,\n        updateElement,\n        removeElement,\n        findField,\n        data,\n        get types() {\n            return data.types;\n        },\n        editState,\n        loadElements,\n        countElements,\n        loadElementsPending,\n        updateContainerPage,\n        walkInContainers,\n        getContainer,\n        parseAndSaveData,\n        exportAll,\n        importAll,\n        changeEditMode,\n        uploadFile,\n        getAdminList,\n        listColumns,\n        QueryBuilder,\n        deleteElements,\n        execServerFn,\n        execServerFnForWrapper,\n        getTitle\n    }\n}\nrun.$inject = ['cms', '$http', '$websocket'];\nfunction run(cms, $http, $websocket) {\n    const data = cms.data;\n    try {\n\n        cms.parseAndSaveData(JsonFn.parse($('#cms-data').text(), true));\n        data.serverFn = data.setupServerFn(data.serverFn, $http.post);\n        delete data.setupServerFn;\n        window.Types = data.types;\n        window.Local = data.Local = {};\n\n    } catch (e) {\n    }\n\n    //menu\n    $('body').append(`<div cms-nav></div>`);\n\n    //panel\n    $('body').prepend(`<div cms-container-edit></div>`);\n\n    $('body').addClass('cms-admin-mode');\n\n    let new_uri;\n    const {wsAddress} = cms.data.online;\n    if (wsAddress) {\n        new_uri = wsAddress;\n    } else {\n        let loc = window.location;\n        if (loc.protocol === \"https:\") {\n            new_uri = \"wss:\";\n        } else {\n            new_uri = \"ws:\";\n        }\n        new_uri += \"//\" + loc.host;\n        new_uri += loc.pathname;\n    }\n\n    window.socket = cms.socket = $websocket(new_uri, {reconnectIfNotNormalClose: true});\n\n    socket.onMessage((event) => {\n        const _data = JsonFn.parse(event.data, true);\n        if (!_data.uuid) return;\n        cms.data.socketQueue[_data.uuid](_data)\n    });\n}\n\nexport default modelModule.name;\n\n\n\n/** WEBPACK FOOTER **\n ** ./common/cms/cms.js\n **/","module.exports = (__webpack_require__(2))(335);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/ng-file-upload/index.js from dll-reference lib_lib\n ** module id = 102\n ** module chunks = 0\n **/","class TypeClass {\n    constructor(raw) {\n        _.assign(this, raw);\n    }\n\n    /**\n     * check if a field is ref\n     * return main-title's key if it is ref ,else return null\n     * @param fieldName\n     * @returns {obj}\n     */\n    checkAndGetRef(fieldName) {\n        const field = cms.findField(this.form, fieldName);\n        if (field && field.type === 'refSelect') {\n            const type = field.templateOptions.Type;\n            return Types[type].info.title;\n        }\n    }\n}\n\nexport default TypeClass;\n\n\n/** WEBPACK FOOTER **\n ** ./common/cms/Type.js\n **/","module.exports = (__webpack_require__(2))(227);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/angular-websocket/dist/angular-websocket.js from dll-reference lib_lib\n ** module id = 104\n ** module chunks = 0\n **/","//     uuid.js\n//\n//     Copyright (c) 2010-2012 Robert Kieffer\n//     MIT License - http://opensource.org/licenses/mit-license.php\n\n// Unique ID creation requires a high quality random # generator.  We feature\n// detect to determine the best RNG source, normalizing to a function that\n// returns 128-bits of randomness, since that's what's usually required\nvar _rng = require('./rng');\n\n// Maps for number <-> hex string conversion\nvar _byteToHex = [];\nvar _hexToByte = {};\nfor (var i = 0; i < 256; i++) {\n  _byteToHex[i] = (i + 0x100).toString(16).substr(1);\n  _hexToByte[_byteToHex[i]] = i;\n}\n\n// **`parse()` - Parse a UUID into it's component bytes**\nfunction parse(s, buf, offset) {\n  var i = (buf && offset) || 0, ii = 0;\n\n  buf = buf || [];\n  s.toLowerCase().replace(/[0-9a-f]{2}/g, function(oct) {\n    if (ii < 16) { // Don't overflow!\n      buf[i + ii++] = _hexToByte[oct];\n    }\n  });\n\n  // Zero out remaining bytes if string was short\n  while (ii < 16) {\n    buf[i + ii++] = 0;\n  }\n\n  return buf;\n}\n\n// **`unparse()` - Convert UUID byte array (ala parse()) into a string**\nfunction unparse(buf, offset) {\n  var i = offset || 0, bth = _byteToHex;\n  return  bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]];\n}\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\n// random #'s we need to init node and clockseq\nvar _seedBytes = _rng();\n\n// Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\nvar _nodeId = [\n  _seedBytes[0] | 0x01,\n  _seedBytes[1], _seedBytes[2], _seedBytes[3], _seedBytes[4], _seedBytes[5]\n];\n\n// Per 4.2.2, randomize (14 bit) clockseq\nvar _clockseq = (_seedBytes[6] << 8 | _seedBytes[7]) & 0x3fff;\n\n// Previous uuid creation time\nvar _lastMSecs = 0, _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  var node = options.node || _nodeId;\n  for (var n = 0; n < 6; n++) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : unparse(b);\n}\n\n// **`v4()` - Generate random UUID**\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v4(options, buf, offset) {\n  // Deprecated - 'format' argument, as supported in v1.2\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options == 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || _rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ii++) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || unparse(rnds);\n}\n\n// Export public API\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\nuuid.parse = parse;\nuuid.unparse = unparse;\n\nmodule.exports = uuid;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../~/uuid/uuid.js\n ** module id = 105\n ** module chunks = 0\n **/","\nvar rng;\n\nif (global.crypto && crypto.getRandomValues) {\n  // WHATWG crypto-based RNG - http://wiki.whatwg.org/wiki/Crypto\n  // Moderately fast, high quality\n  var _rnds8 = new Uint8Array(16);\n  rng = function whatwgRNG() {\n    crypto.getRandomValues(_rnds8);\n    return _rnds8;\n  };\n}\n\nif (!rng) {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var  _rnds = new Array(16);\n  rng = function() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      _rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return _rnds;\n  };\n}\n\nmodule.exports = rng;\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../~/uuid/rng-browser.js\n ** module id = 106\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(8);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/jquery-ui/ui/widgets/draggable.js from dll-reference lib_lib\n ** module id = 107\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(17);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/jquery-ui/ui/widgets/resizable.js from dll-reference lib_lib\n ** module id = 108\n ** module chunks = 0\n **/","module.exports = (__webpack_require__(2))(326);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/traverse/index.js from dll-reference lib_lib\n ** module id = 109\n ** module chunks = 0\n **/","/*!\n * angular-translate - v2.12.1 - 2016-09-15\n * \n * Copyright (c) 2016 The angular-translate team, Pascal Precht; Licensed MIT\n */\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module unless amdModuleId is set\n    define([], function () {\n      return (factory());\n    });\n  } else if (typeof exports === 'object') {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like Node.\n    module.exports = factory();\n  } else {\n    factory();\n  }\n}(this, function () {\n\n/**\n * @ngdoc overview\n * @name pascalprecht.translate\n *\n * @description\n * The main module which holds everything together.\n */\nrunTranslate.$inject = ['$translate'];\n$translate.$inject = ['$STORAGE_KEY', '$windowProvider', '$translateSanitizationProvider', 'pascalprechtTranslateOverrider'];\n$translateDefaultInterpolation.$inject = ['$interpolate', '$translateSanitization'];\ntranslateDirective.$inject = ['$translate', '$interpolate', '$compile', '$parse', '$rootScope'];\ntranslateAttrDirective.$inject = ['$translate', '$rootScope'];\ntranslateCloakDirective.$inject = ['$translate', '$rootScope'];\ntranslateFilterFactory.$inject = ['$parse', '$translate'];\n$translationCache.$inject = ['$cacheFactory'];\nangular.module('pascalprecht.translate', ['ng'])\n  .run(runTranslate);\n\nfunction runTranslate($translate) {\n\n  'use strict';\n\n  var key = $translate.storageKey(),\n    storage = $translate.storage();\n\n  var fallbackFromIncorrectStorageValue = function () {\n    var preferred = $translate.preferredLanguage();\n    if (angular.isString(preferred)) {\n      $translate.use(preferred);\n      // $translate.use() will also remember the language.\n      // So, we don't need to call storage.put() here.\n    } else {\n      storage.put(key, $translate.use());\n    }\n  };\n\n  fallbackFromIncorrectStorageValue.displayName = 'fallbackFromIncorrectStorageValue';\n\n  if (storage) {\n    if (!storage.get(key)) {\n      fallbackFromIncorrectStorageValue();\n    } else {\n      $translate.use(storage.get(key))['catch'](fallbackFromIncorrectStorageValue);\n    }\n  } else if (angular.isString($translate.preferredLanguage())) {\n    $translate.use($translate.preferredLanguage());\n  }\n}\n\nrunTranslate.displayName = 'runTranslate';\n\n/**\n * @ngdoc object\n * @name pascalprecht.translate.$translateSanitizationProvider\n *\n * @description\n *\n * Configurations for $translateSanitization\n */\nangular.module('pascalprecht.translate').provider('$translateSanitization', $translateSanitizationProvider);\n\nfunction $translateSanitizationProvider () {\n\n  'use strict';\n\n  var $sanitize,\n      $sce,\n      currentStrategy = null, // TODO change to either 'sanitize', 'escape' or ['sanitize', 'escapeParameters'] in 3.0.\n      hasConfiguredStrategy = false,\n      hasShownNoStrategyConfiguredWarning = false,\n      strategies;\n\n  /**\n   * Definition of a sanitization strategy function\n   * @callback StrategyFunction\n   * @param {string|object} value - value to be sanitized (either a string or an interpolated value map)\n   * @param {string} mode - either 'text' for a string (translation) or 'params' for the interpolated params\n   * @return {string|object}\n   */\n\n  /**\n   * @ngdoc property\n   * @name strategies\n   * @propertyOf pascalprecht.translate.$translateSanitizationProvider\n   *\n   * @description\n   * Following strategies are built-in:\n   * <dl>\n   *   <dt>sanitize</dt>\n   *   <dd>Sanitizes HTML in the translation text using $sanitize</dd>\n   *   <dt>escape</dt>\n   *   <dd>Escapes HTML in the translation</dd>\n   *   <dt>sanitizeParameters</dt>\n   *   <dd>Sanitizes HTML in the values of the interpolation parameters using $sanitize</dd>\n   *   <dt>escapeParameters</dt>\n   *   <dd>Escapes HTML in the values of the interpolation parameters</dd>\n   *   <dt>escaped</dt>\n   *   <dd>Support legacy strategy name 'escaped' for backwards compatibility (will be removed in 3.0)</dd>\n   * </dl>\n   *\n   */\n\n  strategies = {\n    sanitize: function (value, mode/*, context*/) {\n      if (mode === 'text') {\n        value = htmlSanitizeValue(value);\n      }\n      return value;\n    },\n    escape: function (value, mode/*, context*/) {\n      if (mode === 'text') {\n        value = htmlEscapeValue(value);\n      }\n      return value;\n    },\n    sanitizeParameters: function (value, mode/*, context*/) {\n      if (mode === 'params') {\n        value = mapInterpolationParameters(value, htmlSanitizeValue);\n      }\n      return value;\n    },\n    escapeParameters: function (value, mode/*, context*/) {\n      if (mode === 'params') {\n        value = mapInterpolationParameters(value, htmlEscapeValue);\n      }\n      return value;\n    },\n    sce: function (value, mode, context) {\n      if (mode === 'text') {\n        value = htmlTrustValue(value);\n      } else if (mode === 'params') {\n        if (context !== 'filter') {\n          // do html escape in filter context #1101\n          value = mapInterpolationParameters(value, htmlEscapeValue);\n        }\n      }\n      return value;\n    },\n    sceParameters: function (value, mode/*, context*/) {\n      if (mode === 'params') {\n        value = mapInterpolationParameters(value, htmlTrustValue);\n      }\n      return value;\n    }\n  };\n  // Support legacy strategy name 'escaped' for backwards compatibility.\n  // TODO should be removed in 3.0\n  strategies.escaped = strategies.escapeParameters;\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateSanitizationProvider#addStrategy\n   * @methodOf pascalprecht.translate.$translateSanitizationProvider\n   *\n   * @description\n   * Adds a sanitization strategy to the list of known strategies.\n   *\n   * @param {string} strategyName - unique key for a strategy\n   * @param {StrategyFunction} strategyFunction - strategy function\n   * @returns {object} this\n   */\n  this.addStrategy = function (strategyName, strategyFunction) {\n    strategies[strategyName] = strategyFunction;\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateSanitizationProvider#removeStrategy\n   * @methodOf pascalprecht.translate.$translateSanitizationProvider\n   *\n   * @description\n   * Removes a sanitization strategy from the list of known strategies.\n   *\n   * @param {string} strategyName - unique key for a strategy\n   * @returns {object} this\n   */\n  this.removeStrategy = function (strategyName) {\n    delete strategies[strategyName];\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateSanitizationProvider#useStrategy\n   * @methodOf pascalprecht.translate.$translateSanitizationProvider\n   *\n   * @description\n   * Selects a sanitization strategy. When an array is provided the strategies will be executed in order.\n   *\n   * @param {string|StrategyFunction|array} strategy The sanitization strategy / strategies which should be used. Either a name of an existing strategy, a custom strategy function, or an array consisting of multiple names and / or custom functions.\n   * @returns {object} this\n   */\n  this.useStrategy = function (strategy) {\n    hasConfiguredStrategy = true;\n    currentStrategy = strategy;\n    return this;\n  };\n\n  /**\n   * @ngdoc object\n   * @name pascalprecht.translate.$translateSanitization\n   * @requires $injector\n   * @requires $log\n   *\n   * @description\n   * Sanitizes interpolation parameters and translated texts.\n   *\n   */\n  this.$get = ['$injector', '$log', function ($injector, $log) {\n\n    var cachedStrategyMap = {};\n\n    var applyStrategies = function (value, mode, context, selectedStrategies) {\n      angular.forEach(selectedStrategies, function (selectedStrategy) {\n        if (angular.isFunction(selectedStrategy)) {\n          value = selectedStrategy(value, mode, context);\n        } else if (angular.isFunction(strategies[selectedStrategy])) {\n          value = strategies[selectedStrategy](value, mode, context);\n        } else if (angular.isString(strategies[selectedStrategy])) {\n          if (!cachedStrategyMap[strategies[selectedStrategy]]) {\n            try {\n              cachedStrategyMap[strategies[selectedStrategy]] = $injector.get(strategies[selectedStrategy]);\n            } catch (e) {\n              cachedStrategyMap[strategies[selectedStrategy]] = function() {};\n              throw new Error('pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: \\'' + selectedStrategy + '\\'');\n            }\n          }\n          value = cachedStrategyMap[strategies[selectedStrategy]](value, mode, context);\n        } else {\n          throw new Error('pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: \\'' + selectedStrategy + '\\'');\n        }\n      });\n      return value;\n    };\n\n    // TODO: should be removed in 3.0\n    var showNoStrategyConfiguredWarning = function () {\n      if (!hasConfiguredStrategy && !hasShownNoStrategyConfiguredWarning) {\n        $log.warn('pascalprecht.translate.$translateSanitization: No sanitization strategy has been configured. This can have serious security implications. See http://angular-translate.github.io/docs/#/guide/19_security for details.');\n        hasShownNoStrategyConfiguredWarning = true;\n      }\n    };\n\n    if ($injector.has('$sanitize')) {\n      $sanitize = $injector.get('$sanitize');\n    }\n    if ($injector.has('$sce')) {\n      $sce = $injector.get('$sce');\n    }\n\n    return {\n      /**\n       * @ngdoc function\n       * @name pascalprecht.translate.$translateSanitization#useStrategy\n       * @methodOf pascalprecht.translate.$translateSanitization\n       *\n       * @description\n       * Selects a sanitization strategy. When an array is provided the strategies will be executed in order.\n       *\n       * @param {string|StrategyFunction|array} strategy The sanitization strategy / strategies which should be used. Either a name of an existing strategy, a custom strategy function, or an array consisting of multiple names and / or custom functions.\n       */\n      useStrategy: (function (self) {\n        return function (strategy) {\n          self.useStrategy(strategy);\n        };\n      })(this),\n\n      /**\n       * @ngdoc function\n       * @name pascalprecht.translate.$translateSanitization#sanitize\n       * @methodOf pascalprecht.translate.$translateSanitization\n       *\n       * @description\n       * Sanitizes a value.\n       *\n       * @param {string|object} value The value which should be sanitized.\n       * @param {string} mode The current sanitization mode, either 'params' or 'text'.\n       * @param {string|StrategyFunction|array} [strategy] Optional custom strategy which should be used instead of the currently selected strategy.\n       * @param {string} [context] The context of this call: filter, service. Default is service\n       * @returns {string|object} sanitized value\n       */\n      sanitize: function (value, mode, strategy, context) {\n        if (!currentStrategy) {\n          showNoStrategyConfiguredWarning();\n        }\n\n        if (!strategy && strategy !== null) {\n          strategy = currentStrategy;\n        }\n\n        if (!strategy) {\n          return value;\n        }\n\n        if (!context) {\n          context = 'service';\n        }\n\n        var selectedStrategies = angular.isArray(strategy) ? strategy : [strategy];\n        return applyStrategies(value, mode, context, selectedStrategies);\n      }\n    };\n  }];\n\n  var htmlEscapeValue = function (value) {\n    var element = angular.element('<div></div>');\n    element.text(value); // not chainable, see #1044\n    return element.html();\n  };\n\n  var htmlSanitizeValue = function (value) {\n    if (!$sanitize) {\n      throw new Error('pascalprecht.translate.$translateSanitization: Error cannot find $sanitize service. Either include the ngSanitize module (https://docs.angularjs.org/api/ngSanitize) or use a sanitization strategy which does not depend on $sanitize, such as \\'escape\\'.');\n    }\n    return $sanitize(value);\n  };\n\n  var htmlTrustValue = function (value) {\n    if (!$sce) {\n      throw new Error('pascalprecht.translate.$translateSanitization: Error cannot find $sce service.');\n    }\n    return $sce.trustAsHtml(value);\n  };\n\n  var mapInterpolationParameters = function (value, iteratee, stack) {\n    if (angular.isDate(value)) {\n      return value;\n    } else if (angular.isObject(value)) {\n      var result = angular.isArray(value) ? [] : {};\n\n      if (!stack) {\n        stack = [];\n      } else {\n        if (stack.indexOf(value) > -1) {\n          throw new Error('pascalprecht.translate.$translateSanitization: Error cannot interpolate parameter due recursive object');\n        }\n      }\n\n      stack.push(value);\n      angular.forEach(value, function (propertyValue, propertyKey) {\n\n        /* Skipping function properties. */\n        if (angular.isFunction(propertyValue)) {\n          return;\n        }\n\n        result[propertyKey] = mapInterpolationParameters(propertyValue, iteratee, stack);\n      });\n      stack.splice(-1, 1); // remove last\n\n      return result;\n    } else if (angular.isNumber(value)) {\n      return value;\n    } else {\n      return iteratee(value);\n    }\n  };\n}\n\n/**\n * @ngdoc object\n * @name pascalprecht.translate.$translateProvider\n * @description\n *\n * $translateProvider allows developers to register translation-tables, asynchronous loaders\n * and similar to configure translation behavior directly inside of a module.\n *\n */\nangular.module('pascalprecht.translate')\n.constant('pascalprechtTranslateOverrider', {})\n.provider('$translate', $translate);\n\nfunction $translate($STORAGE_KEY, $windowProvider, $translateSanitizationProvider, pascalprechtTranslateOverrider) {\n\n  'use strict';\n\n  var $translationTable = {},\n      $preferredLanguage,\n      $availableLanguageKeys = [],\n      $languageKeyAliases,\n      $fallbackLanguage,\n      $fallbackWasString,\n      $uses,\n      $nextLang,\n      $storageFactory,\n      $storageKey = $STORAGE_KEY,\n      $storagePrefix,\n      $missingTranslationHandlerFactory,\n      $interpolationFactory,\n      $interpolatorFactories = [],\n      $loaderFactory,\n      $cloakClassName = 'translate-cloak',\n      $loaderOptions,\n      $notFoundIndicatorLeft,\n      $notFoundIndicatorRight,\n      $postCompilingEnabled = false,\n      $forceAsyncReloadEnabled = false,\n      $nestedObjectDelimeter = '.',\n      $isReady = false,\n      $keepContent = false,\n      loaderCache,\n      directivePriority = 0,\n      statefulFilter = true,\n      postProcessFn,\n      uniformLanguageTagResolver = 'default',\n      languageTagResolver = {\n        'default': function (tag) {\n          return (tag || '').split('-').join('_');\n        },\n        java: function (tag) {\n          var temp = (tag || '').split('-').join('_');\n          var parts = temp.split('_');\n          return parts.length > 1 ? (parts[0].toLowerCase() + '_' + parts[1].toUpperCase()) : temp;\n        },\n        bcp47: function (tag) {\n          var temp = (tag || '').split('_').join('-');\n          var parts = temp.split('-');\n          return parts.length > 1 ? (parts[0].toLowerCase() + '-' + parts[1].toUpperCase()) : temp;\n        },\n        'iso639-1': function (tag) {\n          var temp = (tag || '').split('_').join('-');\n          var parts = temp.split('-');\n          return parts[0].toLowerCase();\n        }\n      };\n\n  var version = '2.12.1';\n\n  // tries to determine the browsers language\n  var getFirstBrowserLanguage = function () {\n\n    // internal purpose only\n    if (angular.isFunction(pascalprechtTranslateOverrider.getLocale)) {\n      return pascalprechtTranslateOverrider.getLocale();\n    }\n\n    var nav = $windowProvider.$get().navigator,\n        browserLanguagePropertyKeys = ['language', 'browserLanguage', 'systemLanguage', 'userLanguage'],\n        i,\n        language;\n\n    // support for HTML 5.1 \"navigator.languages\"\n    if (angular.isArray(nav.languages)) {\n      for (i = 0; i < nav.languages.length; i++) {\n        language = nav.languages[i];\n        if (language && language.length) {\n          return language;\n        }\n      }\n    }\n\n    // support for other well known properties in browsers\n    for (i = 0; i < browserLanguagePropertyKeys.length; i++) {\n      language = nav[browserLanguagePropertyKeys[i]];\n      if (language && language.length) {\n        return language;\n      }\n    }\n\n    return null;\n  };\n  getFirstBrowserLanguage.displayName = 'angular-translate/service: getFirstBrowserLanguage';\n\n  // tries to determine the browsers locale\n  var getLocale = function () {\n    var locale = getFirstBrowserLanguage() || '';\n    if (languageTagResolver[uniformLanguageTagResolver]) {\n      locale = languageTagResolver[uniformLanguageTagResolver](locale);\n    }\n    return locale;\n  };\n  getLocale.displayName = 'angular-translate/service: getLocale';\n\n  /**\n   * @name indexOf\n   * @private\n   *\n   * @description\n   * indexOf polyfill. Kinda sorta.\n   *\n   * @param {array} array Array to search in.\n   * @param {string} searchElement Element to search for.\n   *\n   * @returns {int} Index of search element.\n   */\n  var indexOf = function(array, searchElement) {\n    for (var i = 0, len = array.length; i < len; i++) {\n      if (array[i] === searchElement) {\n        return i;\n      }\n    }\n    return -1;\n  };\n\n  /**\n   * @name trim\n   * @private\n   *\n   * @description\n   * trim polyfill\n   *\n   * @returns {string} The string stripped of whitespace from both ends\n   */\n  var trim = function() {\n    return this.toString().replace(/^\\s+|\\s+$/g, '');\n  };\n\n  var negotiateLocale = function (preferred) {\n    if(!preferred) {\n      return;\n    }\n\n    var avail = [],\n        locale = angular.lowercase(preferred),\n        i = 0,\n        n = $availableLanguageKeys.length;\n\n    for (; i < n; i++) {\n      avail.push(angular.lowercase($availableLanguageKeys[i]));\n    }\n\n    // Check for an exact match in our list of available keys\n    if (indexOf(avail, locale) > -1) {\n      return preferred;\n    }\n\n    if ($languageKeyAliases) {\n      var alias;\n      for (var langKeyAlias in $languageKeyAliases) {\n        if ($languageKeyAliases.hasOwnProperty(langKeyAlias)) {\n          var hasWildcardKey = false;\n          var hasExactKey = Object.prototype.hasOwnProperty.call($languageKeyAliases, langKeyAlias) &&\n            angular.lowercase(langKeyAlias) === angular.lowercase(preferred);\n\n          if (langKeyAlias.slice(-1) === '*') {\n            hasWildcardKey = langKeyAlias.slice(0, -1) === preferred.slice(0, langKeyAlias.length - 1);\n          }\n          if (hasExactKey || hasWildcardKey) {\n            alias = $languageKeyAliases[langKeyAlias];\n            if (indexOf(avail, angular.lowercase(alias)) > -1) {\n              return alias;\n            }\n          }\n        }\n      }\n    }\n\n    // Check for a language code without region\n    var parts = preferred.split('_');\n\n    if (parts.length > 1 && indexOf(avail, angular.lowercase(parts[0])) > -1) {\n      return parts[0];\n    }\n\n    // If everything fails, return undefined.\n    return;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#translations\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Registers a new translation table for specific language key.\n   *\n   * To register a translation table for specific language, pass a defined language\n   * key as first parameter.\n   *\n   * <pre>\n   *  // register translation table for language: 'de_DE'\n   *  $translateProvider.translations('de_DE', {\n   *    'GREETING': 'Hallo Welt!'\n   *  });\n   *\n   *  // register another one\n   *  $translateProvider.translations('en_US', {\n   *    'GREETING': 'Hello world!'\n   *  });\n   * </pre>\n   *\n   * When registering multiple translation tables for for the same language key,\n   * the actual translation table gets extended. This allows you to define module\n   * specific translation which only get added, once a specific module is loaded in\n   * your app.\n   *\n   * Invoking this method with no arguments returns the translation table which was\n   * registered with no language key. Invoking it with a language key returns the\n   * related translation table.\n   *\n   * @param {string} langKey A language key.\n   * @param {object} translationTable A plain old JavaScript object that represents a translation table.\n   *\n   */\n  var translations = function (langKey, translationTable) {\n\n    if (!langKey && !translationTable) {\n      return $translationTable;\n    }\n\n    if (langKey && !translationTable) {\n      if (angular.isString(langKey)) {\n        return $translationTable[langKey];\n      }\n    } else {\n      if (!angular.isObject($translationTable[langKey])) {\n        $translationTable[langKey] = {};\n      }\n      angular.extend($translationTable[langKey], flatObject(translationTable));\n    }\n    return this;\n  };\n\n  this.translations = translations;\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#cloakClassName\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   *\n   * Let's you change the class name for `translate-cloak` directive.\n   * Default class name is `translate-cloak`.\n   *\n   * @param {string} name translate-cloak class name\n   */\n  this.cloakClassName = function (name) {\n    if (!name) {\n      return $cloakClassName;\n    }\n    $cloakClassName = name;\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#nestedObjectDelimeter\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   *\n   * Let's you change the delimiter for namespaced translations.\n   * Default delimiter is `.`.\n   *\n   * @param {string} delimiter namespace separator\n   */\n  this.nestedObjectDelimeter = function (delimiter) {\n    if (!delimiter) {\n      return $nestedObjectDelimeter;\n    }\n    $nestedObjectDelimeter = delimiter;\n    return this;\n  };\n\n  /**\n   * @name flatObject\n   * @private\n   *\n   * @description\n   * Flats an object. This function is used to flatten given translation data with\n   * namespaces, so they are later accessible via dot notation.\n   */\n  var flatObject = function (data, path, result, prevKey) {\n    var key, keyWithPath, keyWithShortPath, val;\n\n    if (!path) {\n      path = [];\n    }\n    if (!result) {\n      result = {};\n    }\n    for (key in data) {\n      if (!Object.prototype.hasOwnProperty.call(data, key)) {\n        continue;\n      }\n      val = data[key];\n      if (angular.isObject(val)) {\n        flatObject(val, path.concat(key), result, key);\n      } else {\n        keyWithPath = path.length ? ('' + path.join($nestedObjectDelimeter) + $nestedObjectDelimeter + key) : key;\n        if(path.length && key === prevKey){\n          // Create shortcut path (foo.bar == foo.bar.bar)\n          keyWithShortPath = '' + path.join($nestedObjectDelimeter);\n          // Link it to original path\n          result[keyWithShortPath] = '@:' + keyWithPath;\n        }\n        result[keyWithPath] = val;\n      }\n    }\n    return result;\n  };\n  flatObject.displayName = 'flatObject';\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#addInterpolation\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Adds interpolation services to angular-translate, so it can manage them.\n   *\n   * @param {object} factory Interpolation service factory\n   */\n  this.addInterpolation = function (factory) {\n    $interpolatorFactories.push(factory);\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#useMessageFormatInterpolation\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Tells angular-translate to use interpolation functionality of messageformat.js.\n   * This is useful when having high level pluralization and gender selection.\n   */\n  this.useMessageFormatInterpolation = function () {\n    return this.useInterpolation('$translateMessageFormatInterpolation');\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#useInterpolation\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Tells angular-translate which interpolation style to use as default, application-wide.\n   * Simply pass a factory/service name. The interpolation service has to implement\n   * the correct interface.\n   *\n   * @param {string} factory Interpolation service name.\n   */\n  this.useInterpolation = function (factory) {\n    $interpolationFactory = factory;\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#useSanitizeStrategy\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Simply sets a sanitation strategy type.\n   *\n   * @param {string} value Strategy type.\n   */\n  this.useSanitizeValueStrategy = function (value) {\n    $translateSanitizationProvider.useStrategy(value);\n    return this;\n  };\n\n /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#preferredLanguage\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Tells the module which of the registered translation tables to use for translation\n   * at initial startup by passing a language key. Similar to `$translateProvider#use`\n   * only that it says which language to **prefer**.\n   *\n   * @param {string} langKey A language key.\n   */\n  this.preferredLanguage = function(langKey) {\n    if (langKey) {\n      setupPreferredLanguage(langKey);\n      return this;\n    }\n    return $preferredLanguage;\n  };\n  var setupPreferredLanguage = function (langKey) {\n    if (langKey) {\n      $preferredLanguage = langKey;\n    }\n    return $preferredLanguage;\n  };\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#translationNotFoundIndicator\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Sets an indicator which is used when a translation isn't found. E.g. when\n   * setting the indicator as 'X' and one tries to translate a translation id\n   * called `NOT_FOUND`, this will result in `X NOT_FOUND X`.\n   *\n   * Internally this methods sets a left indicator and a right indicator using\n   * `$translateProvider.translationNotFoundIndicatorLeft()` and\n   * `$translateProvider.translationNotFoundIndicatorRight()`.\n   *\n   * **Note**: These methods automatically add a whitespace between the indicators\n   * and the translation id.\n   *\n   * @param {string} indicator An indicator, could be any string.\n   */\n  this.translationNotFoundIndicator = function (indicator) {\n    this.translationNotFoundIndicatorLeft(indicator);\n    this.translationNotFoundIndicatorRight(indicator);\n    return this;\n  };\n\n  /**\n   * ngdoc function\n   * @name pascalprecht.translate.$translateProvider#translationNotFoundIndicatorLeft\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Sets an indicator which is used when a translation isn't found left to the\n   * translation id.\n   *\n   * @param {string} indicator An indicator.\n   */\n  this.translationNotFoundIndicatorLeft = function (indicator) {\n    if (!indicator) {\n      return $notFoundIndicatorLeft;\n    }\n    $notFoundIndicatorLeft = indicator;\n    return this;\n  };\n\n  /**\n   * ngdoc function\n   * @name pascalprecht.translate.$translateProvider#translationNotFoundIndicatorLeft\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Sets an indicator which is used when a translation isn't found right to the\n   * translation id.\n   *\n   * @param {string} indicator An indicator.\n   */\n  this.translationNotFoundIndicatorRight = function (indicator) {\n    if (!indicator) {\n      return $notFoundIndicatorRight;\n    }\n    $notFoundIndicatorRight = indicator;\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#fallbackLanguage\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Tells the module which of the registered translation tables to use when missing translations\n   * at initial startup by passing a language key. Similar to `$translateProvider#use`\n   * only that it says which language to **fallback**.\n   *\n   * @param {string||array} langKey A language key.\n   *\n   */\n  this.fallbackLanguage = function (langKey) {\n    fallbackStack(langKey);\n    return this;\n  };\n\n  var fallbackStack = function (langKey) {\n    if (langKey) {\n      if (angular.isString(langKey)) {\n        $fallbackWasString = true;\n        $fallbackLanguage = [ langKey ];\n      } else if (angular.isArray(langKey)) {\n        $fallbackWasString = false;\n        $fallbackLanguage = langKey;\n      }\n      if (angular.isString($preferredLanguage)  && indexOf($fallbackLanguage, $preferredLanguage) < 0) {\n        $fallbackLanguage.push($preferredLanguage);\n      }\n\n      return this;\n    } else {\n      if ($fallbackWasString) {\n        return $fallbackLanguage[0];\n      } else {\n        return $fallbackLanguage;\n      }\n    }\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#use\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Set which translation table to use for translation by given language key. When\n   * trying to 'use' a language which isn't provided, it'll throw an error.\n   *\n   * You actually don't have to use this method since `$translateProvider#preferredLanguage`\n   * does the job too.\n   *\n   * @param {string} langKey A language key.\n   */\n  this.use = function (langKey) {\n    if (langKey) {\n      if (!$translationTable[langKey] && (!$loaderFactory)) {\n        // only throw an error, when not loading translation data asynchronously\n        throw new Error('$translateProvider couldn\\'t find translationTable for langKey: \\'' + langKey + '\\'');\n      }\n      $uses = langKey;\n      return this;\n    }\n    return $uses;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#resolveClientLocale\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * This returns the current browser/client's language key. The result is processed with the configured uniform tag resolver.\n   *\n   * @returns {string} the current client/browser language key\n   */\n  this.resolveClientLocale = function () {\n    return getLocale();\n  };\n\n /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#storageKey\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Tells the module which key must represent the choosed language by a user in the storage.\n   *\n   * @param {string} key A key for the storage.\n   */\n  var storageKey = function(key) {\n    if (!key) {\n      if ($storagePrefix) {\n        return $storagePrefix + $storageKey;\n      }\n      return $storageKey;\n    }\n    $storageKey = key;\n    return this;\n  };\n\n  this.storageKey = storageKey;\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#useUrlLoader\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Tells angular-translate to use `$translateUrlLoader` extension service as loader.\n   *\n   * @param {string} url Url\n   * @param {Object=} options Optional configuration object\n   */\n  this.useUrlLoader = function (url, options) {\n    return this.useLoader('$translateUrlLoader', angular.extend({ url: url }, options));\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#useStaticFilesLoader\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Tells angular-translate to use `$translateStaticFilesLoader` extension service as loader.\n   *\n   * @param {Object=} options Optional configuration object\n   */\n  this.useStaticFilesLoader = function (options) {\n    return this.useLoader('$translateStaticFilesLoader', options);\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#useLoader\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Tells angular-translate to use any other service as loader.\n   *\n   * @param {string} loaderFactory Factory name to use\n   * @param {Object=} options Optional configuration object\n   */\n  this.useLoader = function (loaderFactory, options) {\n    $loaderFactory = loaderFactory;\n    $loaderOptions = options || {};\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#useLocalStorage\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Tells angular-translate to use `$translateLocalStorage` service as storage layer.\n   *\n   */\n  this.useLocalStorage = function () {\n    return this.useStorage('$translateLocalStorage');\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#useCookieStorage\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Tells angular-translate to use `$translateCookieStorage` service as storage layer.\n   */\n  this.useCookieStorage = function () {\n    return this.useStorage('$translateCookieStorage');\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#useStorage\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Tells angular-translate to use custom service as storage layer.\n   */\n  this.useStorage = function (storageFactory) {\n    $storageFactory = storageFactory;\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#storagePrefix\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Sets prefix for storage key.\n   *\n   * @param {string} prefix Storage key prefix\n   */\n  this.storagePrefix = function (prefix) {\n    if (!prefix) {\n      return prefix;\n    }\n    $storagePrefix = prefix;\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#useMissingTranslationHandlerLog\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Tells angular-translate to use built-in log handler when trying to translate\n   * a translation Id which doesn't exist.\n   *\n   * This is actually a shortcut method for `useMissingTranslationHandler()`.\n   *\n   */\n  this.useMissingTranslationHandlerLog = function () {\n    return this.useMissingTranslationHandler('$translateMissingTranslationHandlerLog');\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#useMissingTranslationHandler\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Expects a factory name which later gets instantiated with `$injector`.\n   * This method can be used to tell angular-translate to use a custom\n   * missingTranslationHandler. Just build a factory which returns a function\n   * and expects a translation id as argument.\n   *\n   * Example:\n   * <pre>\n   *  app.config(function ($translateProvider) {\n   *    $translateProvider.useMissingTranslationHandler('customHandler');\n   *  });\n   *\n   *  app.factory('customHandler', function (dep1, dep2) {\n   *    return function (translationId) {\n   *      // something with translationId and dep1 and dep2\n   *    };\n   *  });\n   * </pre>\n   *\n   * @param {string} factory Factory name\n   */\n  this.useMissingTranslationHandler = function (factory) {\n    $missingTranslationHandlerFactory = factory;\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#usePostCompiling\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * If post compiling is enabled, all translated values will be processed\n   * again with AngularJS' $compile.\n   *\n   * Example:\n   * <pre>\n   *  app.config(function ($translateProvider) {\n   *    $translateProvider.usePostCompiling(true);\n   *  });\n   * </pre>\n   *\n   * @param {string} factory Factory name\n   */\n  this.usePostCompiling = function (value) {\n    $postCompilingEnabled = !(!value);\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#forceAsyncReload\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * If force async reload is enabled, async loader will always be called\n   * even if $translationTable already contains the language key, adding\n   * possible new entries to the $translationTable.\n   *\n   * Example:\n   * <pre>\n   *  app.config(function ($translateProvider) {\n   *    $translateProvider.forceAsyncReload(true);\n   *  });\n   * </pre>\n   *\n   * @param {boolean} value - valid values are true or false\n   */\n  this.forceAsyncReload = function (value) {\n    $forceAsyncReloadEnabled = !(!value);\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#uniformLanguageTag\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Tells angular-translate which language tag should be used as a result when determining\n   * the current browser language.\n   *\n   * This setting must be set before invoking {@link pascalprecht.translate.$translateProvider#methods_determinePreferredLanguage determinePreferredLanguage()}.\n   *\n   * <pre>\n   * $translateProvider\n   *   .uniformLanguageTag('bcp47')\n   *   .determinePreferredLanguage()\n   * </pre>\n   *\n   * The resolver currently supports:\n   * * default\n   *     (traditionally: hyphens will be converted into underscores, i.e. en-US => en_US)\n   *     en-US => en_US\n   *     en_US => en_US\n   *     en-us => en_us\n   * * java\n   *     like default, but the second part will be always in uppercase\n   *     en-US => en_US\n   *     en_US => en_US\n   *     en-us => en_US\n   * * BCP 47 (RFC 4646 & 4647)\n   *     en-US => en-US\n   *     en_US => en-US\n   *     en-us => en-US\n   *\n   * See also:\n   * * http://en.wikipedia.org/wiki/IETF_language_tag\n   * * http://www.w3.org/International/core/langtags/\n   * * http://tools.ietf.org/html/bcp47\n   *\n   * @param {string|object} options - options (or standard)\n   * @param {string} options.standard - valid values are 'default', 'bcp47', 'java'\n   */\n  this.uniformLanguageTag = function (options) {\n\n    if (!options) {\n      options = {};\n    } else if (angular.isString(options)) {\n      options = {\n        standard: options\n      };\n    }\n\n    uniformLanguageTagResolver = options.standard;\n\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#determinePreferredLanguage\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Tells angular-translate to try to determine on its own which language key\n   * to set as preferred language. When `fn` is given, angular-translate uses it\n   * to determine a language key, otherwise it uses the built-in `getLocale()`\n   * method.\n   *\n   * The `getLocale()` returns a language key in the format `[lang]_[country]` or\n   * `[lang]` depending on what the browser provides.\n   *\n   * Use this method at your own risk, since not all browsers return a valid\n   * locale (see {@link pascalprecht.translate.$translateProvider#methods_uniformLanguageTag uniformLanguageTag()}).\n   *\n   * @param {Function=} fn Function to determine a browser's locale\n   */\n  this.determinePreferredLanguage = function (fn) {\n\n    var locale = (fn && angular.isFunction(fn)) ? fn() : getLocale();\n\n    if (!$availableLanguageKeys.length) {\n      $preferredLanguage = locale;\n    } else {\n      $preferredLanguage = negotiateLocale(locale) || locale;\n    }\n\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#registerAvailableLanguageKeys\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Registers a set of language keys the app will work with. Use this method in\n   * combination with\n   * {@link pascalprecht.translate.$translateProvider#determinePreferredLanguage determinePreferredLanguage}.\n   * When available languages keys are registered, angular-translate\n   * tries to find the best fitting language key depending on the browsers locale,\n   * considering your language key convention.\n   *\n   * @param {object} languageKeys Array of language keys the your app will use\n   * @param {object=} aliases Alias map.\n   */\n  this.registerAvailableLanguageKeys = function (languageKeys, aliases) {\n    if (languageKeys) {\n      $availableLanguageKeys = languageKeys;\n      if (aliases) {\n        $languageKeyAliases = aliases;\n      }\n      return this;\n    }\n    return $availableLanguageKeys;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#useLoaderCache\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Registers a cache for internal $http based loaders.\n   * {@link pascalprecht.translate.$translationCache $translationCache}.\n   * When false the cache will be disabled (default). When true or undefined\n   * the cache will be a default (see $cacheFactory). When an object it will\n   * be treat as a cache object itself: the usage is $http({cache: cache})\n   *\n   * @param {object} cache boolean, string or cache-object\n   */\n  this.useLoaderCache = function (cache) {\n    if (cache === false) {\n      // disable cache\n      loaderCache = undefined;\n    } else if (cache === true) {\n      // enable cache using AJS defaults\n      loaderCache = true;\n    } else if (typeof(cache) === 'undefined') {\n      // enable cache using default\n      loaderCache = '$translationCache';\n    } else if (cache) {\n      // enable cache using given one (see $cacheFactory)\n      loaderCache = cache;\n    }\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#directivePriority\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Sets the default priority of the translate directive. The standard value is `0`.\n   * Calling this function without an argument will return the current value.\n   *\n   * @param {number} priority for the translate-directive\n   */\n  this.directivePriority = function (priority) {\n    if (priority === undefined) {\n      // getter\n      return directivePriority;\n    } else {\n      // setter with chaining\n      directivePriority = priority;\n      return this;\n    }\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#statefulFilter\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * Since AngularJS 1.3, filters which are not stateless (depending at the scope)\n   * have to explicit define this behavior.\n   * Sets whether the translate filter should be stateful or stateless. The standard value is `true`\n   * meaning being stateful.\n   * Calling this function without an argument will return the current value.\n   *\n   * @param {boolean} state - defines the state of the filter\n   */\n  this.statefulFilter = function (state) {\n    if (state === undefined) {\n      // getter\n      return statefulFilter;\n    } else {\n      // setter with chaining\n      statefulFilter = state;\n      return this;\n    }\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#postProcess\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * The post processor will be intercept right after the translation result. It can modify the result.\n   *\n   * @param {object} fn Function or service name (string) to be called after the translation value has been set / resolved. The function itself will enrich every value being processed and then continue the normal resolver process\n   */\n  this.postProcess = function (fn) {\n    if (fn) {\n      postProcessFn = fn;\n    } else {\n      postProcessFn = undefined;\n    }\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateProvider#keepContent\n   * @methodOf pascalprecht.translate.$translateProvider\n   *\n   * @description\n   * If keepContent is set to true than translate directive will always use innerHTML\n   * as a default translation\n   *\n   * Example:\n   * <pre>\n   *  app.config(function ($translateProvider) {\n   *    $translateProvider.keepContent(true);\n   *  });\n   * </pre>\n   *\n   * @param {boolean} value - valid values are true or false\n   */\n  this.keepContent = function (value) {\n    $keepContent = !(!value);\n    return this;\n  };\n\n  /**\n   * @ngdoc object\n   * @name pascalprecht.translate.$translate\n   * @requires $interpolate\n   * @requires $log\n   * @requires $rootScope\n   * @requires $q\n   *\n   * @description\n   * The `$translate` service is the actual core of angular-translate. It expects a translation id\n   * and optional interpolate parameters to translate contents.\n   *\n   * <pre>\n   *  $translate('HEADLINE_TEXT').then(function (translation) {\n   *    $scope.translatedText = translation;\n   *  });\n   * </pre>\n   *\n   * @param {string|array} translationId A token which represents a translation id\n   *                                     This can be optionally an array of translation ids which\n   *                                     results that the function returns an object where each key\n   *                                     is the translation id and the value the translation.\n   * @param {object=} interpolateParams An object hash for dynamic values\n   * @param {string} interpolationId The id of the interpolation to use\n   * @param {string} defaultTranslationText the optional default translation text that is written as\n   *                                        as default text in case it is not found in any configured language\n   * @param {string} forceLanguage A language to be used instead of the current language\n   * @returns {object} promise\n   */\n  this.$get = [\n    '$log',\n    '$injector',\n    '$rootScope',\n    '$q',\n    function ($log, $injector, $rootScope, $q) {\n\n      var Storage,\n          defaultInterpolator = $injector.get($interpolationFactory || '$translateDefaultInterpolation'),\n          pendingLoader = false,\n          interpolatorHashMap = {},\n          langPromises = {},\n          fallbackIndex,\n          startFallbackIteration;\n\n      var $translate = function (translationId, interpolateParams, interpolationId, defaultTranslationText, forceLanguage) {\n        if (!$uses && $preferredLanguage) {\n          $uses = $preferredLanguage;\n        }\n        var uses = (forceLanguage && forceLanguage !== $uses) ? // we don't want to re-negotiate $uses\n              (negotiateLocale(forceLanguage) || forceLanguage) : $uses;\n\n        // Check forceLanguage is present\n        if (forceLanguage) {\n          loadTranslationsIfMissing(forceLanguage);\n        }\n\n        // Duck detection: If the first argument is an array, a bunch of translations was requested.\n        // The result is an object.\n        if (angular.isArray(translationId)) {\n          // Inspired by Q.allSettled by Kris Kowal\n          // https://github.com/kriskowal/q/blob/b0fa72980717dc202ffc3cbf03b936e10ebbb9d7/q.js#L1553-1563\n          // This transforms all promises regardless resolved or rejected\n          var translateAll = function (translationIds) {\n            var results = {}; // storing the actual results\n            var promises = []; // promises to wait for\n            // Wraps the promise a) being always resolved and b) storing the link id->value\n            var translate = function (translationId) {\n              var deferred = $q.defer();\n              var regardless = function (value) {\n                results[translationId] = value;\n                deferred.resolve([translationId, value]);\n              };\n              // we don't care whether the promise was resolved or rejected; just store the values\n              $translate(translationId, interpolateParams, interpolationId, defaultTranslationText, forceLanguage).then(regardless, regardless);\n              return deferred.promise;\n            };\n            for (var i = 0, c = translationIds.length; i < c; i++) {\n              promises.push(translate(translationIds[i]));\n            }\n            // wait for all (including storing to results)\n            return $q.all(promises).then(function () {\n              // return the results\n              return results;\n            });\n          };\n          return translateAll(translationId);\n        }\n\n        var deferred = $q.defer();\n\n        // trim off any whitespace\n        if (translationId) {\n          translationId = trim.apply(translationId);\n        }\n\n        var promiseToWaitFor = (function () {\n          var promise = $preferredLanguage ?\n            langPromises[$preferredLanguage] :\n            langPromises[uses];\n\n          fallbackIndex = 0;\n\n          if ($storageFactory && !promise) {\n            // looks like there's no pending promise for $preferredLanguage or\n            // $uses. Maybe there's one pending for a language that comes from\n            // storage.\n            var langKey = Storage.get($storageKey);\n            promise = langPromises[langKey];\n\n            if ($fallbackLanguage && $fallbackLanguage.length) {\n                var index = indexOf($fallbackLanguage, langKey);\n                // maybe the language from storage is also defined as fallback language\n                // we increase the fallback language index to not search in that language\n                // as fallback, since it's probably the first used language\n                // in that case the index starts after the first element\n                fallbackIndex = (index === 0) ? 1 : 0;\n\n                // but we can make sure to ALWAYS fallback to preferred language at least\n                if (indexOf($fallbackLanguage, $preferredLanguage) < 0) {\n                  $fallbackLanguage.push($preferredLanguage);\n                }\n            }\n          }\n          return promise;\n        }());\n\n        if (!promiseToWaitFor) {\n          // no promise to wait for? okay. Then there's no loader registered\n          // nor is a one pending for language that comes from storage.\n          // We can just translate.\n          determineTranslation(translationId, interpolateParams, interpolationId, defaultTranslationText, uses).then(deferred.resolve, deferred.reject);\n        } else {\n          var promiseResolved = function () {\n            // $uses may have changed while waiting\n            if (!forceLanguage) {\n              uses = $uses;\n            }\n            determineTranslation(translationId, interpolateParams, interpolationId, defaultTranslationText, uses).then(deferred.resolve, deferred.reject);\n          };\n          promiseResolved.displayName = 'promiseResolved';\n\n          promiseToWaitFor['finally'](promiseResolved);\n        }\n        return deferred.promise;\n      };\n\n      /**\n       * @name applyNotFoundIndicators\n       * @private\n       *\n       * @description\n       * Applies not fount indicators to given translation id, if needed.\n       * This function gets only executed, if a translation id doesn't exist,\n       * which is why a translation id is expected as argument.\n       *\n       * @param {string} translationId Translation id.\n       * @returns {string} Same as given translation id but applied with not found\n       * indicators.\n       */\n      var applyNotFoundIndicators = function (translationId) {\n        // applying notFoundIndicators\n        if ($notFoundIndicatorLeft) {\n          translationId = [$notFoundIndicatorLeft, translationId].join(' ');\n        }\n        if ($notFoundIndicatorRight) {\n          translationId = [translationId, $notFoundIndicatorRight].join(' ');\n        }\n        return translationId;\n      };\n\n      /**\n       * @name useLanguage\n       * @private\n       *\n       * @description\n       * Makes actual use of a language by setting a given language key as used\n       * language and informs registered interpolators to also use the given\n       * key as locale.\n       *\n       * @param {string} key Locale key.\n       */\n      var useLanguage = function (key) {\n        $uses = key;\n\n        // make sure to store new language key before triggering success event\n        if ($storageFactory) {\n          Storage.put($translate.storageKey(), $uses);\n        }\n\n        $rootScope.$emit('$translateChangeSuccess', {language: key});\n\n        // inform default interpolator\n        defaultInterpolator.setLocale($uses);\n\n        var eachInterpolator = function (interpolator, id) {\n          interpolatorHashMap[id].setLocale($uses);\n        };\n        eachInterpolator.displayName = 'eachInterpolatorLocaleSetter';\n\n        // inform all others too!\n        angular.forEach(interpolatorHashMap, eachInterpolator);\n        $rootScope.$emit('$translateChangeEnd', {language: key});\n      };\n\n      /**\n       * @name loadAsync\n       * @private\n       *\n       * @description\n       * Kicks of registered async loader using `$injector` and applies existing\n       * loader options. When resolved, it updates translation tables accordingly\n       * or rejects with given language key.\n       *\n       * @param {string} key Language key.\n       * @return {Promise} A promise.\n       */\n      var loadAsync = function (key) {\n        if (!key) {\n          throw 'No language key specified for loading.';\n        }\n\n        var deferred = $q.defer();\n\n        $rootScope.$emit('$translateLoadingStart', {language: key});\n        pendingLoader = true;\n\n        var cache = loaderCache;\n        if (typeof(cache) === 'string') {\n          // getting on-demand instance of loader\n          cache = $injector.get(cache);\n        }\n\n        var loaderOptions = angular.extend({}, $loaderOptions, {\n          key: key,\n          $http: angular.extend({}, {\n            cache: cache\n          }, $loaderOptions.$http)\n        });\n\n        var onLoaderSuccess = function (data) {\n          var translationTable = {};\n          $rootScope.$emit('$translateLoadingSuccess', {language: key});\n\n          if (angular.isArray(data)) {\n            angular.forEach(data, function (table) {\n              angular.extend(translationTable, flatObject(table));\n            });\n          } else {\n            angular.extend(translationTable, flatObject(data));\n          }\n          pendingLoader = false;\n          deferred.resolve({\n            key: key,\n            table: translationTable\n          });\n          $rootScope.$emit('$translateLoadingEnd', {language: key});\n        };\n        onLoaderSuccess.displayName = 'onLoaderSuccess';\n\n        var onLoaderError = function (key) {\n          $rootScope.$emit('$translateLoadingError', {language: key});\n          deferred.reject(key);\n          $rootScope.$emit('$translateLoadingEnd', {language: key});\n        };\n        onLoaderError.displayName = 'onLoaderError';\n\n        $injector.get($loaderFactory)(loaderOptions)\n          .then(onLoaderSuccess, onLoaderError);\n\n        return deferred.promise;\n      };\n\n      if ($storageFactory) {\n        Storage = $injector.get($storageFactory);\n\n        if (!Storage.get || !Storage.put) {\n          throw new Error('Couldn\\'t use storage \\'' + $storageFactory + '\\', missing get() or put() method!');\n        }\n      }\n\n      // if we have additional interpolations that were added via\n      // $translateProvider.addInterpolation(), we have to map'em\n      if ($interpolatorFactories.length) {\n        var eachInterpolationFactory = function (interpolatorFactory) {\n          var interpolator = $injector.get(interpolatorFactory);\n          // setting initial locale for each interpolation service\n          interpolator.setLocale($preferredLanguage || $uses);\n          // make'em recognizable through id\n          interpolatorHashMap[interpolator.getInterpolationIdentifier()] = interpolator;\n        };\n        eachInterpolationFactory.displayName = 'interpolationFactoryAdder';\n\n        angular.forEach($interpolatorFactories, eachInterpolationFactory);\n      }\n\n      /**\n       * @name getTranslationTable\n       * @private\n       *\n       * @description\n       * Returns a promise that resolves to the translation table\n       * or is rejected if an error occurred.\n       *\n       * @param langKey\n       * @returns {Q.promise}\n       */\n      var getTranslationTable = function (langKey) {\n        var deferred = $q.defer();\n        if (Object.prototype.hasOwnProperty.call($translationTable, langKey)) {\n          deferred.resolve($translationTable[langKey]);\n        } else if (langPromises[langKey]) {\n          var onResolve = function (data) {\n            translations(data.key, data.table);\n            deferred.resolve(data.table);\n          };\n          onResolve.displayName = 'translationTableResolver';\n          langPromises[langKey].then(onResolve, deferred.reject);\n        } else {\n          deferred.reject();\n        }\n        return deferred.promise;\n      };\n\n      /**\n       * @name getFallbackTranslation\n       * @private\n       *\n       * @description\n       * Returns a promise that will resolve to the translation\n       * or be rejected if no translation was found for the language.\n       * This function is currently only used for fallback language translation.\n       *\n       * @param langKey The language to translate to.\n       * @param translationId\n       * @param interpolateParams\n       * @param Interpolator\n       * @returns {Q.promise}\n       */\n      var getFallbackTranslation = function (langKey, translationId, interpolateParams, Interpolator) {\n        var deferred = $q.defer();\n\n        var onResolve = function (translationTable) {\n          if (Object.prototype.hasOwnProperty.call(translationTable, translationId)) {\n            Interpolator.setLocale(langKey);\n            var translation = translationTable[translationId];\n            if (translation.substr(0, 2) === '@:') {\n              getFallbackTranslation(langKey, translation.substr(2), interpolateParams, Interpolator)\n                .then(deferred.resolve, deferred.reject);\n            } else {\n              var interpolatedValue = Interpolator.interpolate(translationTable[translationId], interpolateParams, 'service');\n              interpolatedValue = applyPostProcessing(translationId, translationTable[translationId], interpolatedValue, interpolateParams, langKey);\n\n              deferred.resolve(interpolatedValue);\n\n            }\n            Interpolator.setLocale($uses);\n          } else {\n            deferred.reject();\n          }\n        };\n        onResolve.displayName = 'fallbackTranslationResolver';\n\n        getTranslationTable(langKey).then(onResolve, deferred.reject);\n\n        return deferred.promise;\n      };\n\n      /**\n       * @name getFallbackTranslationInstant\n       * @private\n       *\n       * @description\n       * Returns a translation\n       * This function is currently only used for fallback language translation.\n       *\n       * @param langKey The language to translate to.\n       * @param translationId\n       * @param interpolateParams\n       * @param Interpolator\n       * @returns {string} translation\n       */\n      var getFallbackTranslationInstant = function (langKey, translationId, interpolateParams, Interpolator) {\n        var result, translationTable = $translationTable[langKey];\n\n        if (translationTable && Object.prototype.hasOwnProperty.call(translationTable, translationId)) {\n          Interpolator.setLocale(langKey);\n          result = Interpolator.interpolate(translationTable[translationId], interpolateParams, 'filter');\n          result = applyPostProcessing(translationId, translationTable[translationId], result, interpolateParams, langKey);\n          if (result.substr(0, 2) === '@:') {\n            return getFallbackTranslationInstant(langKey, result.substr(2), interpolateParams, Interpolator);\n          }\n          Interpolator.setLocale($uses);\n        }\n\n        return result;\n      };\n\n\n      /**\n       * @name translateByHandler\n       * @private\n       *\n       * Translate by missing translation handler.\n       *\n       * @param translationId\n       * @param interpolateParams\n       * @param defaultTranslationText\n       * @returns translation created by $missingTranslationHandler or translationId is $missingTranslationHandler is\n       * absent\n       */\n      var translateByHandler = function (translationId, interpolateParams, defaultTranslationText) {\n        // If we have a handler factory - we might also call it here to determine if it provides\n        // a default text for a translationid that can't be found anywhere in our tables\n        if ($missingTranslationHandlerFactory) {\n          var resultString = $injector.get($missingTranslationHandlerFactory)(translationId, $uses, interpolateParams, defaultTranslationText);\n          if (resultString !== undefined) {\n            return resultString;\n          } else {\n            return translationId;\n          }\n        } else {\n          return translationId;\n        }\n      };\n\n      /**\n       * @name resolveForFallbackLanguage\n       * @private\n       *\n       * Recursive helper function for fallbackTranslation that will sequentially look\n       * for a translation in the fallbackLanguages starting with fallbackLanguageIndex.\n       *\n       * @param fallbackLanguageIndex\n       * @param translationId\n       * @param interpolateParams\n       * @param Interpolator\n       * @returns {Q.promise} Promise that will resolve to the translation.\n       */\n      var resolveForFallbackLanguage = function (fallbackLanguageIndex, translationId, interpolateParams, Interpolator, defaultTranslationText) {\n        var deferred = $q.defer();\n\n        if (fallbackLanguageIndex < $fallbackLanguage.length) {\n          var langKey = $fallbackLanguage[fallbackLanguageIndex];\n          getFallbackTranslation(langKey, translationId, interpolateParams, Interpolator).then(\n            function (data) {\n                deferred.resolve(data);\n            },\n            function () {\n              // Look in the next fallback language for a translation.\n              // It delays the resolving by passing another promise to resolve.\n              return resolveForFallbackLanguage(fallbackLanguageIndex + 1, translationId, interpolateParams, Interpolator, defaultTranslationText).then(deferred.resolve, deferred.reject);\n            }\n          );\n        } else {\n          // No translation found in any fallback language\n          // if a default translation text is set in the directive, then return this as a result\n          if (defaultTranslationText) {\n            deferred.resolve(defaultTranslationText);\n          } else {\n            // if no default translation is set and an error handler is defined, send it to the handler\n            // and then return the result\n            if ($missingTranslationHandlerFactory) {\n              deferred.resolve(translateByHandler(translationId, interpolateParams));\n            } else {\n              deferred.reject(translateByHandler(translationId, interpolateParams));\n            }\n\n          }\n        }\n        return deferred.promise;\n      };\n\n      /**\n       * @name resolveForFallbackLanguageInstant\n       * @private\n       *\n       * Recursive helper function for fallbackTranslation that will sequentially look\n       * for a translation in the fallbackLanguages starting with fallbackLanguageIndex.\n       *\n       * @param fallbackLanguageIndex\n       * @param translationId\n       * @param interpolateParams\n       * @param Interpolator\n       * @returns {string} translation\n       */\n      var resolveForFallbackLanguageInstant = function (fallbackLanguageIndex, translationId, interpolateParams, Interpolator) {\n        var result;\n\n        if (fallbackLanguageIndex < $fallbackLanguage.length) {\n          var langKey = $fallbackLanguage[fallbackLanguageIndex];\n          result = getFallbackTranslationInstant(langKey, translationId, interpolateParams, Interpolator);\n          if (!result) {\n            result = resolveForFallbackLanguageInstant(fallbackLanguageIndex + 1, translationId, interpolateParams, Interpolator);\n          }\n        }\n        return result;\n      };\n\n      /**\n       * Translates with the usage of the fallback languages.\n       *\n       * @param translationId\n       * @param interpolateParams\n       * @param Interpolator\n       * @returns {Q.promise} Promise, that resolves to the translation.\n       */\n      var fallbackTranslation = function (translationId, interpolateParams, Interpolator, defaultTranslationText) {\n        // Start with the fallbackLanguage with index 0\n        return resolveForFallbackLanguage((startFallbackIteration>0 ? startFallbackIteration : fallbackIndex), translationId, interpolateParams, Interpolator, defaultTranslationText);\n      };\n\n      /**\n       * Translates with the usage of the fallback languages.\n       *\n       * @param translationId\n       * @param interpolateParams\n       * @param Interpolator\n       * @returns {String} translation\n       */\n      var fallbackTranslationInstant = function (translationId, interpolateParams, Interpolator) {\n        // Start with the fallbackLanguage with index 0\n        return resolveForFallbackLanguageInstant((startFallbackIteration>0 ? startFallbackIteration : fallbackIndex), translationId, interpolateParams, Interpolator);\n      };\n\n      var determineTranslation = function (translationId, interpolateParams, interpolationId, defaultTranslationText, uses) {\n\n        var deferred = $q.defer();\n\n        var table = uses ? $translationTable[uses] : $translationTable,\n            Interpolator = (interpolationId) ? interpolatorHashMap[interpolationId] : defaultInterpolator;\n\n        // if the translation id exists, we can just interpolate it\n        if (table && Object.prototype.hasOwnProperty.call(table, translationId)) {\n          var translation = table[translationId];\n\n          // If using link, rerun $translate with linked translationId and return it\n          if (translation.substr(0, 2) === '@:') {\n\n            $translate(translation.substr(2), interpolateParams, interpolationId, defaultTranslationText, uses)\n              .then(deferred.resolve, deferred.reject);\n          } else {\n            //\n            var resolvedTranslation = Interpolator.interpolate(translation, interpolateParams, 'service');\n            resolvedTranslation = applyPostProcessing(translationId, translation, resolvedTranslation, interpolateParams, uses);\n            deferred.resolve(resolvedTranslation);\n          }\n        } else {\n          var missingTranslationHandlerTranslation;\n          // for logging purposes only (as in $translateMissingTranslationHandlerLog), value is not returned to promise\n          if ($missingTranslationHandlerFactory && !pendingLoader) {\n            missingTranslationHandlerTranslation = translateByHandler(translationId, interpolateParams, defaultTranslationText);\n          }\n\n          // since we couldn't translate the inital requested translation id,\n          // we try it now with one or more fallback languages, if fallback language(s) is\n          // configured.\n          if (uses && $fallbackLanguage && $fallbackLanguage.length) {\n            fallbackTranslation(translationId, interpolateParams, Interpolator, defaultTranslationText)\n                .then(function (translation) {\n                  deferred.resolve(translation);\n                }, function (_translationId) {\n                  deferred.reject(applyNotFoundIndicators(_translationId));\n                });\n          } else if ($missingTranslationHandlerFactory && !pendingLoader && missingTranslationHandlerTranslation) {\n            // looks like the requested translation id doesn't exists.\n            // Now, if there is a registered handler for missing translations and no\n            // asyncLoader is pending, we execute the handler\n            if (defaultTranslationText) {\n              deferred.resolve(defaultTranslationText);\n              } else {\n                deferred.resolve(missingTranslationHandlerTranslation);\n              }\n          } else {\n            if (defaultTranslationText) {\n              deferred.resolve(defaultTranslationText);\n            } else {\n              deferred.reject(applyNotFoundIndicators(translationId));\n            }\n          }\n        }\n        return deferred.promise;\n      };\n\n      var determineTranslationInstant = function (translationId, interpolateParams, interpolationId, uses) {\n\n        var result, table = uses ? $translationTable[uses] : $translationTable,\n            Interpolator = defaultInterpolator;\n\n        // if the interpolation id exists use custom interpolator\n        if (interpolatorHashMap && Object.prototype.hasOwnProperty.call(interpolatorHashMap, interpolationId)) {\n          Interpolator = interpolatorHashMap[interpolationId];\n        }\n\n        // if the translation id exists, we can just interpolate it\n        if (table && Object.prototype.hasOwnProperty.call(table, translationId)) {\n          var translation = table[translationId];\n\n          // If using link, rerun $translate with linked translationId and return it\n          if (translation.substr(0, 2) === '@:') {\n            result = determineTranslationInstant(translation.substr(2), interpolateParams, interpolationId, uses);\n          } else {\n            result = Interpolator.interpolate(translation, interpolateParams, 'filter');\n            result = applyPostProcessing(translationId, translation, result, interpolateParams, uses);\n          }\n        } else {\n          var missingTranslationHandlerTranslation;\n          // for logging purposes only (as in $translateMissingTranslationHandlerLog), value is not returned to promise\n          if ($missingTranslationHandlerFactory && !pendingLoader) {\n            missingTranslationHandlerTranslation = translateByHandler(translationId, interpolateParams);\n          }\n\n          // since we couldn't translate the inital requested translation id,\n          // we try it now with one or more fallback languages, if fallback language(s) is\n          // configured.\n          if (uses && $fallbackLanguage && $fallbackLanguage.length) {\n            fallbackIndex = 0;\n            result = fallbackTranslationInstant(translationId, interpolateParams, Interpolator);\n          } else if ($missingTranslationHandlerFactory && !pendingLoader && missingTranslationHandlerTranslation) {\n            // looks like the requested translation id doesn't exists.\n            // Now, if there is a registered handler for missing translations and no\n            // asyncLoader is pending, we execute the handler\n            result = missingTranslationHandlerTranslation;\n          } else {\n            result = applyNotFoundIndicators(translationId);\n          }\n        }\n\n        return result;\n      };\n\n      var clearNextLangAndPromise = function(key) {\n        if ($nextLang === key) {\n          $nextLang = undefined;\n        }\n        langPromises[key] = undefined;\n      };\n\n      var applyPostProcessing = function (translationId, translation, resolvedTranslation, interpolateParams, uses) {\n        var fn = postProcessFn;\n\n        if (fn) {\n\n          if (typeof(fn) === 'string') {\n            // getting on-demand instance\n            fn = $injector.get(fn);\n          }\n          if (fn) {\n            return fn(translationId, translation, resolvedTranslation, interpolateParams, uses);\n          }\n        }\n\n        return resolvedTranslation;\n      };\n\n      var loadTranslationsIfMissing = function (key) {\n        if (!$translationTable[key] && $loaderFactory && !langPromises[key]) {\n          langPromises[key] = loadAsync(key).then(function (translation) {\n            translations(translation.key, translation.table);\n            return translation;\n          });\n        }\n      };\n\n      /**\n       * @ngdoc function\n       * @name pascalprecht.translate.$translate#preferredLanguage\n       * @methodOf pascalprecht.translate.$translate\n       *\n       * @description\n       * Returns the language key for the preferred language.\n       *\n       * @param {string} langKey language String or Array to be used as preferredLanguage (changing at runtime)\n       *\n       * @return {string} preferred language key\n       */\n      $translate.preferredLanguage = function (langKey) {\n        if(langKey) {\n          setupPreferredLanguage(langKey);\n        }\n        return $preferredLanguage;\n      };\n\n      /**\n       * @ngdoc function\n       * @name pascalprecht.translate.$translate#cloakClassName\n       * @methodOf pascalprecht.translate.$translate\n       *\n       * @description\n       * Returns the configured class name for `translate-cloak` directive.\n       *\n       * @return {string} cloakClassName\n       */\n      $translate.cloakClassName = function () {\n        return $cloakClassName;\n      };\n\n      /**\n       * @ngdoc function\n       * @name pascalprecht.translate.$translate#nestedObjectDelimeter\n       * @methodOf pascalprecht.translate.$translate\n       *\n       * @description\n       * Returns the configured delimiter for nested namespaces.\n       *\n       * @return {string} nestedObjectDelimeter\n       */\n      $translate.nestedObjectDelimeter = function () {\n        return $nestedObjectDelimeter;\n      };\n\n      /**\n       * @ngdoc function\n       * @name pascalprecht.translate.$translate#fallbackLanguage\n       * @methodOf pascalprecht.translate.$translate\n       *\n       * @description\n       * Returns the language key for the fallback languages or sets a new fallback stack.\n       *\n       * @param {string=} langKey language String or Array of fallback languages to be used (to change stack at runtime)\n       *\n       * @return {string||array} fallback language key\n       */\n      $translate.fallbackLanguage = function (langKey) {\n        if (langKey !== undefined && langKey !== null) {\n          fallbackStack(langKey);\n\n          // as we might have an async loader initiated and a new translation language might have been defined\n          // we need to add the promise to the stack also. So - iterate.\n          if ($loaderFactory) {\n            if ($fallbackLanguage && $fallbackLanguage.length) {\n              for (var i = 0, len = $fallbackLanguage.length; i < len; i++) {\n                if (!langPromises[$fallbackLanguage[i]]) {\n                  langPromises[$fallbackLanguage[i]] = loadAsync($fallbackLanguage[i]);\n                }\n              }\n            }\n          }\n          $translate.use($translate.use());\n        }\n        if ($fallbackWasString) {\n          return $fallbackLanguage[0];\n        } else {\n          return $fallbackLanguage;\n        }\n\n      };\n\n      /**\n       * @ngdoc function\n       * @name pascalprecht.translate.$translate#useFallbackLanguage\n       * @methodOf pascalprecht.translate.$translate\n       *\n       * @description\n       * Sets the first key of the fallback language stack to be used for translation.\n       * Therefore all languages in the fallback array BEFORE this key will be skipped!\n       *\n       * @param {string=} langKey Contains the langKey the iteration shall start with. Set to false if you want to\n       * get back to the whole stack\n       */\n      $translate.useFallbackLanguage = function (langKey) {\n        if (langKey !== undefined && langKey !== null) {\n          if (!langKey) {\n            startFallbackIteration = 0;\n          } else {\n            var langKeyPosition = indexOf($fallbackLanguage, langKey);\n            if (langKeyPosition > -1) {\n              startFallbackIteration = langKeyPosition;\n            }\n          }\n\n        }\n\n      };\n\n      /**\n       * @ngdoc function\n       * @name pascalprecht.translate.$translate#proposedLanguage\n       * @methodOf pascalprecht.translate.$translate\n       *\n       * @description\n       * Returns the language key of language that is currently loaded asynchronously.\n       *\n       * @return {string} language key\n       */\n      $translate.proposedLanguage = function () {\n        return $nextLang;\n      };\n\n      /**\n       * @ngdoc function\n       * @name pascalprecht.translate.$translate#storage\n       * @methodOf pascalprecht.translate.$translate\n       *\n       * @description\n       * Returns registered storage.\n       *\n       * @return {object} Storage\n       */\n      $translate.storage = function () {\n        return Storage;\n      };\n\n      /**\n       * @ngdoc function\n       * @name pascalprecht.translate.$translate#negotiateLocale\n       * @methodOf pascalprecht.translate.$translate\n       *\n       * @description\n       * Returns a language key based on available languages and language aliases. If a\n       * language key cannot be resolved, returns undefined.\n       *\n       * If no or a falsy key is given, returns undefined.\n       *\n       * @param {string} [key] Language key\n       * @return {string|undefined} Language key or undefined if no language key is found.\n       */\n      $translate.negotiateLocale = negotiateLocale;\n\n      /**\n       * @ngdoc function\n       * @name pascalprecht.translate.$translate#use\n       * @methodOf pascalprecht.translate.$translate\n       *\n       * @description\n       * Tells angular-translate which language to use by given language key. This method is\n       * used to change language at runtime. It also takes care of storing the language\n       * key in a configured store to let your app remember the choosed language.\n       *\n       * When trying to 'use' a language which isn't available it tries to load it\n       * asynchronously with registered loaders.\n       *\n       * Returns promise object with loaded language file data or string of the currently used language.\n       *\n       * If no or a falsy key is given it returns the currently used language key.\n       * The returned string will be ```undefined``` if setting up $translate hasn't finished.\n       * @example\n       * $translate.use(\"en_US\").then(function(data){\n       *   $scope.text = $translate(\"HELLO\");\n       * });\n       *\n       * @param {string} [key] Language key\n       * @return {object|string} Promise with loaded language data or the language key if a falsy param was given.\n       */\n      $translate.use = function (key) {\n        if (!key) {\n          return $uses;\n        }\n\n        var deferred = $q.defer();\n\n        $rootScope.$emit('$translateChangeStart', {language: key});\n\n        // Try to get the aliased language key\n        var aliasedKey = negotiateLocale(key);\n        // Ensure only registered language keys will be loaded\n        if ($availableLanguageKeys.length > 0 && !aliasedKey) {\n          return $q.reject(key);\n        }\n\n        if (aliasedKey) {\n          key = aliasedKey;\n        }\n\n        // if there isn't a translation table for the language we've requested,\n        // we load it asynchronously\n        $nextLang = key;\n        if (($forceAsyncReloadEnabled || !$translationTable[key]) && $loaderFactory && !langPromises[key]) {\n          langPromises[key] = loadAsync(key).then(function (translation) {\n            translations(translation.key, translation.table);\n            deferred.resolve(translation.key);\n            if ($nextLang === key) {\n              useLanguage(translation.key);\n            }\n            return translation;\n          }, function (key) {\n            $rootScope.$emit('$translateChangeError', {language: key});\n            deferred.reject(key);\n            $rootScope.$emit('$translateChangeEnd', {language: key});\n            return $q.reject(key);\n          });\n          langPromises[key]['finally'](function () {\n            clearNextLangAndPromise(key);\n          });\n        } else if (langPromises[key]) {\n          // we are already loading this asynchronously\n          // resolve our new deferred when the old langPromise is resolved\n          langPromises[key].then(function (translation) {\n            if ($nextLang === translation.key) {\n              useLanguage(translation.key);\n            }\n            deferred.resolve(translation.key);\n            return translation;\n          }, function (key) {\n            // find first available fallback language if that request has failed\n            if (!$uses && $fallbackLanguage && $fallbackLanguage.length > 0 && $fallbackLanguage[0] !== key) {\n              return $translate.use($fallbackLanguage[0]).then(deferred.resolve, deferred.reject);\n            } else {\n              return deferred.reject(key);\n            }\n          });\n        } else {\n          deferred.resolve(key);\n          useLanguage(key);\n        }\n\n        return deferred.promise;\n      };\n\n      /**\n       * @ngdoc function\n       * @name pascalprecht.translate.$translate#resolveClientLocale\n       * @methodOf pascalprecht.translate.$translate\n       *\n       * @description\n       * This returns the current browser/client's language key. The result is processed with the configured uniform tag resolver.\n       *\n       * @returns {string} the current client/browser language key\n       */\n      $translate.resolveClientLocale = function () {\n        return getLocale();\n      };\n\n      /**\n       * @ngdoc function\n       * @name pascalprecht.translate.$translate#storageKey\n       * @methodOf pascalprecht.translate.$translate\n       *\n       * @description\n       * Returns the key for the storage.\n       *\n       * @return {string} storage key\n       */\n      $translate.storageKey = function () {\n        return storageKey();\n      };\n\n      /**\n       * @ngdoc function\n       * @name pascalprecht.translate.$translate#isPostCompilingEnabled\n       * @methodOf pascalprecht.translate.$translate\n       *\n       * @description\n       * Returns whether post compiling is enabled or not\n       *\n       * @return {bool} storage key\n       */\n      $translate.isPostCompilingEnabled = function () {\n        return $postCompilingEnabled;\n      };\n\n      /**\n       * @ngdoc function\n       * @name pascalprecht.translate.$translate#isForceAsyncReloadEnabled\n       * @methodOf pascalprecht.translate.$translate\n       *\n       * @description\n       * Returns whether force async reload is enabled or not\n       *\n       * @return {boolean} forceAsyncReload value\n       */\n      $translate.isForceAsyncReloadEnabled = function () {\n        return $forceAsyncReloadEnabled;\n      };\n\n      /**\n       * @ngdoc function\n       * @name pascalprecht.translate.$translate#isKeepContent\n       * @methodOf pascalprecht.translate.$translate\n       *\n       * @description\n       * Returns whether keepContent or not\n       *\n       * @return {boolean} keepContent value\n       */\n      $translate.isKeepContent = function () {\n        return $keepContent;\n      };\n\n      /**\n       * @ngdoc function\n       * @name pascalprecht.translate.$translate#refresh\n       * @methodOf pascalprecht.translate.$translate\n       *\n       * @description\n       * Refreshes a translation table pointed by the given langKey. If langKey is not specified,\n       * the module will drop all existent translation tables and load new version of those which\n       * are currently in use.\n       *\n       * Refresh means that the module will drop target translation table and try to load it again.\n       *\n       * In case there are no loaders registered the refresh() method will throw an Error.\n       *\n       * If the module is able to refresh translation tables refresh() method will broadcast\n       * $translateRefreshStart and $translateRefreshEnd events.\n       *\n       * @example\n       * // this will drop all currently existent translation tables and reload those which are\n       * // currently in use\n       * $translate.refresh();\n       * // this will refresh a translation table for the en_US language\n       * $translate.refresh('en_US');\n       *\n       * @param {string} langKey A language key of the table, which has to be refreshed\n       *\n       * @return {promise} Promise, which will be resolved in case a translation tables refreshing\n       * process is finished successfully, and reject if not.\n       */\n      $translate.refresh = function (langKey) {\n        if (!$loaderFactory) {\n          throw new Error('Couldn\\'t refresh translation table, no loader registered!');\n        }\n\n        var deferred = $q.defer();\n\n        function resolve() {\n          deferred.resolve();\n          $rootScope.$emit('$translateRefreshEnd', {language: langKey});\n        }\n\n        function reject() {\n          deferred.reject();\n          $rootScope.$emit('$translateRefreshEnd', {language: langKey});\n        }\n\n        $rootScope.$emit('$translateRefreshStart', {language: langKey});\n\n        if (!langKey) {\n          // if there's no language key specified we refresh ALL THE THINGS!\n          var tables = [], loadingKeys = {};\n\n          // reload registered fallback languages\n          if ($fallbackLanguage && $fallbackLanguage.length) {\n            for (var i = 0, len = $fallbackLanguage.length; i < len; i++) {\n              tables.push(loadAsync($fallbackLanguage[i]));\n              loadingKeys[$fallbackLanguage[i]] = true;\n            }\n          }\n\n          // reload currently used language\n          if ($uses && !loadingKeys[$uses]) {\n            tables.push(loadAsync($uses));\n          }\n\n          var allTranslationsLoaded = function (tableData) {\n            $translationTable = {};\n            angular.forEach(tableData, function (data) {\n              translations(data.key, data.table);\n            });\n            if ($uses) {\n              useLanguage($uses);\n            }\n            resolve();\n          };\n          allTranslationsLoaded.displayName = 'refreshPostProcessor';\n\n          $q.all(tables).then(allTranslationsLoaded, reject);\n\n        } else if ($translationTable[langKey]) {\n\n          var oneTranslationsLoaded = function (data) {\n            translations(data.key, data.table);\n            if (langKey === $uses) {\n              useLanguage($uses);\n            }\n            resolve();\n            return data;\n          };\n          oneTranslationsLoaded.displayName = 'refreshPostProcessor';\n\n          loadAsync(langKey).then(oneTranslationsLoaded, reject);\n\n        } else {\n          reject();\n        }\n        return deferred.promise;\n      };\n\n      /**\n       * @ngdoc function\n       * @name pascalprecht.translate.$translate#instant\n       * @methodOf pascalprecht.translate.$translate\n       *\n       * @description\n       * Returns a translation instantly from the internal state of loaded translation. All rules\n       * regarding the current language, the preferred language of even fallback languages will be\n       * used except any promise handling. If a language was not found, an asynchronous loading\n       * will be invoked in the background.\n       *\n       * @param {string|array} translationId A token which represents a translation id\n       *                                     This can be optionally an array of translation ids which\n       *                                     results that the function's promise returns an object where\n       *                                     each key is the translation id and the value the translation.\n       * @param {object} interpolateParams Params\n       * @param {string} interpolationId The id of the interpolation to use\n       * @param {string} forceLanguage A language to be used instead of the current language\n       *\n       * @return {string|object} translation\n       */\n      $translate.instant = function (translationId, interpolateParams, interpolationId, forceLanguage) {\n\n        // we don't want to re-negotiate $uses\n        var uses = (forceLanguage && forceLanguage !== $uses) ? // we don't want to re-negotiate $uses\n              (negotiateLocale(forceLanguage) || forceLanguage) : $uses;\n\n        // Detect undefined and null values to shorten the execution and prevent exceptions\n        if (translationId === null || angular.isUndefined(translationId)) {\n          return translationId;\n        }\n\n        // Check forceLanguage is present\n        if (forceLanguage) {\n          loadTranslationsIfMissing(forceLanguage);\n        }\n\n        // Duck detection: If the first argument is an array, a bunch of translations was requested.\n        // The result is an object.\n        if (angular.isArray(translationId)) {\n          var results = {};\n          for (var i = 0, c = translationId.length; i < c; i++) {\n            results[translationId[i]] = $translate.instant(translationId[i], interpolateParams, interpolationId, forceLanguage);\n          }\n          return results;\n        }\n\n        // We discarded unacceptable values. So we just need to verify if translationId is empty String\n        if (angular.isString(translationId) && translationId.length < 1) {\n          return translationId;\n        }\n\n        // trim off any whitespace\n        if (translationId) {\n          translationId = trim.apply(translationId);\n        }\n\n        var result, possibleLangKeys = [];\n        if ($preferredLanguage) {\n          possibleLangKeys.push($preferredLanguage);\n        }\n        if (uses) {\n          possibleLangKeys.push(uses);\n        }\n        if ($fallbackLanguage && $fallbackLanguage.length) {\n          possibleLangKeys = possibleLangKeys.concat($fallbackLanguage);\n        }\n        for (var j = 0, d = possibleLangKeys.length; j < d; j++) {\n          var possibleLangKey = possibleLangKeys[j];\n          if ($translationTable[possibleLangKey]) {\n            if (typeof $translationTable[possibleLangKey][translationId] !== 'undefined') {\n              result = determineTranslationInstant(translationId, interpolateParams, interpolationId, uses);\n            }\n          }\n          if (typeof result !== 'undefined') {\n            break;\n          }\n        }\n\n        if (!result && result !== '') {\n          if ($notFoundIndicatorLeft || $notFoundIndicatorRight) {\n            result = applyNotFoundIndicators(translationId);\n          } else {\n            // Return translation of default interpolator if not found anything.\n            result = defaultInterpolator.interpolate(translationId, interpolateParams, 'filter');\n            if ($missingTranslationHandlerFactory && !pendingLoader) {\n              result = translateByHandler(translationId, interpolateParams);\n            }\n          }\n        }\n\n        return result;\n      };\n\n      /**\n       * @ngdoc function\n       * @name pascalprecht.translate.$translate#versionInfo\n       * @methodOf pascalprecht.translate.$translate\n       *\n       * @description\n       * Returns the current version information for the angular-translate library\n       *\n       * @return {string} angular-translate version\n       */\n      $translate.versionInfo = function () {\n        return version;\n      };\n\n      /**\n       * @ngdoc function\n       * @name pascalprecht.translate.$translate#loaderCache\n       * @methodOf pascalprecht.translate.$translate\n       *\n       * @description\n       * Returns the defined loaderCache.\n       *\n       * @return {boolean|string|object} current value of loaderCache\n       */\n      $translate.loaderCache = function () {\n        return loaderCache;\n      };\n\n      // internal purpose only\n      $translate.directivePriority = function () {\n        return directivePriority;\n      };\n\n      // internal purpose only\n      $translate.statefulFilter = function () {\n        return statefulFilter;\n      };\n\n      /**\n       * @ngdoc function\n       * @name pascalprecht.translate.$translate#isReady\n       * @methodOf pascalprecht.translate.$translate\n       *\n       * @description\n       * Returns whether the service is \"ready\" to translate (i.e. loading 1st language).\n       *\n       * See also {@link pascalprecht.translate.$translate#methods_onReady onReady()}.\n       *\n       * @return {boolean} current value of ready\n       */\n      $translate.isReady = function () {\n        return $isReady;\n      };\n\n      var $onReadyDeferred = $q.defer();\n      $onReadyDeferred.promise.then(function () {\n        $isReady = true;\n      });\n\n      /**\n       * @ngdoc function\n       * @name pascalprecht.translate.$translate#onReady\n       * @methodOf pascalprecht.translate.$translate\n       *\n       * @description\n       * Returns whether the service is \"ready\" to translate (i.e. loading 1st language).\n       *\n       * See also {@link pascalprecht.translate.$translate#methods_isReady isReady()}.\n       *\n       * @param {Function=} fn Function to invoke when service is ready\n       * @return {object} Promise resolved when service is ready\n       */\n      $translate.onReady = function (fn) {\n        var deferred = $q.defer();\n        if (angular.isFunction(fn)) {\n          deferred.promise.then(fn);\n        }\n        if ($isReady) {\n          deferred.resolve();\n        } else {\n          $onReadyDeferred.promise.then(deferred.resolve);\n        }\n        return deferred.promise;\n      };\n\n      /**\n       * @ngdoc function\n       * @name pascalprecht.translate.$translate#getAvailableLanguageKeys\n       * @methodOf pascalprecht.translate.$translate\n       *\n       * @description\n       * This function simply returns the registered language keys being defined before in the config phase\n       * With this, an application can use the array to provide a language selection dropdown or similar\n       * without any additional effort\n       *\n       * @returns {object} returns the list of possibly registered language keys and mapping or null if not defined\n       */\n      $translate.getAvailableLanguageKeys = function () {\n        if ($availableLanguageKeys.length > 0) {\n          return $availableLanguageKeys;\n        }\n        return null;\n      };\n\n      // Whenever $translateReady is being fired, this will ensure the state of $isReady\n      var globalOnReadyListener = $rootScope.$on('$translateReady', function () {\n        $onReadyDeferred.resolve();\n        globalOnReadyListener(); // one time only\n        globalOnReadyListener = null;\n      });\n      var globalOnChangeListener = $rootScope.$on('$translateChangeEnd', function () {\n        $onReadyDeferred.resolve();\n        globalOnChangeListener(); // one time only\n        globalOnChangeListener = null;\n      });\n\n      if ($loaderFactory) {\n\n        // If at least one async loader is defined and there are no\n        // (default) translations available we should try to load them.\n        if (angular.equals($translationTable, {})) {\n          if ($translate.use()) {\n            $translate.use($translate.use());\n          }\n        }\n\n        // Also, if there are any fallback language registered, we start\n        // loading them asynchronously as soon as we can.\n        if ($fallbackLanguage && $fallbackLanguage.length) {\n          var processAsyncResult = function (translation) {\n            translations(translation.key, translation.table);\n            $rootScope.$emit('$translateChangeEnd', { language: translation.key });\n            return translation;\n          };\n          for (var i = 0, len = $fallbackLanguage.length; i < len; i++) {\n            var fallbackLanguageId = $fallbackLanguage[i];\n            if ($forceAsyncReloadEnabled || !$translationTable[fallbackLanguageId]) {\n              langPromises[fallbackLanguageId] = loadAsync(fallbackLanguageId).then(processAsyncResult);\n            }\n          }\n        }\n      } else {\n        $rootScope.$emit('$translateReady', { language: $translate.use() });\n      }\n\n      return $translate;\n    }\n  ];\n}\n\n$translate.displayName = 'displayName';\n\n/**\n * @ngdoc object\n * @name pascalprecht.translate.$translateDefaultInterpolation\n * @requires $interpolate\n *\n * @description\n * Uses angular's `$interpolate` services to interpolate strings against some values.\n *\n * Be aware to configure a proper sanitization strategy.\n *\n * See also:\n * * {@link pascalprecht.translate.$translateSanitization}\n *\n * @return {object} $translateDefaultInterpolation Interpolator service\n */\nangular.module('pascalprecht.translate').factory('$translateDefaultInterpolation', $translateDefaultInterpolation);\n\nfunction $translateDefaultInterpolation ($interpolate, $translateSanitization) {\n\n  'use strict';\n\n  var $translateInterpolator = {},\n      $locale,\n      $identifier = 'default';\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateDefaultInterpolation#setLocale\n   * @methodOf pascalprecht.translate.$translateDefaultInterpolation\n   *\n   * @description\n   * Sets current locale (this is currently not use in this interpolation).\n   *\n   * @param {string} locale Language key or locale.\n   */\n  $translateInterpolator.setLocale = function (locale) {\n    $locale = locale;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateDefaultInterpolation#getInterpolationIdentifier\n   * @methodOf pascalprecht.translate.$translateDefaultInterpolation\n   *\n   * @description\n   * Returns an identifier for this interpolation service.\n   *\n   * @returns {string} $identifier\n   */\n  $translateInterpolator.getInterpolationIdentifier = function () {\n    return $identifier;\n  };\n\n  /**\n   * @deprecated will be removed in 3.0\n   * @see {@link pascalprecht.translate.$translateSanitization}\n   */\n  $translateInterpolator.useSanitizeValueStrategy = function (value) {\n    $translateSanitization.useStrategy(value);\n    return this;\n  };\n\n  /**\n   * @ngdoc function\n   * @name pascalprecht.translate.$translateDefaultInterpolation#interpolate\n   * @methodOf pascalprecht.translate.$translateDefaultInterpolation\n   *\n   * @description\n   * Interpolates given value agains given interpolate params using angulars\n   * `$interpolate` service.\n   *\n   * Since AngularJS 1.5, `value` must not be a string but can be anything input.\n   *\n   * @returns {string} interpolated string.\n   */\n  $translateInterpolator.interpolate = function (value, interpolationParams, context) {\n    interpolationParams = interpolationParams || {};\n    interpolationParams = $translateSanitization.sanitize(interpolationParams, 'params', undefined, context);\n\n    var interpolatedText;\n    if (angular.isNumber(value)) {\n      // numbers are safe\n      interpolatedText = '' + value;\n    } else if (angular.isString(value)) {\n      // strings must be interpolated (that's the job here)\n      interpolatedText = $interpolate(value)(interpolationParams);\n      interpolatedText = $translateSanitization.sanitize(interpolatedText, 'text', undefined, context);\n    } else {\n      // neither a number or a string, cant interpolate => empty string\n      interpolatedText = '';\n    }\n\n    return interpolatedText;\n  };\n\n  return $translateInterpolator;\n}\n\n$translateDefaultInterpolation.displayName = '$translateDefaultInterpolation';\n\nangular.module('pascalprecht.translate').constant('$STORAGE_KEY', 'NG_TRANSLATE_LANG_KEY');\n\nangular.module('pascalprecht.translate')\n/**\n * @ngdoc directive\n * @name pascalprecht.translate.directive:translate\n * @requires $interpolate, \n * @requires $compile, \n * @requires $parse, \n * @requires $rootScope\n * @restrict AE\n *\n * @description\n * Translates given translation id either through attribute or DOM content.\n * Internally it uses $translate service to translate the translation id. It possible to\n * pass an optional `translate-values` object literal as string into translation id.\n *\n * @param {string=} translate Translation id which could be either string or interpolated string.\n * @param {string=} translate-values Values to pass into translation id. Can be passed as object literal string or interpolated object.\n * @param {string=} translate-attr-ATTR translate Translation id and put it into ATTR attribute.\n * @param {string=} translate-default will be used unless translation was successful\n * @param {boolean=} translate-compile (default true if present) defines locally activation of {@link pascalprecht.translate.$translateProvider#methods_usePostCompiling}\n * @param {boolean=} translate-keep-content (default true if present) defines that in case a KEY could not be translated, that the existing content is left in the innerHTML}\n *\n * @example\n   <example module=\"ngView\">\n    <file name=\"index.html\">\n      <div ng-controller=\"TranslateCtrl\">\n\n        <pre translate=\"TRANSLATION_ID\"></pre>\n        <pre translate>TRANSLATION_ID</pre>\n        <pre translate translate-attr-title=\"TRANSLATION_ID\"></pre>\n        <pre translate=\"{{translationId}}\"></pre>\n        <pre translate>{{translationId}}</pre>\n        <pre translate=\"WITH_VALUES\" translate-values=\"{value: 5}\"></pre>\n        <pre translate translate-values=\"{value: 5}\">WITH_VALUES</pre>\n        <pre translate=\"WITH_VALUES\" translate-values=\"{{values}}\"></pre>\n        <pre translate translate-values=\"{{values}}\">WITH_VALUES</pre>\n        <pre translate translate-attr-title=\"WITH_VALUES\" translate-values=\"{{values}}\"></pre>\n        <pre translate=\"WITH_CAMEL_CASE_KEY\" translate-value-camel-case-key=\"Hi\"></pre>\n\n      </div>\n    </file>\n    <file name=\"script.js\">\n      angular.module('ngView', ['pascalprecht.translate'])\n\n      .config(function ($translateProvider) {\n\n        $translateProvider.translations('en',{\n          'TRANSLATION_ID': 'Hello there!',\n          'WITH_VALUES': 'The following value is dynamic: {{value}}',\n          'WITH_CAMEL_CASE_KEY': 'The interpolation key is camel cased: {{camelCaseKey}}'\n        }).preferredLanguage('en');\n\n      });\n\n      angular.module('ngView').controller('TranslateCtrl', function ($scope) {\n        $scope.translationId = 'TRANSLATION_ID';\n\n        $scope.values = {\n          value: 78\n        };\n      });\n    </file>\n    <file name=\"scenario.js\">\n      it('should translate', function () {\n        inject(function ($rootScope, $compile) {\n          $rootScope.translationId = 'TRANSLATION_ID';\n\n          element = $compile('<p translate=\"TRANSLATION_ID\"></p>')($rootScope);\n          $rootScope.$digest();\n          expect(element.text()).toBe('Hello there!');\n\n          element = $compile('<p translate=\"{{translationId}}\"></p>')($rootScope);\n          $rootScope.$digest();\n          expect(element.text()).toBe('Hello there!');\n\n          element = $compile('<p translate>TRANSLATION_ID</p>')($rootScope);\n          $rootScope.$digest();\n          expect(element.text()).toBe('Hello there!');\n\n          element = $compile('<p translate>{{translationId}}</p>')($rootScope);\n          $rootScope.$digest();\n          expect(element.text()).toBe('Hello there!');\n\n          element = $compile('<p translate translate-attr-title=\"TRANSLATION_ID\"></p>')($rootScope);\n          $rootScope.$digest();\n          expect(element.attr('title')).toBe('Hello there!');\n\n          element = $compile('<p translate=\"WITH_CAMEL_CASE_KEY\" translate-value-camel-case-key=\"Hello\"></p>')($rootScope);\n          $rootScope.$digest();\n          expect(element.text()).toBe('The interpolation key is camel cased: Hello');\n        });\n      });\n    </file>\n   </example>\n */\n.directive('translate', translateDirective);\nfunction translateDirective($translate, $interpolate, $compile, $parse, $rootScope) {\n\n  'use strict';\n\n  /**\n   * @name trim\n   * @private\n   *\n   * @description\n   * trim polyfill\n   *\n   * @returns {string} The string stripped of whitespace from both ends\n   */\n  var trim = function() {\n    return this.toString().replace(/^\\s+|\\s+$/g, '');\n  };\n\n  return {\n    restrict: 'AE',\n    scope: true,\n    priority: $translate.directivePriority(),\n    compile: function (tElement, tAttr) {\n\n      var translateValuesExist = (tAttr.translateValues) ?\n        tAttr.translateValues : undefined;\n\n      var translateInterpolation = (tAttr.translateInterpolation) ?\n        tAttr.translateInterpolation : undefined;\n\n      var translateValueExist = tElement[0].outerHTML.match(/translate-value-+/i);\n\n      var interpolateRegExp = '^(.*)(' + $interpolate.startSymbol() + '.*' + $interpolate.endSymbol() + ')(.*)',\n          watcherRegExp = '^(.*)' + $interpolate.startSymbol() + '(.*)' + $interpolate.endSymbol() + '(.*)';\n\n      return function linkFn(scope, iElement, iAttr) {\n\n        scope.interpolateParams = {};\n        scope.preText = '';\n        scope.postText = '';\n        scope.translateNamespace = getTranslateNamespace(scope);\n        var translationIds = {};\n\n        var initInterpolationParams = function (interpolateParams, iAttr, tAttr) {\n          // initial setup\n          if (iAttr.translateValues) {\n            angular.extend(interpolateParams, $parse(iAttr.translateValues)(scope.$parent));\n          }\n          // initially fetch all attributes if existing and fill the params\n          if (translateValueExist) {\n            for (var attr in tAttr) {\n              if (Object.prototype.hasOwnProperty.call(iAttr, attr) && attr.substr(0, 14) === 'translateValue' && attr !== 'translateValues') {\n                var attributeName = angular.lowercase(attr.substr(14, 1)) + attr.substr(15);\n                interpolateParams[attributeName] = tAttr[attr];\n              }\n            }\n          }\n        };\n\n        // Ensures any change of the attribute \"translate\" containing the id will\n        // be re-stored to the scope's \"translationId\".\n        // If the attribute has no content, the element's text value (white spaces trimmed off) will be used.\n        var observeElementTranslation = function (translationId) {\n\n          // Remove any old watcher\n          if (angular.isFunction(observeElementTranslation._unwatchOld)) {\n            observeElementTranslation._unwatchOld();\n            observeElementTranslation._unwatchOld = undefined;\n          }\n\n          if (angular.equals(translationId , '') || !angular.isDefined(translationId)) {\n            var iElementText = trim.apply(iElement.text());\n\n            // Resolve translation id by inner html if required\n            var interpolateMatches = iElementText.match(interpolateRegExp);\n            // Interpolate translation id if required\n            if (angular.isArray(interpolateMatches)) {\n              scope.preText = interpolateMatches[1];\n              scope.postText = interpolateMatches[3];\n              translationIds.translate = $interpolate(interpolateMatches[2])(scope.$parent);\n              var watcherMatches = iElementText.match(watcherRegExp);\n              if (angular.isArray(watcherMatches) && watcherMatches[2] && watcherMatches[2].length) {\n                observeElementTranslation._unwatchOld = scope.$watch(watcherMatches[2], function (newValue) {\n                  translationIds.translate = newValue;\n                  updateTranslations();\n                });\n              }\n            } else {\n              // do not assigne the translation id if it is empty.\n              translationIds.translate = !iElementText ? undefined : iElementText;\n            }\n          } else {\n            translationIds.translate = translationId;\n          }\n          updateTranslations();\n        };\n\n        var observeAttributeTranslation = function (translateAttr) {\n          iAttr.$observe(translateAttr, function (translationId) {\n            translationIds[translateAttr] = translationId;\n            updateTranslations();\n          });\n        };\n\n        // initial setup with values\n        initInterpolationParams(scope.interpolateParams, iAttr, tAttr);\n\n        var firstAttributeChangedEvent = true;\n        iAttr.$observe('translate', function (translationId) {\n          if (typeof translationId === 'undefined') {\n            // case of element \"<translate>xyz</translate>\"\n            observeElementTranslation('');\n          } else {\n            // case of regular attribute\n            if (translationId !== '' || !firstAttributeChangedEvent) {\n              translationIds.translate = translationId;\n              updateTranslations();\n            }\n          }\n          firstAttributeChangedEvent = false;\n        });\n\n        for (var translateAttr in iAttr) {\n          if (iAttr.hasOwnProperty(translateAttr) && translateAttr.substr(0, 13) === 'translateAttr' && translateAttr.length > 13) {\n            observeAttributeTranslation(translateAttr);\n          }\n        }\n\n        iAttr.$observe('translateDefault', function (value) {\n          scope.defaultText = value;\n          updateTranslations();\n        });\n\n        if (translateValuesExist) {\n          iAttr.$observe('translateValues', function (interpolateParams) {\n            if (interpolateParams) {\n              scope.$parent.$watch(function () {\n                angular.extend(scope.interpolateParams, $parse(interpolateParams)(scope.$parent));\n              });\n            }\n          });\n        }\n\n        if (translateValueExist) {\n          var observeValueAttribute = function (attrName) {\n            iAttr.$observe(attrName, function (value) {\n              var attributeName = angular.lowercase(attrName.substr(14, 1)) + attrName.substr(15);\n              scope.interpolateParams[attributeName] = value;\n            });\n          };\n          for (var attr in iAttr) {\n            if (Object.prototype.hasOwnProperty.call(iAttr, attr) && attr.substr(0, 14) === 'translateValue' && attr !== 'translateValues') {\n              observeValueAttribute(attr);\n            }\n          }\n        }\n\n        // Master update function\n        var updateTranslations = function () {\n          for (var key in translationIds) {\n            if (translationIds.hasOwnProperty(key) && translationIds[key] !== undefined) {\n              updateTranslation(key, translationIds[key], scope, scope.interpolateParams, scope.defaultText, scope.translateNamespace);\n            }\n          }\n        };\n\n        // Put translation processing function outside loop\n        var updateTranslation = function(translateAttr, translationId, scope, interpolateParams, defaultTranslationText, translateNamespace) {\n          if (translationId) {\n            // if translation id starts with '.' and translateNamespace given, prepend namespace\n            if (translateNamespace && translationId.charAt(0) === '.') {\n              translationId = translateNamespace + translationId;\n            }\n\n            $translate(translationId, interpolateParams, translateInterpolation, defaultTranslationText, scope.translateLanguage)\n              .then(function (translation) {\n                applyTranslation(translation, scope, true, translateAttr);\n              }, function (translationId) {\n                applyTranslation(translationId, scope, false, translateAttr);\n              });\n          } else {\n            // as an empty string cannot be translated, we can solve this using successful=false\n            applyTranslation(translationId, scope, false, translateAttr);\n          }\n        };\n\n        var applyTranslation = function (value, scope, successful, translateAttr) {\n          if (!successful) {\n            if (typeof scope.defaultText !== 'undefined') {\n              value = scope.defaultText;\n            }\n          }\n          if (translateAttr === 'translate') {\n            // default translate into innerHTML\n            if (successful || (!successful && !$translate.isKeepContent() && typeof iAttr.translateKeepContent === 'undefined')) {\n              iElement.empty().append(scope.preText + value + scope.postText);\n            }\n            var globallyEnabled = $translate.isPostCompilingEnabled();\n            var locallyDefined = typeof tAttr.translateCompile !== 'undefined';\n            var locallyEnabled = locallyDefined && tAttr.translateCompile !== 'false';\n            if ((globallyEnabled && !locallyDefined) || locallyEnabled) {\n              $compile(iElement.contents())(scope);\n            }\n          } else {\n            // translate attribute\n            var attributeName = iAttr.$attr[translateAttr];\n            if (attributeName.substr(0, 5) === 'data-') {\n              // ensure html5 data prefix is stripped\n              attributeName = attributeName.substr(5);\n            }\n            attributeName = attributeName.substr(15);\n            iElement.attr(attributeName, value);\n          }\n        };\n\n        if (translateValuesExist || translateValueExist || iAttr.translateDefault) {\n          scope.$watch('interpolateParams', updateTranslations, true);\n        }\n\n        // Replaced watcher on translateLanguage with event listener\n        scope.$on('translateLanguageChanged', updateTranslations);\n\n        // Ensures the text will be refreshed after the current language was changed\n        // w/ $translate.use(...)\n        var unbind = $rootScope.$on('$translateChangeSuccess', updateTranslations);\n\n        // ensure translation will be looked up at least one\n        if (iElement.text().length) {\n          if (iAttr.translate) {\n            observeElementTranslation(iAttr.translate);\n          } else {\n            observeElementTranslation('');\n          }\n        } else if (iAttr.translate) {\n          // ensure attribute will be not skipped\n          observeElementTranslation(iAttr.translate);\n        }\n        updateTranslations();\n        scope.$on('$destroy', unbind);\n      };\n    }\n  };\n}\n\n/**\n * Returns the scope's namespace.\n * @private\n * @param scope\n * @returns {string}\n */\nfunction getTranslateNamespace(scope) {\n  'use strict';\n  if (scope.translateNamespace) {\n    return scope.translateNamespace;\n  }\n  if (scope.$parent) {\n    return getTranslateNamespace(scope.$parent);\n  }\n}\n\ntranslateDirective.displayName = 'translateDirective';\n\nangular.module('pascalprecht.translate')\n/**\n * @ngdoc directive\n * @name pascalprecht.translate.directive:translate-attr\n * @restrict A\n *\n * @description\n * Translates attributes like translate-attr-ATTR, but with an object like ng-class.\n * Internally it uses `translate` service to translate translation id. It possible to\n * pass an optional `translate-values` object literal as string into translation id.\n *\n * @param {string=} translate-attr Object literal mapping attributes to translation ids.\n * @param {string=} translate-values Values to pass into the translation ids. Can be passed as object literal string.\n *\n * @example\n   <example module=\"ngView\">\n    <file name=\"index.html\">\n      <div ng-controller=\"TranslateCtrl\">\n\n        <input translate-attr=\"{ placeholder: translationId, title: 'WITH_VALUES' }\" translate-values=\"{value: 5}\" />\n\n      </div>\n    </file>\n    <file name=\"script.js\">\n      angular.module('ngView', ['pascalprecht.translate'])\n\n      .config(function ($translateProvider) {\n\n        $translateProvider.translations('en',{\n          'TRANSLATION_ID': 'Hello there!',\n          'WITH_VALUES': 'The following value is dynamic: {{value}}',\n        }).preferredLanguage('en');\n\n      });\n\n      angular.module('ngView').controller('TranslateCtrl', function ($scope) {\n        $scope.translationId = 'TRANSLATION_ID';\n\n        $scope.values = {\n          value: 78\n        };\n      });\n    </file>\n    <file name=\"scenario.js\">\n      it('should translate', function () {\n        inject(function ($rootScope, $compile) {\n          $rootScope.translationId = 'TRANSLATION_ID';\n\n          element = $compile('<input translate-attr=\"{ placeholder: translationId, title: 'WITH_VALUES' }\" translate-values=\"{ value: 5 }\" />')($rootScope);\n          $rootScope.$digest();\n          expect(element.attr('placeholder)).toBe('Hello there!');\n          expect(element.attr('title)).toBe('The following value is dynamic: 5');\n        });\n      });\n    </file>\n   </example>\n */\n.directive('translateAttr', translateAttrDirective);\nfunction translateAttrDirective($translate, $rootScope) {\n\n  'use strict';\n\n  return {\n    restrict: 'A',\n    priority: $translate.directivePriority(),\n    link: function linkFn(scope, element, attr) {\n\n      var translateAttr,\n          translateValues,\n          previousAttributes = {};\n\n      // Main update translations function\n      var updateTranslations = function () {\n        angular.forEach(translateAttr, function (translationId, attributeName) {\n          if (!translationId) {\n            return;\n          }\n          previousAttributes[attributeName] = true;\n\n          // if translation id starts with '.' and translateNamespace given, prepend namespace\n          if (scope.translateNamespace && translationId.charAt(0) === '.') {\n            translationId = scope.translateNamespace + translationId;\n          }\n          $translate(translationId, translateValues, attr.translateInterpolation, undefined, scope.translateLanguage)\n            .then(function (translation) {\n              element.attr(attributeName, translation);\n            }, function (translationId) {\n              element.attr(attributeName, translationId);\n            });\n        });\n\n        // Removing unused attributes that were previously used\n        angular.forEach(previousAttributes, function (flag, attributeName) {\n          if (!translateAttr[attributeName]) {\n            element.removeAttr(attributeName);\n            delete previousAttributes[attributeName];\n          }\n        });\n      };\n\n      // Watch for attribute changes\n      watchAttribute(\n        scope,\n        attr.translateAttr,\n        function (newValue) { translateAttr = newValue; },\n        updateTranslations\n      );\n      // Watch for value changes\n      watchAttribute(\n        scope,\n        attr.translateValues,\n        function (newValue) { translateValues = newValue; },\n        updateTranslations\n      );\n\n      if (attr.translateValues) {\n        scope.$watch(attr.translateValues, updateTranslations, true);\n      }\n\n      // Replaced watcher on translateLanguage with event listener\n      scope.$on('translateLanguageChanged', updateTranslations);\n\n      // Ensures the text will be refreshed after the current language was changed\n      // w/ $translate.use(...)\n      var unbind = $rootScope.$on('$translateChangeSuccess', updateTranslations);\n\n      updateTranslations();\n      scope.$on('$destroy', unbind);\n    }\n  };\n}\n\nfunction watchAttribute(scope, attribute, valueCallback, changeCallback) {\n  'use strict';\n  if (!attribute) {\n    return;\n  }\n  if (attribute.substr(0, 2) === '::') {\n    attribute = attribute.substr(2);\n  } else {\n    scope.$watch(attribute, function(newValue) {\n      valueCallback(newValue);\n      changeCallback();\n    }, true);\n  }\n  valueCallback(scope.$eval(attribute));\n}\n\ntranslateAttrDirective.displayName = 'translateAttrDirective';\n\nangular.module('pascalprecht.translate')\n/**\n * @ngdoc directive\n * @name pascalprecht.translate.directive:translateCloak\n * @requires $rootScope\n * @requires $translate\n * @restrict A\n *\n * $description\n * Adds a `translate-cloak` class name to the given element where this directive\n * is applied initially and removes it, once a loader has finished loading.\n *\n * This directive can be used to prevent initial flickering when loading translation\n * data asynchronously.\n *\n * The class name is defined in\n * {@link pascalprecht.translate.$translateProvider#cloakClassName $translate.cloakClassName()}.\n *\n * @param {string=} translate-cloak If a translationId is provided, it will be used for showing\n *                                  or hiding the cloak. Basically it relies on the translation\n *                                  resolve.\n */\n.directive('translateCloak', translateCloakDirective);\n\nfunction translateCloakDirective($translate, $rootScope) {\n\n  'use strict';\n\n  return {\n    compile: function (tElement) {\n      var applyCloak = function () {\n        tElement.addClass($translate.cloakClassName());\n      },\n      removeCloak = function () {\n        tElement.removeClass($translate.cloakClassName());\n      };\n      $translate.onReady(function () {\n        removeCloak();\n      });\n      applyCloak();\n\n      return function linkFn(scope, iElement, iAttr) {\n        if (iAttr.translateCloak && iAttr.translateCloak.length) {\n          // Register a watcher for the defined translation allowing a fine tuned cloak\n          iAttr.$observe('translateCloak', function (translationId) {\n            $translate(translationId).then(removeCloak, applyCloak);\n          });\n          // Register for change events as this is being another indicicator revalidating the cloak)\n          $rootScope.$on('$translateChangeSuccess', function () {\n            $translate(iAttr.translateCloak).then(removeCloak, applyCloak);\n          });\n        }\n      };\n    }\n  };\n}\n\ntranslateCloakDirective.displayName = 'translateCloakDirective';\n\nangular.module('pascalprecht.translate')\n/**\n * @ngdoc directive\n * @name pascalprecht.translate.directive:translateNamespace\n * @restrict A\n *\n * @description\n * Translates given translation id either through attribute or DOM content.\n * Internally it uses `translate` filter to translate translation id. It possible to\n * pass an optional `translate-values` object literal as string into translation id.\n *\n * @param {string=} translate namespace name which could be either string or interpolated string.\n *\n * @example\n   <example module=\"ngView\">\n    <file name=\"index.html\">\n      <div translate-namespace=\"CONTENT\">\n\n        <div>\n            <h1 translate>.HEADERS.TITLE</h1>\n            <h1 translate>.HEADERS.WELCOME</h1>\n        </div>\n\n        <div translate-namespace=\".HEADERS\">\n            <h1 translate>.TITLE</h1>\n            <h1 translate>.WELCOME</h1>\n        </div>\n\n      </div>\n    </file>\n    <file name=\"script.js\">\n      angular.module('ngView', ['pascalprecht.translate'])\n\n      .config(function ($translateProvider) {\n\n        $translateProvider.translations('en',{\n          'TRANSLATION_ID': 'Hello there!',\n          'CONTENT': {\n            'HEADERS': {\n                TITLE: 'Title'\n            }\n          },\n          'CONTENT.HEADERS.WELCOME': 'Welcome'\n        }).preferredLanguage('en');\n\n      });\n\n    </file>\n   </example>\n */\n.directive('translateNamespace', translateNamespaceDirective);\n\nfunction translateNamespaceDirective() {\n\n  'use strict';\n\n  return {\n    restrict: 'A',\n    scope: true,\n    compile: function () {\n      return {\n        pre: function (scope, iElement, iAttrs) {\n          scope.translateNamespace = getTranslateNamespace(scope);\n\n          if (scope.translateNamespace && iAttrs.translateNamespace.charAt(0) === '.') {\n            scope.translateNamespace += iAttrs.translateNamespace;\n          } else {\n            scope.translateNamespace = iAttrs.translateNamespace;\n          }\n        }\n      };\n    }\n  };\n}\n\n/**\n * Returns the scope's namespace.\n * @private\n * @param scope\n * @returns {string}\n */\nfunction getTranslateNamespace(scope) {\n  'use strict';\n  if (scope.translateNamespace) {\n    return scope.translateNamespace;\n  }\n  if (scope.$parent) {\n    return getTranslateNamespace(scope.$parent);\n  }\n}\n\ntranslateNamespaceDirective.displayName = 'translateNamespaceDirective';\n\nangular.module('pascalprecht.translate')\n/**\n * @ngdoc directive\n * @name pascalprecht.translate.directive:translateLanguage\n * @restrict A\n *\n * @description\n * Forces the language to the directives in the underlying scope.\n *\n * @param {string=} translate language that will be negotiated.\n *\n * @example\n   <example module=\"ngView\">\n    <file name=\"index.html\">\n      <div>\n\n        <div>\n            <h1 translate>HELLO</h1>\n        </div>\n\n        <div translate-language=\"de\">\n            <h1 translate>HELLO</h1>\n        </div>\n\n      </div>\n    </file>\n    <file name=\"script.js\">\n      angular.module('ngView', ['pascalprecht.translate'])\n\n      .config(function ($translateProvider) {\n\n        $translateProvider\n          .translations('en',{\n            'HELLO': 'Hello world!'\n          })\n          .translations('de',{\n            'HELLO': 'Hallo Welt!'\n          })\n          .preferredLanguage('en');\n\n      });\n\n    </file>\n   </example>\n */\n.directive('translateLanguage', translateLanguageDirective);\n\nfunction translateLanguageDirective() {\n\n  'use strict';\n\n  return {\n    restrict: 'A',\n    scope: true,\n    compile: function () {\n      return function linkFn(scope, iElement, iAttrs) {\n\n        iAttrs.$observe('translateLanguage', function (newTranslateLanguage) {\n          scope.translateLanguage = newTranslateLanguage;\n        });\n\n        scope.$watch('translateLanguage', function(){\n          scope.$broadcast('translateLanguageChanged');\n        });\n      };\n    }\n  };\n}\n\ntranslateLanguageDirective.displayName = 'translateLanguageDirective';\n\nangular.module('pascalprecht.translate')\n/**\n * @ngdoc filter\n * @name pascalprecht.translate.filter:translate\n * @requires $parse\n * @requires pascalprecht.translate.$translate\n * @function\n *\n * @description\n * Uses `$translate` service to translate contents. Accepts interpolate parameters\n * to pass dynamized values though translation.\n *\n * @param {string} translationId A translation id to be translated.\n * @param {*=} interpolateParams Optional object literal (as hash or string) to pass values into translation.\n *\n * @returns {string} Translated text.\n *\n * @example\n   <example module=\"ngView\">\n    <file name=\"index.html\">\n      <div ng-controller=\"TranslateCtrl\">\n\n        <pre>{{ 'TRANSLATION_ID' | translate }}</pre>\n        <pre>{{ translationId | translate }}</pre>\n        <pre>{{ 'WITH_VALUES' | translate:'{value: 5}' }}</pre>\n        <pre>{{ 'WITH_VALUES' | translate:values }}</pre>\n\n      </div>\n    </file>\n    <file name=\"script.js\">\n      angular.module('ngView', ['pascalprecht.translate'])\n\n      .config(function ($translateProvider) {\n\n        $translateProvider.translations('en', {\n          'TRANSLATION_ID': 'Hello there!',\n          'WITH_VALUES': 'The following value is dynamic: {{value}}'\n        });\n        $translateProvider.preferredLanguage('en');\n\n      });\n\n      angular.module('ngView').controller('TranslateCtrl', function ($scope) {\n        $scope.translationId = 'TRANSLATION_ID';\n\n        $scope.values = {\n          value: 78\n        };\n      });\n    </file>\n   </example>\n */\n.filter('translate', translateFilterFactory);\n\nfunction translateFilterFactory($parse, $translate) {\n\n  'use strict';\n\n  var translateFilter = function (translationId, interpolateParams, interpolation, forceLanguage) {\n    if (!angular.isObject(interpolateParams)) {\n      interpolateParams = $parse(interpolateParams)(this);\n    }\n\n    return $translate.instant(translationId, interpolateParams, interpolation, forceLanguage);\n  };\n\n  if ($translate.statefulFilter()) {\n    translateFilter.$stateful = true;\n  }\n\n  return translateFilter;\n}\n\ntranslateFilterFactory.displayName = 'translateFilterFactory';\n\nangular.module('pascalprecht.translate')\n\n/**\n * @ngdoc object\n * @name pascalprecht.translate.$translationCache\n * @requires $cacheFactory\n *\n * @description\n * The first time a translation table is used, it is loaded in the translation cache for quick retrieval. You\n * can load translation tables directly into the cache by consuming the\n * `$translationCache` service directly.\n *\n * @return {object} $cacheFactory object.\n */\n  .factory('$translationCache', $translationCache);\n\nfunction $translationCache($cacheFactory) {\n\n  'use strict';\n\n  return $cacheFactory('translations');\n}\n\n$translationCache.displayName = '$translationCache';\nreturn 'pascalprecht.translate';\n\n}));\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../~/angular-translate/dist/angular-translate.js\n ** module id = 110\n ** module chunks = 0\n **/","import 'angular-drag-and-drop-lists';\n\nconst module = angular\n    .module('components.cmsTypes', ['dndLists'])\n    .directive('cmsTypes', directive);\n\nimport template from './tpl.html';\n\ndirective.$inject = ['cms', '$http'];\n\nfunction directive(cms, $http) {\n    controller.$inject = [];\n    function controller() {\n        const vm = this;\n        vm.types = _.map(cms.types,(v,k) => ({type:k}));\n\n        /*\n        dedicated;\n        $http.get('/cms-types').then(function (res) {\n            vm.types = res.data;\n        });\n        */\n        vm.selectType = function (type) {\n            cms.loadElements(type, () => {\n                vm.list = cms.types[type].list;\n                vm._type = type;\n            });\n        }\n        vm.convert = function (element) {\n            return {\n                type: vm._type,\n                ref: element._id,\n                containers: {}\n            }\n        }\n        vm.getTitle = function (element) {\n            return _.get(element, cms.data.types[vm._type].info.title)\n        }\n        vm.end = function () {\n            cms.updateContainerPage();\n            cms.editState.dragType = null;\n            $('body').removeClass('cms-drag');\n        }\n        vm.start = type => {\n            cms.editState.dragType = type;\n            $('body').addClass('cms-drag');\n        }\n    }\n\n    return {\n        replace: true,\n        restrict: 'A',\n        scope: {},\n        bindToController: {},\n        template,\n        controllerAs: 'vm',\n        controller\n    };\n}\n\nexport default module.name;\n\n\n\n/** WEBPACK FOOTER **\n ** ./components/cms-types/module.js\n **/","module.exports = (__webpack_require__(2))(224);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/angular-drag-and-drop-lists/angular-drag-and-drop-lists.js from dll-reference lib_lib\n ** module id = 112\n ** module chunks = 0\n **/","module.exports = \"<ul role=\\\"menu\\\" class=\\\"dropdown-menu\\\" ng-init=\\\"vm._showType= true\\\">\\n    <li ng-repeat=\\\"type in vm.types\\\"\\n        dnd-draggable=\\\"type\\\"\\n        dnd-type=\\\"type.type\\\"\\n        dnd-dragstart=\\\"vm.start(type.type)\\\"\\n        dnd-effect-allowed=\\\"move\\\"\\n        dnd-dragend=\\\"vm.end()\\\"\\n        ng-show=\\\"vm._showType\\\">\\n        <a ng-click=\\\"vm._showType = !vm._showType;\\n                    vm.selectType(type.type);\\n                    $event.stopPropagation();\\\">\\n            {{type.type}}\\n        </a>\\n    </li>\\n    <li ng-show=\\\"!vm._showType\\\"\\n        style=\\\"padding-left: 5px;padding-right: 20px;\\\">\\n        <div class=\\\"col-xs-10\\\">\\n            <input type=\\\"text\\\" class=\\\"input-xs\\\" ng-model=\\\"vm._filter\\\">\\n        </div>\\n        <div class=\\\"col-xs-2\\\">\\n            <button type=\\\"button\\\" class=\\\"btn btn-xs btn-white\\\"\\n                    ng-click=\\\"vm._showType = !vm._showType;$event.stopPropagation();\\\">\\n                <i class=\\\"fa fa-times\\\"></i>\\n            </button>\\n        </div>\\n    </li>\\n    <li ng-repeat=\\\"element in vm.list\\\"\\n        ng-init=\\\"_element = vm.convert(element)\\\"\\n        dnd-draggable=\\\"_element\\\"\\n        dnd-type=\\\"vm._type\\\"\\n        dnd-effect-allowed=\\\"move\\\"\\n        dnd-dragstart=\\\"vm.start(vm._type)\\\"\\n        dnd-dragend=\\\"vm.end()\\\"\\n        ng-show=\\\"!vm._showType\\\">\\n        <a ng-click=\\\"\\\">{{vm.getTitle(element)}}</a>\\n    </li>\\n</ul>\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./components/cms-types/tpl.html\n ** module id = 113\n ** module chunks = 0\n **/","import common from \"../../common/common.module\";\nimport \"angular-drag-and-drop-lists\";\nimport cmsEditable from \"../cms-editable/module\";\nimport cmsElementEdit from \"../cms-element-edit/module\";\nimport \"angular-ui-bootstrap\";\nimport elementDirective from \"./element.directive\";\nimport editorDirective from \"./editor.directive\";\nimport cmsWrapper from \"./cms-wrapper.directive\";\nimport \"angular-bootstrap-contextmenu\";\nimport fragmentDirective from \"./fragment.directive\";\nimport containerDirective from \"./container.directive\";\nimport containerEditDirective from \"./container-edit.directive\";\nimport cmsFormPathDirective from \"./cms-form-path.directive\";\n\nconst module = angular\n    .module('components.cmsMain', ['dndLists', 'ui.bootstrap', common, cmsEditable, cmsElementEdit, 'ui.bootstrap.contextMenu'])\n    .directive('cmsContainer', containerDirective)\n    .directive('cmsElement', elementDirective)\n    .directive('cmsEditor', editorDirective)\n    .directive('cmsWrapper', cmsWrapper)\n    .directive('cmsFragment', fragmentDirective)\n    .directive('cmsFormPath', cmsFormPathDirective)\n    .directive('cmsContainerEdit', containerEditDirective);\n\nexport default module.name;\n\n\n/** WEBPACK FOOTER **\n ** ./components/cms-main/module.js\n **/","import formly from '../formly/module';\n\nconst module = angular\n    .module('components.cmsElementEdit', [formly])\n    .directive('cmsElementEdit', directive)\n    .factory('formService', service);\n\nimport template from './tpl.html';\n\ndirective.$inject = [];\n\nfunction directive() {\n    controller.$inject = [];\n    function controller() {\n        const vm = this;\n        vm.isTab = vm.cmsFields[0].isTab ? true : false;\n        vm.fullScreenText = 'Fullscreen';\n        vm.changeScreenSize = function () {\n            if ($('.cms-window-placeholder').hasClass('cms-window')) {\n                $('.cms-window-placeholder').removeClass('cms-window');\n                vm.fullScreenText = 'Fullscreen';\n            } else {\n                $('.cms-window-placeholder').addClass('cms-window');\n                vm.fullScreenText = 'Minimize';\n            }\n        }\n        vm.options = {formState: {path: ''}};\n    }\n\n    return {\n        replace: true,\n        restrict: 'A',\n        scope: {},\n        bindToController: {\n            cmsType: '=',\n            cmsModel: '=',\n            cmsFields: '=',\n            onCancel: '&',\n            onSubmit: '&',\n            onAdd: '&',\n            onApply: '&',\n            onDelete: '&'\n        },\n        template,\n        controllerAs: 'vm',\n        controller\n    };\n}\n\nservice.$inject = ['$http', '$timeout', 'cms', '$uibModal'];\nfunction service($http, $timeout, cms, $uibModal) {\n    function manipulate(ref, type, _model, cb) {\n\n        const Type = Types[type];\n\n        function modalCtrl($scope, $uibModalInstance) {\n            $scope.$on('saveContainers', (e, obj) => scope.$emit('saveContainersFw', obj));\n            $scope.$on('restoreContainers', (e, obj) => scope.$emit('restoreContainersFw', obj));\n\n            $scope.model = {};\n\n            if (ref) {\n                cms.getType(type, ref, (model) => {\n                    _.assign($scope.model, model);\n                })\n            } else if (_model) {\n                cms.createElement(type, _model, model => {\n                    _.assign($scope.model, model);\n                })\n            }\n\n            $scope.fields = Type.form;\n\n            if (Type.tabs) {\n                $scope.fields = _.map(Type.tabs, (tab, i) => {\n                    const _tab = {title: tab.title, fields: []};\n                    if (i === 0) {\n                        _tab.active = true;\n                        _tab.isTab = true;\n                    }\n                    _.merge(tab, {fields: []});\n                    for (const field of Type.form) {\n                        const inFirstTab = () => {\n                            let result = true;\n                            Type.tabs.forEach((tab, i) => {\n                                if (i !== 0) {\n                                    if (tab.fields.indexOf(field.key) !== -1 || field.tab === tab.title) result = false;\n                                }\n                            })\n                            return result;\n                        }\n                        if (field.tab === tab.title || tab.fields.indexOf(field.key) !== -1 || (i === 0 && inFirstTab())) {\n                            _tab.fields.push(field);\n                        }\n                    }\n                    return _tab;\n                })\n            }\n\n            $scope.type = type;\n\n            $scope.submit = function () {\n                cms.updateElement($scope.type, $scope.model, (_model) => {\n                    $uibModalInstance.close(_model);\n                    console.log('update element successful');\n                }, () => $uibModalInstance.dismiss('cancel'));\n            };\n\n            $scope.apply = function () {\n                cms.updateElement($scope.type, $scope.model);\n            };\n\n            $scope.cancel = function () {\n                $uibModalInstance.dismiss('cancel');\n            };\n\n            $scope.delete = function () {\n                cms.removeElement($scope.type, $scope.model._id, () => {\n                    $uibModalInstance.close();\n                })\n            };\n\n            $scope.add = function () {\n                $scope.apply()\n                cms.createElement(type, {}, model => {\n                    $uibModalInstance.close();\n                    edit(model._id, type, cb);\n                })\n            };\n\n\n        }\n\n\n        let mouseEnter = false;\n\n        $('body').on('scroll mousewheel touchmove', function (e) {\n            if (!mouseEnter) {\n                e.preventDefault();\n                e.stopPropagation();\n                return false;\n            }\n        });\n\n        const modalInstance = $uibModal.open({\n            animation: false,\n            size: 'lg',\n            template: `\n                <div cms-element-edit\n                     cms-type=\"type\"\n                     cms-model=\"model\"\n                     cms-fields=\"fields\"\n                     on-cancel=\"cancel()\"\n                     on-submit=\"submit()\"\n                     on-add=\"add()\"\n                     on-apply=\"apply()\"\n                     on-delete=\"delete()\">\n                </div>\n                `,\n            controller: modalCtrl,\n            windowClass: 'cms-window-placeholder'\n        });\n\n        $timeout(() => {\n            $('.cms-window-placeholder').find('.modal-content').mouseover(() => {\n                mouseEnter = true;\n            }).mouseout(() => {\n                mouseEnter = false;\n            });\n        }, 100);\n\n        modalInstance.result.then((model) => {\n            if (cb) $timeout(cb(model));\n        })['finally'](function () {\n            $timeout(()=> {\n                $('body').off('scroll mousewheel touchmove');\n                $('.cms-window-placeholder').find('.modal-content').off();\n            });\n        });\n\n\n    }\n\n    function edit(ref, type, cb) {\n        manipulate(ref, type, null, cb);\n    }\n\n    function add(model, type, cb) {\n        manipulate(null, type, model, cb);\n    }\n\n    return {\n        edit,\n        add\n    }\n}\n\nexport default module.name;\n\n\n\n/** WEBPACK FOOTER **\n ** ./components/cms-element-edit/module.js\n **/","module.exports = \"<div class=\\\"cms-wrapper cms\\\"\\n     ng-init=\\\"_showId = false;\\\">\\n\\n    <div style=\\\"position: absolute;right: 10px;\\\">\\n        <button class=\\\"btn btn-xs btn-white\\\"\\n                ng-click=\\\"_showId=!_showId;\\\"\\n                ng-bind=\\\"_showId?'hide id':'show id'\\\">\\n        </button>\\n        <button type=\\\"button\\\" class=\\\"btn btn-xs btn-white\\\" ng-bind=\\\"vm.fullScreenText\\\"\\n                ng-click=\\\"vm.changeScreenSize();\\\"></button>\\n    </div>\\n\\n    <h3 style=\\\"font-weight: 300;\\\">Edit {{vm.cmsType}} {{_showId?'('+vm.cmsModel._id+')':''}}:</h3>\\n\\n    <form ng-submit=\\\"vm.onSubmit()\\\"\\n          novalidate\\n          class=\\\"cms-form form-horizontal\\\">\\n\\n        <uib-tabset ng-if=\\\"vm.isTab\\\">\\n            <uib-tab ng-repeat=\\\"tab in vm.cmsFields\\\"\\n                     heading=\\\"{{tab.title}}\\\"\\n                     active=\\\"tab.active\\\">\\n                <br>\\n                <formly-form model=\\\"vm.cmsModel\\\" fields=\\\"tab.fields\\\"\\n                             form=\\\"vm.form\\\" options=\\\"vm.options\\\">\\n                </formly-form>\\n            </uib-tab>\\n        </uib-tabset>\\n\\n        <div>\\n            <br>\\n            <formly-form model=\\\"vm.cmsModel\\\" fields=\\\"vm.cmsFields\\\"\\n                         form=\\\"vm.form\\\" options=\\\"vm.options\\\" ng-if=\\\"!vm.isTab\\\">\\n            </formly-form>\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n            <div class=\\\"col-sm-offset-2 col-sm-10\\\">\\n                <button type=\\\"submit\\\" class=\\\"btn btn-primary submit-button\\\" ng-disabled=\\\"vm.form.$invalid\\\">Submit\\n                </button>\\n                <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-click=\\\"vm.onApply()\\\">Apply</button>\\n                <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-click=\\\"vm.onAdd()\\\">Save and Add</button>\\n                <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-click=\\\"vm.onCancel()\\\">Cancel</button>\\n\\n                <button type=\\\"button\\\" class=\\\"cms-btn btn-outline btn btn-danger pull-right\\\" ng-click=\\\"vm.onDelete()\\\">Delete</button>\\n\\n            </div>\\n        </div>\\n    </form>\\n</div>\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./components/cms-element-edit/tpl.html\n ** module id = 116\n ** module chunks = 0\n **/","elementDirective.$inject = ['cms', '$compile', '$http', '$timeout', '$controller'];\nfunction elementDirective(cms, $compile, $http, $timeout, $controller) {\n\n    function link(scope, element, attr, controller) {\n        const {vm} = scope;\n        let {ref, type, containers, binding} = vm.element;\n        scope.$on('saveContainersFw', (e, obj) => {\n            if (obj.type === type) obj.cb(vm.element.containers)\n        });\n        scope.$on('restoreContainersFw', (e, obj) => {\n            if (obj.type === type) {\n                vm.element.containers.length = 0;\n                vm.element.containers.push(...obj.containers);\n                render();\n                cms.updateContainerPage();\n            }\n        });\n\n        let Type;\n\n        cms.getType(type, ref, model => {\n            if (!model) {\n                vm.dndMoved();\n                cms.updateContainerPage();\n                return;\n            }\n            vm.element.ref = model._id;\n            vm.element.containers = vm.element.containers || {};\n            if (!ref) cms.updateContainerPage();\n            Type = Types[type];\n            render();\n        })\n\n        function processBinding(binding, e, template) {\n            if (binding.binds) {\n                scope.parentModel = binding.parentModel;\n                for (const bind of binding.binds) {\n                    if (bind.choice === 'model') {\n                        const {parentKey, key} = bind.model;\n                        scope.$watch(`parentModel.${parentKey}`, () => scope.model[key] = scope.parentModel[parentKey], true);\n                    } else if (bind.choice === 'fn') {\n                        const {parentKey, key} = bind.fn;\n                        scope.model[key] = Types[binding.BindType].fn[parentFn].bind(model);\n                    } else if (bind.choice === 'scope') {\n                        const {key} = bind.scope;\n                        scope.model[key] = e[key].bind(scope.parentModel);\n                    } else if (bind.choice === 'array') {\n                        const {parentKey} = bind.array;\n                        scope.prepareElement = function (item) {\n                            const containers = JsonFn.clone(vm.element.containers);\n                            Types.Layout.fn.getTreeWithBinding(containers, bind.array.bind, item, binding.BindType);\n                            return {type: vm.element.type, ref: vm.element.ref, containers, binding: {}};\n                        }\n                        template = `\n                                <div ng-repeat=\"item in parentModel.${parentKey} track by $index\"\n                                     ng-init=\"e = prepareElement(item)\">\n                                     <div cms-element=\"e\"></div>\n                                </div>`;\n                    }\n                }\n            }\n            return template;\n        }\n\n        function render() {\n\n            if (vm.inline) {\n                scope.cmsInline = vm.inline === 'true';\n                reRender();\n            } else {\n                try {\n                    scope.cmsInline = scope.$parent.vm.cmsInline === 'true';\n\n                    scope.$parent.$watch('vm.cmsInline', () => {\n                        scope.cmsInline = scope.$parent.vm.cmsInline === 'true';\n                        reRender();\n                    });\n                } catch (e) {\n                }\n            }\n\n            $timeout(() => scope.$watch('vm.element.ref', (newValue, oldValue) => {\n                if (newValue !== oldValue) reRender();\n            }), 2000);\n\n            function reRender() {\n                ref = vm.element.ref;\n                const e = _.find(Type.list, {_id: ref});\n                if (binding) {\n                    let template = Type.template;\n                    scope.model = angular.copy(e);\n                    template = processBinding(binding, e, template);\n                    element.html(template);\n                } else {\n                    scope.model = e;\n                    element.html(`\n                    <div cms-refresh=\"vm.refresh()\"\n                         cms-editor=\"vm.element\"\n                         cms-remove=\"vm.dndMoved()\"\n                         cms-menu=\"{{cmsInline?'true':'false'}}\"\n                         ng-class=\"{'cms-edit-shadow':cmsInline}\">\n                         ${Type.template}\n                    </div>\n                    `);\n                }\n\n                _render();\n            }\n\n            function _render() {\n                let {serverFn, controller: ctrl} = Type;\n                let fn = JsonFn.clone(Type.fn);\n                if (fn) {\n                    const _fn = {};\n                    _.each(fn, (v, k) => {\n                        _fn[k] = v.bind(scope.model);\n                    });\n                    scope.fn = _fn;\n                }\n\n                scope.serverFn = {};\n                _.each(serverFn, (fn, k) => {\n                    fn.bind(scope.model)($http.post, scope, type, k);\n                })\n                if (ctrl) $controller(ctrl, {$scope: scope});\n\n                controller.refresh = function () {\n                    if (scope.serverFnData) scope.serverFnData = null;\n                    render();\n                }\n\n                controller.getPath = () => `${vm.path}.containers`;\n                controller.getElement = () => vm.element;\n\n                $compile(element.contents())(scope);\n            }\n        }\n    }\n\n\n    return {\n        restrict: 'A',\n        replace: true,\n        scope: {},\n        bindToController: {\n            path: '@cmsPath',\n            element: '=cmsElement',\n            inline: '@inline',\n            dndMoved: '&'\n        },\n        controllerAs: 'vm',\n        controller: function () {\n        },\n        link\n    };\n}\n\nexport default elementDirective;\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./components/cms-main/element.directive.js\n **/","import template from './editor.html';\n\ndirective.$inject = ['cms', '$http', '$timeout', 'formService'];\nfunction directive(cms, $http, $timeout, formService) {\n    controller.$inject = ['$scope'];\n\n    function controller(scope) {\n        const vm = this;\n        const {ref, type} = vm.cmsEditor;\n        const Type = cms.data.types[type];\n\n        vm.editState = cms.editState;\n        vm.showControl = function () {\n            vm._showControl = true;\n            $timeout(function () {\n                vm._showControl = false;\n            }, 1000)\n        }\n\n        vm.getControlVisible = function () {\n            return !vm._showControl &&\n                (vm.editState.editMode === Enum.EditMode.ALL ||\n                (vm.editState.editMode === Enum.EditMode.VIEWELEMENT && Type.info.isViewElement) ||\n                (vm.editState.editMode === Enum.EditMode.DATAELEMENT && !Type.info.isViewElement))\n        }\n\n        vm.edit = function (cb) {\n            const {ref, type} = vm.cmsEditor;\n            formService.edit(ref, type, cb);\n        }\n\n        vm.copy = function (cb) {\n            const {ref, type} = vm.cmsEditor;\n            const e = cms.findByRef(type, ref);\n\n            cms.createElement(type, _.pickBy(e, (v, k)=> k !== '_id', true), model => {\n                formService.edit(model._id, type, cb);\n            })\n        }\n\n        vm.remove = function () {\n            vm.cmsRemove();\n            cms.updateContainerPage();\n        }\n        vm.removeByDatabase = function () {\n            vm.remove();\n            $http.delete(`api/v1/${vm.cmsEditor.type}/${vm.cmsEditor.ref}`).then(() => {\n                _.remove(Types[vm.cmsEditor.type].list, {_id: vm.cmsEditor.ref})\n                vm.refresh();\n            });\n        }\n\n        vm.refresh = function () {\n            scope.$emit('refresh', {type: 'Wrapper', finish: false});\n        }\n\n    }\n\n    function link(scope, element, attr, elementController) {\n        scope.menu = [];\n        const {vm} = scope;\n        const {ref, type} = vm.cmsEditor;\n        if (vm.cmsMenu === 'true') {\n            scope.menu = [\n                ['Edit', () => vm.edit(refresh)],\n                ['Remove', function () {\n                    vm.remove();\n                }],\n                ['Remove (in database)', function () {\n                    vm.remove();\n                    $http.delete(`api/v1/${vm.cmsEditor.type}/${vm.cmsEditor.ref}`).then(() => {\n                        elementController.refresh();\n                    });\n                }],\n                ['Add new', function () {\n                    $http.get(`/cms-types/${vm.cmsEditor.type}`).then(res => {\n                        const Type = cms.data.types[vm.cmsEditor.type];\n                        Type.list.unshift(res.data.data);\n                        elementController.refresh();\n                    })\n                }]\n            ];\n        }\n        var Type = cms.data.types[type];\n        vm.editorIcon = Type.info.editorIcon;\n    }\n\n    return {\n        restrict: 'A',\n        require: '^^?cmsElement',\n        scope: {},\n        bindToController: {\n            cmsEditor: '=',\n            cmsRemove: '&',\n            cmsRefresh: '&',\n            cmsMenu: '@',\n            cmsTemplate: '='\n        },\n        controller,\n        link,\n        controllerAs: 'vm',\n        transclude: true,\n        template\n    };\n}\n\nexport default directive;\n\n\n/** WEBPACK FOOTER **\n ** ./components/cms-main/editor.directive.js\n **/","module.exports = \"<div context-menu=\\\"menu\\\"\\n     ng-style=\\\"{display:vm.cmsMenu === 'true'?'inline-block':'block'}\\\">\\n    <div ng-if=\\\"vm.cmsMenu !== 'true'\\\" class=\\\"cms cms-element-wrapper\\\" ng-style=\\\"vm.editorIcon\\\">\\n        <div class=\\\"cms-element-controll-icon label label-primary\\\" style=\\\"font-size: 13px\\\"\\n             ng-mouseover=\\\"vm.showControl()\\\" ng-show=\\\"vm.getControlVisible()\\\">\\n            <i class=\\\"fa fa-circle-o-notch\\\"></i>\\n        </div>\\n\\n        <div class=\\\"cms-element-controll\\\"\\n             ng-mouseover=\\\"vm.__showControl = true\\\"\\n             ng-mouseleave=\\\"vm.__showControl = false\\\"\\n             ng-show=\\\"vm._showControl || vm.__showControl\\\">\\n            <button type=\\\"button\\\" class=\\\"btn btn-sm btn-white pull-right\\\" ng-click=\\\"vm.edit()\\\">\\n                <i class=\\\"fa fa-pencil-square-o\\\"></i>\\n            </button>\\n            <button type=\\\"button\\\" class=\\\"btn btn-sm btn-white pull-right\\\" ng-click=\\\"vm.removeByDatabase()\\\">\\n                <i class=\\\"fa fa-trash\\\"></i>\\n            </button>\\n            <button type=\\\"button\\\" class=\\\"btn btn-sm btn-white pull-right\\\" ng-click=\\\"vm.remove()\\\">\\n                <i class=\\\"fa fa-trash-o\\\"></i>\\n            </button>\\n            <button type=\\\"button\\\" class=\\\"btn btn-sm btn-white pull-right\\\" ng-click=\\\"vm.copy()\\\">\\n                <i class=\\\"fa fa-files-o\\\"></i>\\n            </button>\\n            <button type=\\\"button\\\" class=\\\"btn btn-sm btn-white pull-right\\\" ng-click=\\\"vm.cmsRefresh()\\\">\\n                <i class=\\\"fa fa-refresh\\\"></i>\\n            </button>\\n        </div>\\n\\n    </div>\\n    <ng-transclude></ng-transclude>\\n</div>\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./components/cms-main/editor.html\n ** module id = 119\n ** module chunks = 0\n **/","directive.$inject = ['cms', '$compile', '$http', '$timeout', '$controller'];\nfunction directive(cms, $compile, $http, $timeout, $controller) {\n\n    function link(scope, element) {\n        const {vm} = scope;\n        const Type = cms.data.types['Wrapper'];\n        if (!Type.store) Type.store = {};\n        render();\n\n        /*if (!Type.store[vm.cmsWrapper]) {\n         $http.get(`/cms-wrappers/${vm.cmsWrapper}`, _transform).then(res => {\n         Type.store[vm.cmsWrapper] = res.data;\n         render();\n         }, () => {\n         render();\n         })\n         } else {\n         render();\n         }*/\n\n        function render() {\n            if (Type.store[vm.cmsWrapper]) {\n                const {template, serverFn, fn, serverFnData, controller} = Type.store[vm.cmsWrapper];\n\n                _.assign(scope, {fn: {}, model: vm.element, serverFn: {}, serverFnData});\n\n                _.each(fn, (v, k) => scope.fn[k] = v.bind(scope.model));\n                _.each(serverFn, (fn, k) =>fn($http.post, scope, vm.cmsWrapper, k))\n\n                if (controller) $controller(controller, {$scope: scope});\n\n                element.html(template);\n            } else {\n                const {list, element:_element, Fn:_fn} = vm.element;\n                let template;\n                if (!list.null) {\n                    const {BindType, layout, query} = list;\n                    // resolve data before render\n                    if (!Types[BindType]._load) {\n                        cms.loadElements(BindType, () => render());\n                        return;\n                    }\n                    try {\n                        scope.result = query.bind(vm.element)();\n                    } catch (e) {\n                    }\n                    if (!scope.result) scope.result = cms.data.types[BindType].list;\n                    scope.type = BindType;\n                    if (layout) {\n                        scope.layout = layout;\n                        template = `\n                        <div ng-repeat=\"element in result track by $index\">\n                            <div cms-fragment=\"{{layout.ID}}\" model=\"element\"></div>\n                        </div>\n                        `\n                    } else {\n                        scope.e = {type: BindType}\n                        template = `\n                        <br>\n                        <div ng-repeat=\"element in result track by $index\">\n                            <div cms-element=\"{type:type,ref:element._id}\"></div>\n                        </div>\n                        `\n                    }\n                } else if (!_element.null) {\n                    const {BindType, layout, model, query} = _element;\n                    _.assign(scope, {model, layout, type: BindType});\n                    template = `<br><div cms-element=\"{type:type,ref:vm.element.element.model._id}\"></div>`\n                }\n                if (_fn) {\n                    vm.element.fn = _.mapValues(_fn(), f => f.bind(vm.element));\n                }\n                element.html(template);\n            }\n\n            $compile(element.contents())(scope);\n        }\n    }\n\n    return {\n        replace: true,\n        restrict: 'A',\n        scope: {},\n        bindToController: {\n            cmsWrapper: '@',\n            element: '='\n        },\n        controller: function () {\n        },\n        link,\n        controllerAs: 'vm'\n    };\n}\n\nexport default directive;\n\n\n/** WEBPACK FOOTER **\n ** ./components/cms-main/cms-wrapper.directive.js\n **/","module.exports = (__webpack_require__(2))(225);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** delegated ./node_modules/angular-bootstrap-contextmenu/contextMenu.js from dll-reference lib_lib\n ** module id = 121\n ** module chunks = 0\n **/","directive.$inject = ['cms', '$compile', '$timeout'];\nexport function directive(cms, $compile, $timeout) {\n\n    function link(scope, element) {\n        const {vm} = scope;\n        const Layout = cms.data.types['Layout'];\n        const layout = _.find(Layout.list, layout => layout.ID === vm.fragment);\n        let {containers, bind, BindType} = vm.save ? _.find(layout.SAVE, save => save.name === vm.save) : layout.SAVE[0];\n        containers = angular.copy(containers);\n        Layout.fn.getTreeWithBinding(containers, bind, vm.model, BindType);\n        vm.element = {ref: layout._id, type: 'Layout', containers, binding: {}};\n        element.html('<div cms-element=\"vm.element\"></div>');\n        $compile(element.contents())(scope);\n    }\n\n    return {\n        restrict: 'A',\n        replace: false,\n        scope: {},\n        bindToController: {\n            fragment: '@cmsFragment',\n            save: '@',\n            model: '='\n        },\n        controller: function () {\n        },\n        controllerAs: 'vm',\n        link\n    };\n}\nexport default directive;\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./components/cms-main/fragment.directive.js\n **/","import template from './container.html';\ndirective.$inject = ['cms', '$timeout'];\nfunction directive(cms, $timeout) {\n    function link(scope, element, attr, elementController) {\n        const vm = scope.vm;\n        const elementPath = elementController ? elementController.getPath() : null;\n        vm.path = `${elementPath ? elementPath + '.' : ''}${vm.name}`;\n        const container = cms.getContainer(vm.path);\n\n        vm.showControl = function () {\n            vm._showControl = true;\n            $timeout(function () {\n                vm._showControl = false;\n            }, 1000)\n        }\n        vm.editState = cms.editState;\n        vm.elements = container.elements;\n        vm.start = type => {\n            cms.editState.dragType = type;\n        }\n        vm.end = function () {\n            cms.editState.dragType = null;\n            cms.updateContainerPage();\n        }\n        vm.allowedTypes = vm.cmsContainerTypes ? vm.cmsContainerTypes.split(',') : [];\n        vm.highlight = ()=> vm.allowedTypes.indexOf(vm.editState.dragType) !== -1 && !(vm.elements.length > 0 && vm.elements[0].binding);\n\n        vm.editState = cms.editState;\n        vm.matchEditMode = function (type) {\n            return  (vm.editState.editMode === Enum.EditMode.ALL ||\n            (vm.editState.editMode === Enum.EditMode.VIEWELEMENT && cms.data.types[type].info.isViewElement) ||\n            (vm.editState.editMode === Enum.EditMode.DATAELEMENT && !cms.data.types[type].info.isViewElement))\n        }\n    }\n\n    return {\n        require: '^^?cmsElement',\n        replace: false,\n        restrict: 'A',\n        scope: {},\n        bindToController: {\n            name: '@cmsContainer',\n            cmsContainerTypes: '@',\n            cmsInline: '@'\n        },\n        template,\n        controller: function () {\n        },\n        controllerAs: 'vm',\n        link\n    };\n}\n\n\nexport default directive;\n\n\n/** WEBPACK FOOTER **\n ** ./components/cms-main/container.directive.js\n **/","module.exports = \"<i class=\\\"fa fa-circle-o-notch cms-element-controll-icon\\\"\\n   ng-mouseover=\\\"vm.showControl()\\\"\\n   ng-show=\\\"!vm._showControl && (vm.editState.editMode === 1)\\\"></i>\\n<div class=\\\"cms-element-controll\\\"\\n     ng-mouseover=\\\"vm.__showControl = true\\\"\\n     ng-mouseleave=\\\"vm.__showControl = false\\\"\\n     ng-show=\\\"vm._showControl || vm.__showControl\\\">\\n    <button type=\\\"button\\\" class=\\\"btn btn-sm btn-white pull-right\\\" ng-click=\\\"\\\">\\n        <i class=\\\"fa fa-plus\\\"></i>\\n    </button>\\n</div>\\n<div class=\\\"{{vm.cmsInline === 'true'?'cms-containers-inline':'cms-containers'}}\\\"\\n     dnd-list=\\\"vm.elements\\\"\\n     dnd-disable-if=\\\"vm.elements.length > 0 && vm.elements[0].binding\\\"\\n     dnd-allowed-types=\\\"vm.allowedTypes\\\"\\n     dnd-horizontal-list=\\\"{{vm.cmsInline}}\\\"\\n     ng-class=\\\"{'cms-panel-highlight':vm.highlight()}\\\">\\n    <div ng-repeat=\\\"element in vm.elements\\\"\\n         dnd-disable-if=\\\"element.binding || !vm.matchEditMode(element.type)\\\"\\n         dnd-draggable=\\\"element\\\"\\n         dnd-type=\\\"element.type\\\"\\n         dnd-moved=\\\"vm.elements.splice($index, 1);\\\"\\n         dnd-effect-allowed=\\\"move\\\"\\n         dnd-dragstart=\\\"vm.start(element.type)\\\"\\n         dnd-dragend=\\\"vm.end();\\\"\\n         cms-element=\\\"element\\\"\\n         cms-path=\\\"{{vm.path}}.elements[{{$index}}]\\\"\\n         class=\\\"{{vm.cmsInline === 'true'?'cms-element':''}}\\\"\\n    ></div>\\n</div>\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./components/cms-main/container.html\n ** module id = 124\n ** module chunks = 0\n **/","import template from './container-edit.html';\n\nimport traverse from  'traverse';\n\ndirective.$inject = ['cms', '$timeout'];\nfunction directive(cms, $timeout) {\n    function link(scope, element, attr) {\n        $(element).find('.cms-container-panel').draggable({\n            cancel: \".panel-body\",\n            handle: \".panel-heading\",\n        });\n        scope.vm.editState = cms.editState;\n        const {vm} = scope;\n\n        const test = {\n            main: {\n                elements: [\n                    {\n                        \"type\": \"Article\",\n                        \"ref\": \"579109d67babc20c5a7f8673\",\n                        \"containers\": {\n                            tab: {\n                                elements: [\n                                    {\n                                        \"type\": \"Article\",\n                                        \"ref\": \"579109d67babc20c5a7f8673\"\n                                    }\n                                ]\n                            }\n                        }\n                    }\n                ]\n            }\n        }\n\n        vm.treeConfig = {\n            core: {\n                themes: {name: 'proton', responsive: true},\n                animation: true,\n                check_callback: true\n            },\n            plugins: [\"dnd\", \"types\"],\n            version: 1\n        }\n\n        vm.tree = traverse(cms.data.containers).map(function (node) {\n            if (!node) return;\n            if (!this.key || (this.key === 'children' && this.parent.parent.node[0].type === 'element')) {\n                const _node = _.map(node, (v, k) => ({text: k, type: 'container', children: v.elements}));\n                this.update(_node);\n            } else if (this.parent && this.parent.key === 'children' && node.ref) {\n                const _node = {\n                    content: _.pick(node, ['type', 'ref']),\n                    text: `${node.type} - ${cms.getTitle(node.type, node.ref)}`,\n                    type: 'element',\n                    children: node.containers\n                };\n                this.update(_node);\n            }\n        });\n\n        $timeout(() => vm.treeConfig.version++);\n    }\n\n    return {\n        replace: false,\n        restrict: 'A',\n        scope: {},\n        bindToController: {},\n        template,\n        controller: function () {\n        },\n        controllerAs: 'vm',\n        link\n    };\n}\n\n\nexport default directive;\n\n\n/** WEBPACK FOOTER **\n ** ./components/cms-main/container-edit.directive.js\n **/","module.exports = \"<div class=\\\"cms-container-panel panel panel-default ui-widget-content\\\"\\n     ng-show=\\\"vm.editState.showContainerEdit\\\"\\n     style=\\\"position: fixed; top: 70px; right: 50px;width: 300px;height: 600px;z-index:1000\\\">\\n    <div class=\\\"panel-heading\\\" style=\\\"padding: 0px 0px 0px 10px;height: 26px;cursor: move\\\">\\n        <div class=\\\"panel-title\\\">\\n            <h5>Edit panel</h5>\\n        </div>\\n    </div>\\n    <div class=\\\"panel-body\\\">\\n        <div js-tree=\\\"vm.treeConfig\\\" ng-model=\\\"vm.tree\\\"\\n             tree-events=\\\"changed:vm.selectNode\\\" tree=\\\"vm.treeInstance\\\"></div>\\n    </div>\\n</div>\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./components/cms-main/container-edit.html\n ** module id = 126\n ** module chunks = 0\n **/","directive.$inject = ['cms'];\nfunction directive(cms) {\n\n    return {\n        // replace: true,\n        restrict: 'A',\n        scope: {},\n        bindToController: {\n            model: '=',\n            type: '@',\n            path: '@cmsFormPath',\n            class: '@?cmsClass'\n        },\n        template: `\n        <formly-form model=\"vm.model\" fields=\"vm.fields\" form=\"vm.form\" options=\"vm.options\"></formly-form>\n        `,\n        controller: function () {\n            const vm = this;\n\n            const Path = _.find(cms.types[vm.type].paths, {path: vm.path});\n\n            if (Path) {\n                vm.fields = [angular.copy(_.get(cms.types[vm.type].form, Path.pathInForm))];\n\n                if (vm.class && vm.class !== '') _.merge(vm.fields[0], {templateOptions: {class: vm.class}});\n            }\n\n\n\n        },\n        controllerAs: 'vm'\n    };\n}\n\nexport default directive;\n\n\n/** WEBPACK FOOTER **\n ** ./components/cms-main/cms-form-path.directive.js\n **/","import 'angular-ui-bootstrap';\nimport 'jstree';\nimport 'jstree-bootstrap-theme/dist/themes/proton/style.min.css'\nimport 'ng-js-tree';\nimport 'ui-select';\nimport 'ui-select/dist/select.min.css';\n\nconst module = angular\n    .module('components.cmsSitemap', ['ui.bootstrap', 'ngJsTree', 'ui.select'])\n    .directive('cmsSitemap', directive);\n\nimport template from './tpl.html';\n\ndirective.$inject = ['$http', '$uibModal', '$timeout', 'cms'];\n\nfunction directive($http, $uibModal, $timeout, cms) {\n    controller.$inject = [];\n    function controller() {\n        const vm = this;\n\n        vm.openSitemap = function () {\n            function modalCtrl($scope, $uibModalInstance) {\n                $scope.cancel = function () {\n                    $uibModalInstance.dismiss('cancel');\n                };\n                $scope.refresh = function () {\n                    $http.get(`/cms-site-map`).then(({data})=> {\n                        $scope.tree = [data.tree];\n                        $scope.templates = data.templates;\n                        $timeout(() => $scope.treeConfig.version++);\n                    })\n                }\n                $http.get(`/cms-site-map`).then(({data})=> {\n                    $scope.tree = [data.tree];\n                    $timeout(() => $scope.treeConfig.version++);\n                });\n\n                $scope.templates = cms.data.templates;\n                $scope.baseUrlPath = cms.data.baseUrlPath;\n                $scope.open = function () {\n                    location.href = `${$scope.baseUrlPath}/${$scope.node.path}`;\n                }\n                $scope.template = {};\n                $scope.ignoreModelChanges = () => false;\n                $scope.treeConfig = {\n                    core: {\n                        themes: {name: 'proton', responsive: true},\n                        animation: true,\n                        check_callback: true\n                    },\n                    plugins: [],\n                    version: 1\n                }\n                $scope.onFileSelect = function (files) {\n                    //files: an array of files selected, each file has name, size, and type.\n                    const [file] = files;\n                    cms.uploadFile(file, $scope.node.path, () => {\n                        console.log('upload successful');\n                        $scope.refresh();\n                    })\n                }\n                $scope.selectNode = function (e, select) {\n                    $timeout(() =>\n                        $scope.node = (select && select.node) ? select.node.original : null);\n                }\n                $scope.makeTemplate = function (templateName) {\n                    $http.post('/cms-make-template', {path: $scope.node.path, name: templateName})\n                        .then(() => {\n                            console.log('make template successful');\n                            $scope.refresh();\n                        })\n                }\n                $scope.createPage = function (templatePage, pageName) {\n                    $http.post('/cms-create-page', {\n                        templatePage,\n                        path: `${$scope.node.path}${$scope.node.path !== '' ? '/' : ''}${pageName}`\n                    })\n                        .then(() => {\n                            console.log('make template successful');\n                            $scope.refresh();\n                        })\n                }\n                $scope.deletePage = function () {\n                    $http.post(`/cms-delete-page`, {path: $scope.node.path})\n                        .then(() => $scope.refresh())\n                }\n                $scope.renamePage = function (newPageName) {\n                    $http.post(`/cms-rename-page`, {path: $scope.node.path, name: newPageName})\n                        .then(() => $scope.refresh())\n                }\n            }\n\n            $uibModal.open({\n                animation: true,\n                template,\n                controller: modalCtrl,\n                windowClass: 'cms-window'\n            });\n        }\n\n    }\n\n    return {\n        replace: true,\n        restrict: 'A',\n        scope: {},\n        bindToController: {},\n        template: '<button ng-click=\"vm.openSitemap()\" class=\"btn btn-default navbar-btn\">Sitemap</button>',\n        controllerAs: 'vm',\n        controller\n    };\n}\n\nexport default module.name;\n\n\n\n/** WEBPACK FOOTER **\n ** ./components/cms-sitemap/module.js\n **/","module.exports = \"<div class=\\\"cms-wrapper animated fadeInRight cms-sidebar cms\\\">\\n    <button type=\\\"button\\\" class=\\\"btn btn-sm btn-white cms-close-position\\\"\\n            ng-click=\\\"cancel()\\\">\\n        <i class=\\\"fa fa-times\\\"></i>\\n    </button>\\n\\n    <div class=\\\"col-xs-6 col-sm-4 pull-right cms-controll-panel-right\\\">\\n        <div ng-show=\\\"node\\\">\\n            <h4>Information: </h4>\\n            <h5 style=\\\"word-break: break-all;\\\">Name: {{node.text}}</h5>\\n            <h5 style=\\\"word-break: break-all;\\\">Type: {{node.type}}</h5>\\n            <h5 style=\\\"word-break: break-all;\\\">Path: {{node.path}}</h5>\\n            <br>\\n\\n            <div class=\\\"btn-group\\\">\\n                <button class=\\\"btn btn-xs btn-white cms-btn-bottom\\\"\\n                        ng-click=\\\"open()\\\">\\n                    Open page\\n                </button>\\n                <button class=\\\"btn btn-xs btn-white cms-btn-bottom\\\"\\n                        ng-click=\\\"deletePage()\\\">\\n                    Delete\\n                </button>\\n            </div>\\n            <form role=\\\"form\\\" ng-submit=\\\"makeTemplate(templateName);templateName = '';\\\">\\n                <button class=\\\"btn btn-xs btn-white cms-btn-bottom\\\"\\n                        type=\\\"submit\\\" style=\\\"position: absolute;right: 15px;\\\"\\n                        ng-disabled=\\\"!templateName\\\">\\n                    Make template page\\n                </button>\\n                <input ng-model=\\\"templateName\\\" type=\\\"text\\\" class=\\\"form-control input-xs\\\" placeholder=\\\"template name\\\">\\n            </form>\\n            <form role=\\\"form\\\" ng-submit=\\\"createPage(template.selected, pageName);pageName = '';\\\">\\n                <ui-select class=\\\"cms-select\\\" ng-model=\\\"template.selected\\\" theme=\\\"bootstrap\\\" ng-disabled=\\\"disabled\\\"\\n                           style=\\\"min-width: 60px;\\\">\\n                    <ui-select-match placeholder=\\\"Select a template page\\\">{{$select.selected}}</ui-select-match>\\n                    <ui-select-choices repeat=\\\"_template in templates\\\">\\n                        {{_template}}\\n                    </ui-select-choices>\\n                </ui-select>\\n                <button class=\\\"btn btn-xs btn-white cms-btn-bottom\\\"\\n                        type=\\\"submit\\\" style=\\\"position: absolute;right: 15px;\\\"\\n                        ng-disabled=\\\"!pageName || !template.selected\\\">\\n                    Create new page\\n                </button>\\n                <input ng-model=\\\"pageName\\\" type=\\\"text\\\" class=\\\"form-control input-xs\\\" placeholder=\\\"page name\\\">\\n            </form>\\n\\n            <form role=\\\"form\\\" ng-submit=\\\"renamePage(newPageName);newPageName = '';\\\">\\n                <button class=\\\"btn btn-xs btn-white cms-btn-bottom\\\"\\n                        type=\\\"submit\\\" style=\\\"position: absolute;right: 15px;\\\"\\n                        ng-disabled=\\\"!newPageName\\\">\\n                    Rename\\n                </button>\\n                <input ng-model=\\\"newPageName\\\" type=\\\"text\\\" class=\\\"form-control input-xs\\\" placeholder=\\\"page name\\\">\\n            </form>\\n\\n            <form role=\\\"form\\\" ng-submit=\\\"onFileSelect(files);\\\">\\n                <button class=\\\"btn btn-xs btn-white cms-btn-bottom\\\"\\n                        type=\\\"submit\\\" style=\\\"position: absolute;right: 15px;\\\">\\n                    Up\\n                </button>\\n                <input type=\\\"file\\\" ngf-select ng-model=\\\"files\\\"\\n                       ngf-multiple=\\\"true\\\" name=\\\"file\\\" class=\\\"form-control input-xs\\\"\\n                       placeholder=\\\"file upload\\\">\\n            </form>\\n\\n        </div>\\n    </div>\\n\\n    <h2>Sitemaps:</h2>\\n\\n    <div js-tree=\\\"treeConfig\\\" ng-model=\\\"tree\\\"\\n         tree-events=\\\"changed:selectNode\\\"></div>\\n</div>\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./components/cms-sitemap/tpl.html\n ** module id = 129\n ** module chunks = 0\n **/","const module = angular\n    .module('components.cmsEditState', ['ui.select'])\n    .directive('cmsEditState', directive);\n\nimport template from './tpl.html';\n\ndirective.$inject = ['cms'];\n\nfunction directive(cms) {\n    controller.$inject = [];\n    function controller() {\n        const vm = this;\n        vm.editState = cms.editState;\n        vm.modes = _.map(Enum.EditMode, (v, k) => ({label: k, value: v}));\n        vm.onSelect = function ({value}) {\n            cms.changeEditMode(value);\n        }\n    }\n\n    return {\n        replace: true,\n        restrict: 'A',\n        scope: {},\n        bindToController: {},\n        template,\n        controllerAs: 'vm',\n        controller\n    };\n}\n\nexport default module.name;\n\n\n\n/** WEBPACK FOOTER **\n ** ./components/cms-edit-state/module.js\n **/","module.exports = \"<div style=\\\"margin-top: 7px;cursor: pointer;\\\">\\n    <ui-select data-ng-model=\\\"vm.editState.editMode\\\" theme=\\\"bootstrap\\\" on-select=\\\"vm.onSelect($item)\\\">\\n        <ui-select-match placeholder=\\\"\\\">\\n            {{$select.selected.label}}&nbsp;&nbsp;&nbsp;\\n        </ui-select-match>\\n        <ui-select-choices data-repeat=\\\"item.value as item in vm.modes | filterBy: ['label']: $select.search\\\">\\n            <div ng-bind-html=\\\"item.label | highlight: $select.search\\\"></div>\\n        </ui-select-choices>\\n    </ui-select>\\n</div>\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./components/cms-edit-state/tpl.html\n ** module id = 131\n ** module chunks = 0\n **/","import 'angular-ui-bootstrap';\nimport 'jstree';\nimport 'jstree-bootstrap-theme/dist/themes/proton/style.min.css'\nimport 'ng-js-tree';\nimport 'ui-select';\nimport 'ui-select/dist/select.min.css';\nimport mainModule from '../cms-main/module'\nimport cmsElementEdit from '../cms-element-edit/module';\nimport cmsList from './cms-list';\nimport _importService from './importService';\nimport _exportService from './exportService';\n\nconst module = angular\n    .module('components.cmsAdmin', ['ui.bootstrap', 'ngJsTree', 'ui.select', mainModule, cmsElementEdit])\n    .factory('importService', _importService)\n    .factory('exportService', _exportService)\n    .directive('cmsAdmin', directive)\n    .directive('cmsList', cmsList);\n\nimport template from './tpl.html';\nimport QueryBuilder from \"../../common/cms/QueryBuilder\";\n\ndirective.$inject = ['cms', '$uibModal', '$timeout', 'formService', 'importService', 'exportService'];\n\nfunction directive(cms, $uibModal, $timeout, formService, importService, exportService) {\n    controller.$inject = [];\n    function controller() {\n        const vm = this;\n\n        vm.openSitemap = function () {\n            function modalCtrl($scope, $uibModalInstance) {\n                $scope.list = [];\n                $scope.cancel = function () {\n                    $uibModalInstance.dismiss('cancel');\n                };\n\n                $scope.tree = cms.getAdminList();\n\n                // $timeout(() => $scope.treeConfig.version++);\n\n                $scope.ignoreModelChanges = () => false;\n                $scope.treeConfig = {\n                    core: {\n                        themes: {name: 'proton', responsive: true},\n                        animation: true,\n                        check_callback: true\n                    },\n                    plugins: [],\n                    version: 1\n                }\n                $scope.get = _.get;\n\n                $scope.refresh = (onlyChangePage = false, changeAdminList = false) => {\n                    $timeout(() => {\n                        if (!$scope.node) return;\n\n                        $scope.list.length = 0;\n                        $scope.loading = true;\n\n                        $scope.element = {};\n                        $timeout(() => {\n                            if (changeAdminList) {\n                                $scope.tree = cms.getAdminList();\n                                $scope.treeConfig.version++;\n                            }\n\n                        })\n\n                        let paramsBuilder = new QueryBuilder().part(false).limit($scope.page.limit).page($scope.page.currentPage).query($scope.node.query);\n                        if (cms.types[$scope.node.type].lean) paramsBuilder.lean();\n                        _.each($scope.queries, q => {\n                            if (q.model) {\n                                const val = _.get(q.model, q.form[0].key);\n                                if (val && val.hasOwnProperty('_id') && !val._id) return;\n                                if (!val) return;\n\n                                if (q.form[0].key === 0 && _.endsWith(q.path, '.field')) q.path = q.path.replace('.field', '');\n\n                                if (q.fn) {\n                                    const result = q.fn(val, _.dropRight(q.path.split('\\.'), 1).join('\\.'), q.path.split('\\.').pop());\n                                    if (result.populate) {\n                                        paramsBuilder.populate(result.populate);\n                                    } else if (result.$where) {\n                                        paramsBuilder.query(result);\n                                    } else {\n                                        paramsBuilder.query({[q.path]: result});\n                                    }\n                                } else if (val.name !== 'None') {\n                                    paramsBuilder.query({[q.path]: val._id || val});\n                                }\n                            }\n                        })\n                        if (!_.isEmpty($scope.search.text)) {\n                            paramsBuilder.search($scope.search.text);\n                        }\n\n\n                        cms.loadElements($scope.node.type, (list) => {\n                            $scope.loading = false;\n                            $scope.list.push(...list);\n\n                            if ($scope.showAs.type === 'element') {\n                                $scope.selectElement($scope.list[0]._id);\n                            }\n                        }, paramsBuilder);\n\n                        // number of pages;\n                        if (!onlyChangePage) cms.countElements($scope.node.type, (count) => {\n                            $scope.page.size = count;\n                        }, paramsBuilder);\n                    })\n\n\n                }\n\n                $scope.watchs = [];\n\n                // onclick\n                $scope.selectNode = function (e, select) {\n                    const _node = JsonFn.clone((select && select.node) ? select.node.original : null);\n                    $scope.node = _.get($scope.tree, _node.path);\n                    const config = getConfig();\n\n\n                    $scope.elementClass = cms.types[$scope.node.type].info.elementClass;\n\n                    $scope.showAs.type = 'table';\n                    if (config && config.showAs) $scope.showAs.type = config.showAs;\n\n\n                    $scope.watchs.forEach(listen => listen());\n                    $scope.watchs.length = 0;\n\n                    $scope.queries = null;\n\n                    if (config && config.query) {\n\n                        $scope.queries = JsonFn.clone(config.query.filter(q => q.choice === 'builtIn').map(q => q.builtIn).map(k => _.find(cms.types[$scope.node.type].queries, {path: k}) || _.find(cms.types[$scope.node.type].paths, {path: k})), true);\n\n                        $scope.queries.forEach((q, index) => {\n                            q.form = !q.form ? [angular.copy(_.get(cms.types[$scope.node.type].form, q.pathInForm))] : [q.form];\n                            _.merge(q.form[0], {templateOptions: {class: 'col-xs-3'}});\n                            var listen = $scope.$watch(`queries[${index}].model`, function (m1, m2) {\n                                if (typeof m2 === 'undefined') return;\n                                $scope.refresh();\n                            }, true);\n                            $scope.watchs.push(listen);\n                        });\n                    }\n\n\n                    $scope.refresh();\n                }\n\n\n                $scope.remove = function (e) {\n                    _.remove($scope.list, e);\n                }\n                $scope.add = function () {\n                    cms.createElement($scope.node.type, {}, model => {\n                        formService.edit(model._id, $scope.node.type, () => $scope.refresh());\n                    })\n                }\n                function getConfig() {\n                    return _.find(Types.Config.list, {type: $scope.node.type});\n                }\n\n                $scope.setting = function () {\n                    const config = getConfig();\n                    if (config) {\n                        formService.edit(config._id, 'Config', () => $scope.refresh(false, true));\n                    } else {\n                        cms.getType('Config', null, ({_id}) => {\n                            formService.edit(_id, 'Config', () => $scope.refresh(false, true));\n                        }, {type: $scope.node.type});\n                    }\n                }\n\n                $scope.export = function () {\n                    exportService.start();\n                    //cms.exportAll();\n                }\n\n                $scope.import = function () {\n                    //cms.importAll();\n                    importService.start();\n                }\n\n                $scope.deleteAll = function () {\n                    cms.deleteElements($scope.node.type, () => $scope.refresh());\n                }\n\n                $scope.search = {text: ''};\n                // search\n                $scope.$watch('search.text', function (tmpStr) {\n                    $scope.refresh();\n                }, true);\n\n                // pagination\n                $scope.page = {\n                    limit: 25,\n                    currentPage: 1\n                };\n\n                $scope.setItemsPerPage = function (num) {\n                    $scope.itemsPerPage = num;\n                    $scope.currentPage = 1; //reset to first page\n                }\n\n                // show as\n                $scope.showAs = {\n                    type: 'table'\n                }\n\n                $scope.getTitle = cms.getTitle;\n\n                $scope.selectElement = function (_id) {\n                    $timeout(() => {\n                        $scope.element._id = null;\n                        $timeout(() => {\n                            $scope.element._id = _id;\n                        });\n                    });\n                }\n\n            }\n\n            $uibModal.open({\n                animation: true,\n                template,\n                controller: modalCtrl,\n                windowClass: 'cms-window'\n            });\n        }\n\n        if (cms.data.online.autoOpenAdmin) vm.openSitemap();\n\n    }\n\n    return {\n        replace: true,\n        restrict: 'A',\n        scope: {},\n        bindToController: {},\n        template: '<a ng-click=\"vm.openSitemap()\">Admin</a>',\n        controllerAs: 'vm',\n        controller\n    };\n}\n\nexport default module.name;\n\n\n\n/** WEBPACK FOOTER **\n ** ./components/cms-admin/module.js\n **/","import template from './cms-list.html';\ndirective.$inject = ['cms', 'formService'];\n\nfunction directive(cms, formService) {\n    controller.$inject = [];\n    function controller() {\n        const vm = this;\n    }\n\n    return {\n        replace: true,\n        restrict: 'A',\n        scope: {},\n        bindToController: {},\n        template,\n        controllerAs: 'vm',\n        controller\n    };\n}\n\nexport default directive;\n\n\n/** WEBPACK FOOTER **\n ** ./components/cms-admin/cms-list.js\n **/","module.exports = \"\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./components/cms-admin/cms-list.html\n ** module id = 134\n ** module chunks = 0\n **/","import template from './importService.html';\n\nfunction service($http, $timeout, cms, $uibModal) {\n    function start() {\n        function modalCtrl($scope, $uibModalInstance) {\n            $scope.refresh = function () {\n                $http.get(`/cms-site-map`).then(({data})=> {\n                    $scope.tree = [data.tree];\n                    $timeout(() => $scope.treeConfig.version++);\n                })\n            }\n            $scope.refresh();\n\n            $scope.treeConfig = {\n                core: {\n                    themes: {name: 'proton', responsive: true},\n                    animation: true,\n                    check_callback: true\n                },\n                plugins: [],\n                version: 1\n            }\n\n            $scope.selectNode = function (e, select) {\n                const _node = JsonFn.clone((select && select.node) ? select.node.original : null);\n                $scope.url = _node.path;\n            }\n\n            $scope.choose = function () {\n                $uibModalInstance.close($scope.url);\n            };\n\n            $scope.cancel = function () {\n                $uibModalInstance.dismiss('cancel');\n            };\n        }\n\n        function typesChooseCtrl($scope, $uibModalInstance, url) {\n            $scope.treeConfig = {\n                core: {\n                    themes: {name: 'proton', responsive: true},\n                    animation: true,\n                    check_callback: true\n                },\n                plugins: [\"checkbox\"],\n                version: 1\n            }\n\n            $scope.refresh = function () {\n                $http.post(`/cms-import/types`, {url}).then(({data})=> {\n                    $scope.tree = data.map(type => ({text: type}));\n                    $timeout(() => $scope.treeConfig.version++);\n                })\n            }\n\n            $scope.refresh();\n\n            $scope.selectNode = function (e, select) {\n                const _node = JsonFn.clone((select && select.node) ? select.node.original : null);\n\n            }\n\n            $scope.choose = function () {\n                let _arr = $scope.treeInstance.jstree(true).get_checked();\n                _arr = _arr.map(id => $scope.treeInstance.jstree(true).get_node(id).text);\n                $uibModalInstance.close(_arr);\n            };\n\n            $scope.cancel = function () {\n                $uibModalInstance.dismiss('cancel');\n            };\n        }\n\n        var modalInstance = $uibModal.open({\n            size: 'lg',\n            animation: true,\n            template,\n            controller: modalCtrl\n        });\n\n\n        modalInstance.result.then(function (url) {\n            const modal2 = $uibModal.open({\n                size: 'lg',\n                animation: true,\n                template,\n                controller: typesChooseCtrl,\n                resolve: {url: () => url}\n            });\n            modal2.result.then((types) => {\n                cms.importAll(types, url);\n            })\n        });\n    }\n\n    return {\n        start\n    }\n}\n\nexport default service;\n\n\n/** WEBPACK FOOTER **\n ** ./components/cms-admin/importService.js\n **/","module.exports = \"<div style=\\\"padding: 20px\\\">\\n    <div class=\\\"panel panel-default\\\">\\n        <div class=\\\"panel-body\\\">\\n            <div js-tree=\\\"treeConfig\\\" ng-model=\\\"tree\\\"\\n                 tree=\\\"treeInstance\\\"\\n                 tree-events=\\\"changed:selectNode\\\"></div>\\n        </div>\\n    </div>\\n    <br><br>\\n    <button type=\\\"button\\\" class=\\\"btn btn-primary submit-button\\\" ng-click=\\\"choose()\\\">Choose</button>\\n    <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-click=\\\"cancel()\\\">Cancel</button>\\n</div>\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./components/cms-admin/importService.html\n ** module id = 136\n ** module chunks = 0\n **/","import template from './exportService.html';\n\nfunction service($http, $timeout, cms, $uibModal) {\n    function start() {\n        function modalCtrl($scope, $uibModalInstance, cms) {\n            $scope.data = {\n                types: []\n            }\n            $scope.types = Object.keys(cms.types).map(k => ({name: k, value: k}));\n\n            const types = Object.keys(cms.types).map(k => ({text: k, value: k}));\n\n            $scope.choose = function () {\n                $uibModalInstance.close({filename: $scope.filename, types: $scope.data.types});\n            };\n\n            $scope.cancel = function () {\n                $uibModalInstance.dismiss('cancel');\n            };\n\n            $scope.options = {};\n\n            $scope.fields = [{\n                key: 'types',\n                type: 'tree',\n                templateOptions: {\n                    label: '',\n                    class: 'col-xs-12',\n                    options: types\n                }\n            }]\n        }\n\n        var modalInstance = $uibModal.open({\n            size: 'lg',\n            animation: true,\n            template,\n            controller: modalCtrl\n        });\n\n\n        modalInstance.result.then(function ({filename, types}) {\n            cms.exportAll(filename, types);\n        });\n    }\n\n    return {\n        start\n    }\n}\n\nexport default service;\n\n\n/** WEBPACK FOOTER **\n ** ./components/cms-admin/exportService.js\n **/","module.exports = \"<div style=\\\"padding: 20px\\\">\\n\\n    <div class=\\\"panel panel-default\\\">\\n        <div class=\\\"panel-body\\\">\\n            <form role=\\\"form\\\" class=\\\"form-horizontal\\\">\\n                <div class=\\\"form-group\\\">\\n                    <label class=\\\"col-sm-12\\\">Filename:</label>\\n                    <div class=\\\"col-sm-12\\\"><input type=\\\"text\\\" ng-model=\\\"filename\\\" class=\\\"form-control\\\"></div>\\n                </div>\\n                <div class=\\\"form-group\\\">\\n                    <label class=\\\"col-sm-12\\\">Select Types:</label>\\n                    <div class=\\\"cms-neutral\\\">\\n                        <formly-form model=\\\"data\\\" fields=\\\"fields\\\" form=\\\"form\\\" options=\\\"options\\\"></formly-form>\\n                    </div>\\n                </div>\\n            </form>\\n        </div>\\n    </div>\\n\\n\\n    <br><br>\\n    <button type=\\\"button\\\" class=\\\"btn btn-primary submit-button\\\" ng-click=\\\"choose()\\\">Choose</button>\\n    <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-click=\\\"cancel()\\\">Cancel</button>\\n</div>\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./components/cms-admin/exportService.html\n ** module id = 138\n ** module chunks = 0\n **/","module.exports = \"<div class=\\\"cms-wrapper animated fadeInRight cms-sidebar cms\\\">\\n    <button type=\\\"button\\\" class=\\\"btn btn-sm btn-white cms-close-position\\\"\\n            ng-click=\\\"cancel()\\\">\\n        <i class=\\\"fa fa-times\\\"></i>\\n    </button>\\n\\n    <br>\\n    <div class=\\\"row\\\">\\n        <div class=\\\"col-xs-3 cms-panel\\\">\\n            <div class=\\\"panel panel-primary\\\">\\n                <div class=\\\"panel-heading\\\">Types</div>\\n                <div class=\\\"panel-body\\\">\\n                    <div js-tree=\\\"treeConfig\\\" ng-model=\\\"tree\\\"\\n                         tree-events=\\\"changed:selectNode\\\" tree=\\\"treeInstance\\\"></div>\\n                </div>\\n            </div>\\n        </div>\\n        <div class=\\\"col-xs-9 cms-panel\\\">\\n            <div class=\\\"panel panel-primary\\\">\\n                <div class=\\\"panel-heading\\\">\\n                    <div class=\\\"cms-admin-right-panel\\\">\\n                        <label style=\\\"color: white\\\"> {{'Show' | translate}} : </label>\\n\\n                        <ui-select style=\\\"min-width: 50px;margin-left: 10px;margin-right: 10px;\\\"\\n                                   class=\\\"cms-select\\\" data-ng-model=\\\"page.limit\\\" theme=\\\"bootstrap\\\"\\n                                   on-select=\\\"refresh()\\\">\\n                            <ui-select-match placeholder=\\\"\\\">{{$select.selected}}&nbsp;&nbsp;</ui-select-match>\\n                            <ui-select-choices data-repeat=\\\"item in [10,25,50,100,200]\\\">{{item}}</ui-select-choices>\\n                        </ui-select>\\n\\n                        <ui-select style=\\\"min-width: 60px;margin-left: 10px;margin-right: 10px;\\\"\\n                                   class=\\\"cms-select\\\" data-ng-model=\\\"showAs.type\\\" theme=\\\"bootstrap\\\"\\n                                   on-select=\\\"refresh()\\\">\\n                            <ui-select-match placeholder=\\\"\\\">\\n                                {{$select.selected.label}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</ui-select-match>\\n                            <ui-select-choices\\n                                    data-repeat=\\\"item.value as item in [{value:'list',label:'List'},{value:'table',label:'Table'},{value:'element',label:'Element'}]\\\">\\n                                {{item.label}}\\n                            </ui-select-choices>\\n                        </ui-select>\\n\\n                        <div class=\\\"btn-group btn-group-xs\\\" style=\\\"margin-top: -12px;margin-right: 10px;\\\">\\n                            <button type=\\\"button\\\" class=\\\"btn btn-white\\\" ng-click=\\\"setting()\\\">{{'Setting' | translate}}</button>\\n                            <button type=\\\"button\\\" class=\\\"btn btn-white dropdown-toggle\\\" data-toggle=\\\"dropdown\\\">\\n                                <span class=\\\"caret\\\"></span>\\n                            </button>\\n                            <ul class=\\\"dropdown-menu\\\" role=\\\"menu\\\" style=\\\"z-index: 10000 !important;\\\">\\n                                <li><a href ng-click=\\\"deleteAll()\\\">{{'DeleteAll' | translate}}</a></li>\\n                                <li><a href ng-click=\\\"import()\\\">Import</a></li>\\n                                <li><a href ng-click=\\\"export()\\\">Export</a></li>\\n\\n                            </ul>\\n                        </div>\\n\\n                        <button class=\\\"btn btn-white btn-xs\\\" ng-click=\\\"add()\\\">\\n                            {{'Add' | translate}}\\n                        </button>\\n\\n                    </div>\\n\\n                    <input type=\\\"text\\\" class=\\\"form-control input-xs\\\"\\n                           style=\\\"margin-left: 10px;width: 100px;display: inline-block;\\\"\\n                           ng-model=\\\"search.text\\\" ng-model-options=\\\"{debounce: 300}\\\" placeholder=\\\"search ...\\\">\\n\\n                    <div ng-if=\\\"queries && queries.length > 0\\\">\\n                        <hr style=\\\"margin-top: 10px;margin-bottom: 5px;\\\">\\n\\n                        <div class=\\\"cms-admin-heading-form\\\" style=\\\"height: 60px;\\\">\\n                            <formly-form ng-repeat=\\\"query in queries\\\" model=\\\"query.model\\\" fields=\\\"query.form\\\"\\n                                         form=\\\"form\\\"\\n                                         options=\\\"options\\\">\\n                            </formly-form>\\n                        </div>\\n                    </div>\\n\\n                </div>\\n                <div class=\\\"panel-body\\\" ng-if=\\\"node\\\">\\n\\n                    <div style=\\\"width: 100%;overflow-x: auto\\\" ng-if=\\\"showAs.type === 'table'\\\">\\n                        <table class=\\\"table cms-admin-table\\\">\\n                            <thead>\\n                            <tr>\\n                                <th ng-repeat=\\\"col in node.columns track by $index\\\" ng-bind=\\\"col.label\\\"></th>\\n                                <th>Edit</th>\\n                            </tr>\\n                            </thead>\\n                            <tbody>\\n                            <tr ng-repeat=\\\"element in list track by $index\\\">\\n                                <td ng-repeat=\\\"col in node.columns track by $index\\\">\\n                                <span cms-direct-editable=\\\"model.{{col.value}}\\\"\\n                                      cms-value=\\\"element[col.value]\\\"\\n                                      cms-ref=\\\"{{element._id}}\\\"\\n                                      cms-type=\\\"{{node.type}}\\\"></span>\\n                                </td>\\n                                <td>\\n                                    <div cms-editor=\\\"{ref: element._id, type: node.type}\\\"\\n                                         cms-remove=\\\"remove(element)\\\"></div>\\n                                </td>\\n                            </tr>\\n                            </tbody>\\n                        </table>\\n                    </div>\\n\\n                    <div ng-if=\\\"loading\\\">\\n                        <img src=\\\"/build/images/ajax-loader.gif\\\">\\n                    </div>\\n\\n                    <div class=\\\"cms-panel-list-content\\\" ng-if=\\\"showAs.type === 'list'\\\">\\n                        <div ng-repeat=\\\"element in list track by $index\\\"\\n                             ng-class=\\\"elementClass\\\"\\n                             cms-element=\\\"{ref: element._id, type: node.type, containers: {}}\\\"\\n                             dnd-moved=\\\"remove(element)\\\"\\n                             inline=\\\"false\\\"></div>\\n                    </div>\\n\\n                    <div class=\\\"\\\" ng-if=\\\"showAs.type === 'element'\\\">\\n                        <button class=\\\"btn cms-btn btn-primary btn-outline btn-xs\\\" style=\\\"margin-right: 10px;\\\"\\n                                ng-repeat=\\\"e in list track by $index\\\"\\n                                ng-click=\\\"selectElement(e._id);\\\" ng-show=\\\"list.length > 1\\\">\\n                            {{getTitle(node.type, e._id)}}\\n                        </button>\\n                        <br><br>\\n\\n                        <div ng-if=\\\"element._id\\\"\\n                             cms-element=\\\"{ref: element._id, type: node.type, containers: {}}\\\"\\n                             inline=\\\"false\\\"></div>\\n                    </div>\\n\\n                    <div class=\\\"clearfix\\\"></div>\\n                    <uib-pagination ng-show=\\\"page.size > 1\\\" total-items=\\\"page.size\\\" ng-model=\\\"page.currentPage\\\"\\n                                    class=\\\"pagination-sm\\\"\\n                                    items-per-page=\\\"page.limit\\\"\\n                                    ng-change=\\\"refresh(true)\\\"\\n                                    max-size=\\\"10\\\"\\n                                    boundary-link-numbers=\\\"true\\\"></uib-pagination>\\n\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n\\n</div>\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./components/cms-admin/tpl.html\n ** module id = 139\n ** module chunks = 0\n **/","import common from \"../../common/common.module\";\nimport cmsNav from \"./cms-nav.directive\";\nimport cmsAdmin from \"../cms-admin/module\";\nimport cmsTypes from \"../cms-types/module\";\nimport cmsSitemap from \"../cms-sitemap/module\";\nimport cmsEditState from \"../cms-edit-state/module\";\n\nconst module = angular\n    .module('components.cmsNav', [common, cmsAdmin, cmsTypes, cmsSitemap, cmsEditState])\n    .directive('cmsNav', cmsNav);\n\nexport default module.name;\n\n\n/** WEBPACK FOOTER **\n ** ./components/cms-nav/module.js\n **/","import template from './cms-nav.html';\ndirective.$inject = ['cms', '$timeout'];\nfunction directive(cms, $timeout) {\n    function link(scope, element, attr) {\n        var menu = cms.data.online.menu;\n\n        $timeout(() => {\n            $('.main-nav').css('top', menu.top);\n            $('.main-nav').css('right', menu.right);\n        }, 400);\n\n        $('body').css('padding-top', menu.bodyPaddingTop);\n        if (menu.inverse) $(element).find('.cms-menu').addClass('navbar-inverse');\n        if (menu.bottom) $(element).find('.cms-menu').removeClass('navbar-fixed-top').addClass('navbar-fixed-bottom');\n\n\n        const vm = scope.vm;\n        vm.toggleContainer = function () {\n            cms.editState.showContainerEdit = !cms.editState.showContainerEdit;\n        }\n\n        $(element).find('.cms-types-dropdown').on('show.bs.dropdown', function () {\n            $('body').addClass('dnd-mode');\n        });\n\n        $(element).find('.cms-types-dropdown').on('hide.bs.dropdown', function () {\n            $('body').removeClass('dnd-mode');\n        });\n    }\n\n    return {\n        replace: false,\n        restrict: 'A',\n        scope: {},\n        bindToController: {},\n        template,\n        controller: function () {\n        },\n        controllerAs: 'vm',\n        link\n    };\n}\n\n\nexport default directive;\n\n\n/** WEBPACK FOOTER **\n ** ./components/cms-nav/cms-nav.directive.js\n **/","module.exports = \"<div class=\\\"cms\\\">\\n    <nav role=\\\"navigation\\\" class=\\\"navbar navbar-fixed-top navbar-default cms-menu\\\">\\n        <div class=\\\"container\\\">\\n            <div class=\\\"navbar-header\\\">\\n                <button type=\\\"button\\\" data-toggle=\\\"collapse\\\" data-target=\\\"#dropdown_menu\\\" aria-expanded=\\\"false\\\"\\n                        aria-controls=\\\"navbar\\\" class=\\\"navbar-toggle collapsed\\\"><span\\n                        class=\\\"sr-only\\\">Toggle navigation</span><span class=\\\"icon-bar\\\"></span><span\\n                        class=\\\"icon-bar\\\"></span><span\\n                        class=\\\"icon-bar\\\"></span></button>\\n                <a href=\\\"#\\\" class=\\\"navbar-brand\\\">Cms Mon</a></div>\\n            <div id=\\\"dropdown_menu\\\" class=\\\"collapse navbar-collapse\\\">\\n                <ul class=\\\"nav navbar-nav\\\">\\n                    <li class=\\\"dropdown cms-types-dropdown\\\">\\n                        <a href=\\\"#\\\" data-toggle=\\\"dropdown\\\" role=\\\"button\\\" aria-expanded=\\\"false\\\"\\n                                            class=\\\"dropdown-toggle\\\">Types<span class=\\\"caret\\\"></span></a>\\n                        <ul role=\\\"menu\\\" cms-types=\\\"\\\" class=\\\"dropdown-menu\\\"></ul>\\n                    </li>\\n                    <li><a cms-admin>Admin</a></li>\\n                    <li><a href=\\\"#\\\" cms-sitemap>Sitemap</a></li>\\n                </ul>\\n                <ul class=\\\"nav navbar-nav navbar-right\\\">\\n                    <li>\\n                        <div cms-edit-state></div>\\n                    </li>\\n                    <li><button class=\\\"btn btn-default navbar-btn\\\"\\n                                style=\\\"margin-left: 10px\\\"\\n                                ng-click=\\\"vm.toggleContainer()\\\">Container</button></li>\\n                </ul>\\n            </div>\\n        </div>\\n    </nav>\\n</div>\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./components/cms-nav/cms-nav.html\n ** module id = 142\n ** module chunks = 0\n **/"],"sourceRoot":""}